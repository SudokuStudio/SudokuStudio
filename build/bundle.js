var bundle=function(){"use strict";function e(e,t,n){var r,o,i,l,s;function a(){var c=Date.now()-l;c<t&&c>=0?r=setTimeout(a,t-c):(r=null,n||(s=e.apply(i,o),i=o=null))}null==t&&(t=100);var c=function(){i=this,o=arguments,l=Date.now();var c=n&&!r;return r||(r=setTimeout(a,t)),c&&(s=e.apply(i,o),i=o=null),s};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=e.apply(i,o),i=o=null,clearTimeout(r),r=null)},c}e.debounce=e;var t=e;function n(e){var t={exports:{}};return e(t,t.exports),t.exports}var r=n((function(e){var t=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var l=t.charCodeAt(r);n[2*r]=l>>>8,n[2*r+1]=l%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var l=[];return n.forEach((function(t){l.push(e(t))})),i.decompress(l.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,i,l={},s={},a="",c="",u="",d=2,f=3,h=2,p=[],g=0,m=0;for(i=0;i<e.length;i+=1)if(a=e.charAt(i),Object.prototype.hasOwnProperty.call(l,a)||(l[a]=f++,s[a]=!0),c=u+a,Object.prototype.hasOwnProperty.call(l,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<h;r++)g<<=1,m==t-1?(m=0,p.push(n(g)),g=0):m++;for(o=u.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<h;r++)g=g<<1|o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o=0;for(o=u.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[u]}else for(o=l[u],r=0;r<h;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;0==--d&&(d=Math.pow(2,h),h++),l[c]=f++,u=String(a)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<h;r++)g<<=1,m==t-1?(m=0,p.push(n(g)),g=0):m++;for(o=u.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<h;r++)g=g<<1|o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o=0;for(o=u.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[u]}else for(o=l[u],r=0;r<h;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;0==--d&&(d=Math.pow(2,h),h++)}for(o=2,r=0;r<h;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;for(;;){if(g<<=1,m==t-1){p.push(n(g));break}m++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,i,l,s,a,c,u,d=[],f=4,h=4,p=3,g="",m=[],v={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)d[o]=o;for(l=0,a=Math.pow(2,2),c=1;c!=a;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),l|=(s>0?1:0)*c,c<<=1;switch(l){case 0:for(l=0,a=Math.pow(2,8),c=1;c!=a;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),l|=(s>0?1:0)*c,c<<=1;u=e(l);break;case 1:for(l=0,a=Math.pow(2,16),c=1;c!=a;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),l|=(s>0?1:0)*c,c<<=1;u=e(l);break;case 2:return""}for(d[3]=u,i=u,m.push(u);;){if(v.index>t)return"";for(l=0,a=Math.pow(2,p),c=1;c!=a;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),l|=(s>0?1:0)*c,c<<=1;switch(u=l){case 0:for(l=0,a=Math.pow(2,8),c=1;c!=a;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),l|=(s>0?1:0)*c,c<<=1;d[h++]=e(l),u=h-1,f--;break;case 1:for(l=0,a=Math.pow(2,16),c=1;c!=a;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),l|=(s>0?1:0)*c,c<<=1;d[h++]=e(l),u=h-1,f--;break;case 2:return m.join("")}if(0==f&&(f=Math.pow(2,p),p++),d[u])g=d[u];else{if(u!==h)return null;g=i+i.charAt(0)}m.push(g),d[h++]=i+g.charAt(0),i=g,0==--f&&(f=Math.pow(2,p),p++)}}};return i}();null!=e&&(e.exports=t)})),o=n((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StateManager=t.StateRef=void 0;const n="function"==typeof Object.fromEntries?Object.fromEntries:e=>{const t=Object.create(null);for(const[n,r]of e)t[n]=r;return t},r=Symbol("watchers key");function o(e,t){return null==e&&null==t||Object.is(e,t)}function i(e){return null==e?null:e}class l{constructor(e,t){this._path=[],this._stateManager=e;for(const e of t)".."===e?this._path.pop():"."===e||this._path.push(e)}path(){return[...this._path]}ref(...e){return new l(this._stateManager,[...this._path,...e])}get(){return this._stateManager.get(...this._path)}watch(e,t){return this._stateManager.watch(e,t,this._path.join("/")),e}unwatch(e){this._stateManager.unwatch(e)}replace(e){return this._stateManager.update({[this._path.join("/")]:e})}update(e){const t=this._path.join("/")+"/",r=n(Object.entries(e).map((([e,n])=>[t+e,n])));return this._stateManager.update(r)}subscribe(e){const t=this.watch(((t,n,r)=>e(r)),!0);return()=>this.unwatch(t)}set(e){this.replace(e)}}t.StateRef=l;class s{constructor(){this._data=null,this._watchers=new Map,this._watcherTreeRoot=Object.create(null)}ref(...e){return new l(this,e)}get(...e){let t=this._data;for(const n of e){if(null==t)break;if(n.includes("/"))throw Error('Path cannot contain "/", split into varargs.');t=t[n]}return i(t)}watch(e,t,...n){let r=this._watchers.get(e);null==r&&(r=new Set,this._watchers.set(e,r));for(const r of n)this._watchPattern(e,t,r);return e}unwatch(e){if(!this._watchers.has(e))throw Error("Cannot find watcher.");const t=this._watchers.get(e);this._watchers.delete(e);for(const n of t)if(!s._unwatchPattern(e,this._watcherTreeRoot,n.split("/")))throw Error(`Failed to remove watcher from pattern: ${n}.`)}update(e){if("object"!=typeof e)throw Error(`Invalid update object: ${e}`);let t=!1;const r=[],i=[];for(const[n,l]of Object.entries(e)){if(0>=n.length)throw Error("Update key cannot be empty.");const e=n.split("/"),{data:a,redo:c,undo:u}=s._updateInternal(this._data,l,e,[],[this._watcherTreeRoot]);o(this._data,a)||(t=!0,this._data=a,r.push(...c),i.push(...u))}return t?{redo:n(r),undo:n(i)}:null}_watchPattern(e,t,n){if(!n||0>=n.length)throw Error(`Pattern cannot be empty: ${n}.`);const o=n.split("/");let i=this._watcherTreeRoot;for(const e of o)"."!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(i[e]=Object.create(null)),i=i[e]);(i[r]||(i[r]=new Set)).add(e),t&&s._triggerNow(this._data,o,[],e)}static _unwatchPattern(e,t,n){if(0===n.length){const n=t[r];return null!=n&&(!!n.delete(e)&&(0>=n.size&&delete t[r],!0))}const[o,...i]=n;return!("."===o&&!this._unwatchPattern(e,t,i))&&(!!Object.prototype.hasOwnProperty.call(t,o)&&(!!this._unwatchPattern(e,t[o],i)&&(0>=Object.keys(t[o]).length&&null==t[r]&&delete t[o],!0)))}static _triggerNow(e,t,n,r){if(null==e)return;if(0>=t.length){try{r(n,null,e)}catch(e){console.error("Watcher threw:",e,r)}return}if("object"!=typeof e)return;const[o,...i]=t;if("."===o)this._triggerNow(e,i,n,r);else if("*"===o)for(const[t,o]of Object.entries(e))this._triggerNow(o,i,[...n,t],r);else Object.prototype.hasOwnProperty.call(e,o)&&this._triggerNow(e[o],i,[...n,o],r)}static _updateInternal(e,t,n,l,a){const c=0>=n.length,u="object"==typeof e?e:null,d="object"==typeof t?t:null,{data:f,redo:h,undo:p}=(()=>{if(c){if(null==u&&null==d)return{data:t,undo:[],redo:[]};const n=new Set([...Object.keys(u||{}),...Object.keys(d||{})]);let r=!1;const c=Object.create(null),f=[],h=[];for(const e of n){const t=u?i(u[e]):null,n=d?i(d[e]):null,p=s._nextWatcherTrees(e,a),{data:g,redo:m,undo:v}=s._updateInternal(t,n,[],[...l,e],p);o(t,g)||(r=!0,f.push(...m),h.push(...v),c[e]=g)}if(!r)return{data:e,redo:f,undo:h};const p=Object.assign(Object.create(null),u);for(const[e,t]of Object.entries(c))null==t?delete p[e]:p[e]=t;return 0===Object.keys(p).length?{data:d||t,redo:f,undo:h}:{data:p,redo:f,undo:h}}const[r,...f]=n,h=u?i(u[r]):null,p=s._nextWatcherTrees(r,a),{data:g,redo:m,undo:v}=s._updateInternal(h,t,f,[...l,r],p);if(o(h,g))return{data:e,redo:m,undo:v};const b=Object.assign(Object.create(null),u);return null==g?delete b[r]:b[r]=g,Object.values(b).every((e=>null==e))?{data:null,redo:m,undo:v}:{data:b,redo:m,undo:v}})();if(!o(e,f)){if(null==e){if(null==f)throw"N/A";"object"==typeof f||(h.length=0,h.push([l.join("/"),f]),p.length=0,p.push([l.join("/"),null]))}else"object"==typeof e?null==f||"object"==typeof f||(h.length=0,h.push([l.join("/"),f])):null==f?(h.length=0,h.push([l.join("/"),null]),p.length=0,p.push([l.join("/"),e])):"object"==typeof f?(p.length=0,p.push([l.join("/"),e])):(h.length=0,h.push([l.join("/"),f]),p.length=0,p.push([l.join("/"),e]));for(const t of a)for(const n of t[r]||[])try{n(l,e,f)}catch(e){console.error("Watcher threw:",e,n)}return{data:f,undo:p,redo:h}}return{data:e,undo:p,redo:h}}static _nextWatcherTrees(e,t){const n=[];for(const r of t)r["*"]&&n.push(r["*"]),r[e]&&n.push(r[e]);return n}}t.StateManager=s}));function i(e,t){const n=[];for(let r=0;r<t.height;r++){const o=[];for(let n=0;n<t.width;n++){const i=f([n,r],t);o.push(`${e[i]||"_"}`)}n.push(o.join(" "))}return n.join("\n")}const l=.01,s=.005,a=.04,c=.02;function u(e){const t=[];for(let n=0;null!=e[n];n++)t.push(e[n]);return t}function d(e,{width:t}){return[e%t,Math.floor(e/t)]}function f([e,t],{width:n}){return t*n+e}function h([e,t],{width:n,height:r},o){if(e<0||n<=e||t<0||r<=t)return null;if(o){const n=e%1-.5,r=t%1-.5;if(.5<Math.abs(n)+Math.abs(r))return null}return[Math.floor(e),Math.floor(t)]}function p([e,t],{width:n}){return t*(n+1)+e}function g(e,{width:t}){return[e%(t+1),Math.floor(e/(t+1))]}function m([e,t],{width:n,height:r}){const o=Math.round(e),i=Math.round(t);return o<0||n<o||i<0||r<i?null:[o,i]}function v([e,t],{width:n,height:r}){const o=[];for(let i=-1;i<=0;i++){const l=t+i;if(!(l<0||r<=l))for(let t=-1;t<=0;t++){const r=e+t;r<0||n<=r||o.push([r,l])}}return o}function b([e,t],{width:n,height:r}){const o=Math.abs(t%1-.5)>=Math.abs(e%1-.5),i=n-+!o,l=r-+o,s=Math.floor(t-.5*+o),a=Math.floor(e-.5*+!o);return a<0||i<=a||s<0||l<=s?null:2*(i*s+a)+ +o}function y(e,t){const[n,r]=w(e,t),[o,i]=d(n,t),[l,s]=d(r,t);return[.5*(o+l+1),.5*(i+s+1)]}function w(e,t){if(1==e%2){const n=.5*(e-1);return[n,n+t.width]}{const n=.5*e+Math.floor(.5*e/(t.width-1));return[n,n+1]}}function k([e,t],{width:n,height:r}){const o=t<0||r<=t,i=e<0||n<=e;if(o===i)return null;return Math.floor(o?e:t)<<2|+i<<1|+(0<(o?t:e))}function x(e,{width:t,height:n}){const r=e>>2,o=1&e>>1,i=o,l=1-o;let s=r*l,a=r*i;const c=[];for(;s<t&&a<n;)c.push([s,a]),s+=i,a+=l;return 1&e&&c.reverse(),c}function _([e,t],n){const{width:r,height:o}=n,i=e<0,l=t<0,s=o<=t;if(!(i||r<=e||l||s))return null;e=Math.max(-.5,Math.min(r,e)),t=Math.max(-.5,Math.min(o,t));const a=1&Math.floor(2*e)+Math.floor(2*t);let c;c=l?0|a:s?2|1-a:i?a<<1|0:1-a<<1|1;const u=Math.floor(e)+1-2*(1&c),d=Math.floor(t)+1-(2&c);return u<0||r<=u||d<0||o<=d?null:l||s?u<<2|c:r+o-d-1-(1&c>>1)<<2|c}function $(e,{width:t,height:n},r=-.75){const[o,i]=M(e,{width:t,height:n});return[.5+o+r*(1-2*(1&e>>0)),.5+i+r*(1-2*(1&e>>1))]}function T(e){return[1&e?-1:1,2&e?-1:1]}function M(e,{width:t,height:n}){const r=e>>2,o=1&e>>1;if(r<t)return[r,o*(n-1)];return[(1&e)*(t-1),n-(r-t)-1-o]}function H(e,t){let[n,r]=M(e,t);const[o,i]=T(e),l=[];do{l.push([n,r]),n+=o,r+=i}while(0<=n&&n<t.width&&0<=r&&r<t.height);return l}function C(e){return null==e?[]:Object.keys(e).filter((t=>null!=e[t]&&0!=e[t])).map(Number).sort(((e,t)=>e-t))}function O(e,t){if(t.width!==t.height)throw Error(`No major diagonal exists for ${t.height} rows by ${t.width} cols grid.`);return Array(t.width).fill(null).map(((n,r)=>[r,e?t.width-1-r:r]))}function S(e,{width:t,height:n}){if(e<0||n<=e)throw Error(`ROW is outside grid: ${e}.`);return Array(t).fill().map(((n,r)=>e*t+r))}function E(e,{width:t,height:n}){if(e<0||t<=e)throw Error(`COL is outside grid: ${e}.`);return Array(n).fill().map(((n,r)=>e+r*t))}function A(e,t,n){const r=[],o=t.width*t.height;for(let i=0;i<o;i++){const o=Math.floor(e/t.width)*t.height+Math.floor(i/t.width),l=e%t.width*t.height+i%t.width;r.push(f([l,o],n))}return r}function I(e,t,n){const r=new Map;for(const o of t){const t=e[o];null!=t&&(r.has(t)?(n[r.get(t)]=!0,n[o]=!0):r.set(t,o))}}function L(e,t,n,r){let o=0,i=!0;for(const n of t){const t=e[n];null==t?i=!1:o+=t}return!!(r<o||i&&r!==o)&&(t.forEach((e=>n[e]=!0)),!0)}function j(e,t,n,r){for(let o=0;o<t.length;o++){const i=e[t[o]],l=e[n[o]];null!=i&&null!=l&&(i!==l&&(r[t[o]]=!0,r[n[o]]=!0))}}function D(e,t,n,r){for(const o of t){const t=e[o];null==t||r(t)||(n[o]=!0)}}function N(e,t,{shortenHead:n,shortenTail:r,bezierRounding:o}={}){if(0>=e.length)return"";const i=[];for(const n of e){const[e,r]=d(n,t);i.push([e+.5,r+.5])}if(1===i.length&&i.push(i[0]),n){const e=[i[1][0]-i[0][0],i[1][1]-i[0][1]];R(e),i[0][0]+=e[0]*n,i[0][1]+=e[1]*n}if(r){const e=i.length,t=[i[e-2][0]-i[e-1][0],i[e-2][1]-i[e-1][1]];R(t),i[e-1][0]+=t[0]*r,i[e-1][1]+=t[1]*r}if(o){const e=["M",i[0].join(",")];for(let t=2;t<i.length;t++){const n=i[t-2],r=i[t-1],l=i[t],s=[n[0]-r[0],n[1]-r[1]],a=[l[0]-r[0],l[1]-r[1]];R(s),R(a),s[0]*=o,s[1]*=o,a[0]*=o,a[1]*=o,s[0]+=r[0],s[1]+=r[1],a[0]+=r[0],a[1]+=r[1],e.push("L",s.join(","),"Q",r.join(","),a.join(","))}return e.push("L",i[i.length-1].join(",")),e.join(" ")}return"M"+i.map((e=>e.join(","))).join("L")}function R(e){const t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);e[0]/=t,e[1]/=t}function P({offsetX:e,offsetY:t},n){const{width:r,height:o}=n.getBoundingClientRect(),{x:i,y:l,width:s,height:a}=n.viewBox.baseVal;return[s*e/r+i,a*t/o+l]}function U([e,t],{width:n,height:r}){const o=[];return 0<e&&o.push([e-1,t]),0<t&&o.push([e,t-1]),e<n-1&&o.push([e+1,t]),t<r-1&&o.push([e,t+1]),o}function G(e,t){const n=new Map;for(const r of e){const e=U(d(r,t),t).map((e=>f(e,t))),o=new Set;for(const t of e)n.has(t)?n.get(t).delete(r):o.add(t);n.set(r,o)}const r=[];for(const[e,t]of n)for(const n of t)r.push([e,n]);return r}function z(e,t,n=0){const r=function(e,t){const n=new Map;function r(e,t){const r=n.get(t);if(null==r?void 0:r.has(e))r.delete(e),0>=r.size&&n.delete(t);else{let r=n.get(e);null==r&&(r=new Set,n.set(e,r)),r.add(t)}}for(const n of e){const[e,o]=d(n,t),i=p([e,o],t),l=p([1+e,o],t),s=p([1+e,1+o],t),a=p([e,1+o],t);r(i,l),r(l,s),r(s,a),r(a,i)}return n}(e,t);if(0>=r.size)return null;const o=[];for(;!(0>=r.size);){const[e,i]=Array.from(r.entries()).find((([e,t])=>1===t.size)),l=Array.from(i)[0];let s=g(e,t),a=g(l,t),c=l;const u=[];do{const e=r.get(c);let o=Number.NEGATIVE_INFINITY,i=-1,l=null;for(const n of e){const e=g(n,t),r=(a[0]-s[0])*(e[1]-a[1])-(a[1]-s[1])*(e[0]-a[0]);o<r&&(o=r,i=n,l=e)}if(null==l)throw"UNREACHABLE";if(e.delete(i),0>=e.size&&r.delete(c),0!==o){let[e,t]=a;t+=n*(a[0]-s[0])+o*n*(s[1]-a[1]),e+=n*(a[1]-l[1])+o*n*(l[0]-a[0]),u.push(`${e},${t}`)}s=a,a=l,c=i}while(l!==c);o.push("M"+u.join("L")+"Z")}return o.join("")}function F(e,t){return 0<=e[0]&&e[0]<t.width&&0<=e[1]&&e[1]<t.height}function B(e,t){let n,r;if(t<=4)n=e%2*.6-.3,r=.6*(e/2|0)-.3;else{const o=t/2|0;if(e<o){n=e*(.6/(o-1))-.3,r=-.3}else{n=(e-o)*(.6/(t-o-1))-.3,r=.3}}return[n,r]}const W=2*Math.PI;function V(e,t,n,r,o=.2){if(n>=r)throw Error(`INDEX ${n} must be less than SLICES ${r}.`);if(0>n)throw Error(`INDEX ${n} must be positive`);const[i,l]=d(e,t);if(1===r)return`M${i},${l}L${i+1},${l}L${i+1},${l+1}L${i},${l+1}Z`;const s=((o+n/r)%1+1)%1,a=((o+(n+1)/r)%1+1)%1,c=[.125,.375,.625,.875];let u,f;for(u=0;u<c.length&&c[u]<s;u++);for(f=0;f<c.length&&c[f]<a;f++);u%=c.length,f%=c.length;const h=[s];for(;u!==f;)h.push(c[u]),u++,u%=c.length;return h.push(a),`M${i+.5},${l+.5}L`+h.map((e=>[Math.cos(W*e),Math.sin(W*e)])).map((([e,t])=>{const n=Math.max(Math.abs(e),Math.abs(t));return[e/n,t/n]})).map((([e,t])=>[i+.5*(e+1),l+.5*(t+1)])).map((([e,t])=>`${e},${t}`)).join("L")+"Z"}function q(e,t=!0,n=!0,r=!1){const o={};if(!t&&!n)return o;for(const t of Object.values(e))n&&"filled"===t.type&&Object.assign(o,t.value);for(const n of Object.values(e))if("givens"===n.type)if(t)Object.assign(o,n.value);else for(const e of Object.keys(n.value||{}))delete o[e];if(!r)for(const e of Object.keys(o))0===o[e]&&delete o[e];return o}const Y=(()=>{const e=[["M",1e3],["CM",900],["D",500],["CD",400],["C",100],["XC",90],["L",50],["XL",40],["X",10],["IX",9],["V",5],["IV",4],["I",1]];return function(t){if(0>=t)return`${t}`;let n="";for(const[o,i]of e){var r=Math.floor(t/i);t-=r*i,n+=o.repeat(r)}return n}})(),X=(()=>{const e=/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/,t=/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,n={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};return function(r){let o,i=0;if(!(r=r.toUpperCase())||!e.test(r))return null;for(;o=t.exec(r);)i+=n[o[0]];return i}})();function*K(...e){if(0===e.length)yield[];else for(let t=0;t<e[0];t++)for(const n of K(...e.slice(1)))n.unshift(t),yield n}function Z(){}function J(e){return e()}function Q(){return Object.create(null)}function ee(e){e.forEach(J)}function te(e){return"function"==typeof e}function ne(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function re(e,...t){if(null==e)return Z;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function oe(e,t,n){e.$$.on_destroy.push(re(t,n))}function ie(e,t,n,r){if(e){const o=le(e,t,n,r);return e[0](o)}}function le(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function se(e,t,n,r,o,i,l){const s=function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(t,r,o,i);if(s){const o=le(t,n,r,l);e.p(o,s)}}function ae(e,t,n=t){return e.set(n),t}let ce,ue=!1;function de(e,t,n,r){for(;e<t;){const o=e+(t-e>>1);n(o)<=r?e=o+1:t=o}return e}function fe(e,t){ue?(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;const t=e.childNodes,n=new Int32Array(t.length+1),r=new Int32Array(t.length);n[0]=-1;let o=0;for(let e=0;e<t.length;e++){const i=de(1,o+1,(e=>t[n[e]].claim_order),t[e].claim_order)-1;r[e]=n[i]+1;const l=i+1;n[l]=e,o=Math.max(l,o)}const i=[],l=[];let s=t.length-1;for(let e=n[o]+1;0!=e;e=r[e-1]){for(i.push(t[e-1]);s>=e;s--)l.push(t[s]);s--}for(;s>=0;s--)l.push(t[s]);i.reverse(),l.sort(((e,t)=>e.claim_order-t.claim_order));for(let t=0,n=0;t<l.length;t++){for(;n<i.length&&l[t].claim_order>=i[n].claim_order;)n++;const r=n<i.length?i[n]:null;e.insertBefore(l[t],r)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function he(e,t,n){ue&&!n?fe(e,t):(t.parentNode!==e||n&&t.nextSibling!==n)&&e.insertBefore(t,n||null)}function pe(e){e.parentNode.removeChild(e)}function ge(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function me(e){return document.createElement(e)}function ve(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function be(e){return document.createTextNode(e)}function ye(){return be(" ")}function we(){return be("")}function ke(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function xe(e){return function(t){return t.preventDefault(),e.call(this,t)}}function _e(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function $e(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Te(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Me(e,t){e.value=null==t?"":t}function He(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function Ce(e,t,n){e.classList[n?"add":"remove"](t)}function Oe(e){ce=e}function Se(){if(!ce)throw new Error("Function called outside component initialization");return ce}function Ee(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const Ae=[],Ie=[],Le=[],je=[],De=Promise.resolve();let Ne=!1;function Re(e){Le.push(e)}let Pe=!1;const Ue=new Set;function Ge(){if(!Pe){Pe=!0;do{for(let e=0;e<Ae.length;e+=1){const t=Ae[e];Oe(t),ze(t.$$)}for(Oe(null),Ae.length=0;Ie.length;)Ie.pop()();for(let e=0;e<Le.length;e+=1){const t=Le[e];Ue.has(t)||(Ue.add(t),t())}Le.length=0}while(Ae.length);for(;je.length;)je.pop()();Ne=!1,Pe=!1,Ue.clear()}}function ze(e){if(null!==e.fragment){e.update(),ee(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Re)}}const Fe=new Set;let Be;function We(){Be={r:0,c:[],p:Be}}function Ve(){Be.r||ee(Be.c),Be=Be.p}function qe(e,t){e&&e.i&&(Fe.delete(e),e.i(t))}function Ye(e,t,n,r){if(e&&e.o){if(Fe.has(e))return;Fe.add(e),Be.c.push((()=>{Fe.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function Xe(e,t){e.d(1),t.delete(e.key)}function Ke(e,t){Ye(e,1,1,(()=>{t.delete(e.key)}))}function Ze(e,t,n,r,o,i,l,s,a,c,u,d){let f=e.length,h=i.length,p=f;const g={};for(;p--;)g[e[p].key]=p;const m=[],v=new Map,b=new Map;for(p=h;p--;){const e=d(o,i,p),s=n(e);let a=l.get(s);a?r&&a.p(e,t):(a=c(s,e),a.c()),v.set(s,m[p]=a),s in g&&b.set(s,Math.abs(p-g[s]))}const y=new Set,w=new Set;function k(e){qe(e,1),e.m(s,u),l.set(e.key,e),u=e.first,h--}for(;f&&h;){const t=m[h-1],n=e[f-1],r=t.key,o=n.key;t===n?(u=t.first,f--,h--):v.has(o)?!l.has(r)||y.has(r)?k(t):w.has(o)?f--:b.get(r)>b.get(o)?(w.add(r),k(t)):(y.add(o),f--):(a(n,l),f--)}for(;f--;){const t=e[f];v.has(t.key)||a(t,l)}for(;h;)k(m[h-1]);return m}function Je(e){e&&e.c()}function Qe(e,t,n,r){const{fragment:o,on_mount:i,on_destroy:l,after_update:s}=e.$$;o&&o.m(t,n),r||Re((()=>{const t=i.map(J).filter(te);l?l.push(...t):ee(t),e.$$.on_mount=[]})),s.forEach(Re)}function et(e,t){const n=e.$$;null!==n.fragment&&(ee(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(e,t){-1===e.$$.dirty[0]&&(Ae.push(e),Ne||(Ne=!0,De.then(Ge)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function nt(e,t,n,r,o,i,l=[-1]){const s=ce;Oe(e);const a=e.$$={fragment:null,ctx:null,props:i,update:Z,not_equal:o,bound:Q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:t.context||[]),callbacks:Q(),dirty:l,skip_bound:!1};let c=!1;if(a.ctx=n?n(e,t.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return a.ctx&&o(a.ctx[t],a.ctx[t]=i)&&(!a.skip_bound&&a.bound[t]&&a.bound[t](i),c&&tt(e,t)),n})):[],a.update(),c=!0,ee(a.before_update),a.fragment=!!r&&r(a.ctx),t.target){if(t.hydrate){ue=!0;const e=function(e){return Array.from(e.childNodes)}(t.target);a.fragment&&a.fragment.l(e),e.forEach(pe)}else a.fragment&&a.fragment.c();t.intro&&qe(e.$$.fragment),Qe(e,t.target,t.anchor,t.customElement),ue=!1,Ge()}Oe(s)}class rt{$destroy(){et(this,1),this.$destroy=Z}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ot=[];function it(e,t){return{subscribe:lt(e,t).subscribe}}function lt(e,t=Z){let n;const r=[];function o(t){if(ne(e,t)&&(e=t,n)){const t=!ot.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),ot.push(n,e)}if(t){for(let e=0;e<ot.length;e+=2)ot[e][0](ot[e+1]);ot.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,l=Z){const s=[i,l];return r.push(s),1===r.length&&(n=t(o)||Z),i(e),()=>{const e=r.indexOf(s);-1!==e&&r.splice(e,1),0===r.length&&(n(),n=null)}}}}function st(e,t,n){const r=!Array.isArray(e),o=r?[e]:e,i=t.length<2;return it(n,(e=>{let n=!1;const l=[];let s=0,a=Z;const c=()=>{if(s)return;a();const n=t(r?l[0]:l,e);i?e(n):a=te(n)?n:Z},u=o.map(((e,t)=>re(e,(e=>{l[t]=e,s&=~(1<<t),n&&c()}),(()=>{s|=1<<t}))));return n=!0,c(),function(){ee(u),a()}}))}const at=lt(),ct=lt(),ut=window.boardState=new o.StateManager,dt=ut.ref("grid");const ft=window.warningState=new o.StateManager,ht=["filled","corner","center","colors"],pt=window.userState=new o.StateManager;pt.update({select:{},cursor:null,tool:"120",prevTool:"120",marks:{filled:"120",corner:"130",center:"140",colors:"150"},history:{},historyUndone:{}});const gt=pt.ref("select"),mt=pt.ref("cursor"),vt=pt.ref("prevTool"),bt=pt.ref("tool"),yt="tool";function wt(){return""+(31*Math.floor(4294967295*Math.random())+Date.now())%4294967295}function kt(e){e++;const t=[];for(;0<e;){const n=--e%26;e=Math.floor(e/26),t.unshift(String.fromCharCode(65+n))}return t.join("")}function xt(e){return!!e&&((0!==Object.keys(e.redo).length||0!==Object.keys(e.undo).length)&&(pt.update({[`history/${Date.now()}`]:JSON.stringify(e),historyUndone:null}),!0))}function _t(e){const t=pt.get(e?"historyUndone":"history")||{},n=Object.keys(t);if(0===n.length)return!1;const r=n.reduce(((t,n)=>e!==+t>+n?t:n)),o=t[`${r}`];null==o&&(console.warn("EMPTY HISTORY ENTRY",r,o),pt.update({[`${e?"historyUndone":"history"}/${r}`]:null}),_t(e));const i=JSON.parse(o);return ut.update(e?i.redo:i.undo),pt.update({[`history/${r}`]:e?o:null,[`historyUndone/${r}`]:e?null:o}),!0}window.changeHistory=_t,window.addEventListener("keydown",(e=>{if("KeyZ"===e.code&&e.ctrlKey)_t(e.shiftKey);else{if("KeyY"!==e.code||!e.ctrlKey)return;_t(!0)}e.preventDefault(),e.stopImmediatePropagation()}));class $t{constructor(e){this.onTap=null,this.onDrag=null,this.onDragStart=null,this.onDragEnd=null,this._prevPos=null,this._prevCell=null,this._isDown=!1,this._isTap=!1,this._interpolateOnReender=e}down(e){this.onDragStart&&this.onDragStart(e),this._isDown=!0,this._isTap=!0}move(e,t,n){this._isDown&&this._handle(e,t,n)}up(){this._isDown&&(this.onDragEnd&&this.onDragEnd(),this._prevPos=null,this._prevCell=null,this._isDown=!1)}leave(e,t,n){this._isDown&&this._handle(e,t,n)}click(e,t,n){if(this._isTap){const r=h(P(e,n),t,!1);null!=r&&this.onTap&&this.onTap({event:e,coord:r,grid:t})}}_handle(e,t,n){const r=P(e,n);if(null!=this._prevPos&&1<function(e,t){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}(this._prevPos,r)){for(const n of function(e,t,n){const r=Math.floor(t[0])-Math.floor(e[0]),o=Math.floor(t[1])-Math.floor(e[1]),i=Math.max(Math.abs(r),Math.abs(o)),l=[];for(let r=1;r<=i;r++){const o=r/i,s=(1-o)*e[0]+o*t[0],a=(1-o)*e[1]+o*t[1];0<=s&&s<n.width&&0<=a&&a<n.height&&l.push([Math.floor(s),Math.floor(a)])}return l}(this._prevPos,r,t))this.onDrag&&this.onDrag({event:e,coord:n,grid:t}),this._prevCell=f(n,t);this._prevPos=this._interpolateOnReender||F(r,t)?r:null,this._isTap=!1}else{const n=h(r,t,!(null==this._prevPos));null!=n?(this._prevCell!==f(n,t)&&(null!=this._prevCell&&(this._isTap=!1),this.onDrag&&this.onDrag({event:e,coord:n,grid:t}),this._prevCell=f(n,t)),this._prevPos=r):this._interpolateOnReender||F(r,t)||(this._prevCell=null,this._prevPos=null,this._isTap=!1)}}}const Tt=/^(?:Digit|Numpad)?(\d)$/,Mt={Delete:null,Backspace:null,NumpadDecimal:null};function Ht(e){if(e in Mt)return Mt[e];const t=Tt.exec(e);return t?Number(t[1]):void 0}const Ct=new $t(!1);function Ot(e,t,n,r){const{multipleDigits:o,blockedByGivens:i,blockedByFilled:l,digitMapping:s,nextMode:a}=r,c=["filled","corner","center","colors"];function u(t){let n=Ht(t);if(s&&null!=n&&n in s&&(n=s[n]),void 0===n)return!1;if(h(e,n))for(const e of c){const t=pt.get("marks",e);if(null==t)continue;if(!h(ut.ref("elements",`${t}`,"value"),n))break}return!0}function h(e,t){const n=function(e=!0,t=!0){return q(ut.get("elements")||{},e,t)}(i,l),r={};let s=!0;for(const i of C(gt.get()))null==n[i]&&(o&&null!=t?(r[`${i}/${t}`]=!0,s&&(s=!!e.ref(`${i}`,`${t}`).get())):(r[`${i}`]=t,s&&(s=t==e.ref(`${i}`).get())));if(s){if(null==t)return!0;for(const e of Object.keys(r))r[e]=null}return xt(e.update(r)),!1}const p=new Set(["Shift","Control","Alt","Meta"]);function g(e){if("Space"===e.code)return"keydown"===e.type&&bt.replace(pt.get("marks",a)),!0;if(!p.has(e.key))return!1;const t=bt.get();if(e.shiftKey)e.ctrlKey||e.metaKey?bt.replace(pt.get("marks","colors")):bt.replace(pt.get("marks","corner"));else if(e.ctrlKey||e.metaKey)bt.replace(pt.get("marks","center"));else{if(!e.altKey)return bt.replace(vt.get()),!0;bt.replace(pt.get("marks","colors"))}return null==vt.get()&&(vt.replace(t),!0)}const m={ArrowLeft:[-1,0],ArrowUp:[0,-1],ArrowRight:[1,0],ArrowDown:[0,1]};return{load(){},unload(){Ct.up()},blur(e){bt.replace(vt.get())},keydown(e){(u(e.code)||g(e)||function(e){if(!(e.code in m))return!1;const[n,r]=m[e.code];let[o,i]=d(mt.get()||0,t);o+=n+t.width,i+=r+t.height,o%=t.width,i%=t.height;const l=f([o,i],t);mt.replace(l),e.shiftKey?gt.ref(`${l}`).replace(!0):e.ctrlKey?gt.ref(`${l}`).replace(null):gt.replace({[l]:!0})}(e))&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){g(e)&&(e.stopImmediatePropagation(),e.preventDefault())},padClick(e){u(e.currentTarget.value)},down(e){Ct.down(e)},move(e){Ct.move(e,t,n)},up(e){Ct.up()},leave(e){Ct.leave(e,t,n)},click(e){Ct.click(e,t,n)}}}(()=>{let e;!function(e){e[e.RESETTING=0]="RESETTING",e[e.DYNAMIC=1]="DYNAMIC",e[e.SELECTING=2]="SELECTING",e[e.DESELCTING=3]="DESELCTING"}(e||(e={}));let t=e.RESETTING;function n(n,r){const{coord:o,grid:i}=n,l=f(o,i);if(mt.replace(l),e.RESETTING===t){const n=r&&gt.get()||{};return r&&1===Object.keys(n).length&&n[`${l}`]?gt.replace({}):gt.replace({[`${l}`]:!0}),void(t=e.SELECTING)}e.DYNAMIC===t&&(t=gt.ref(`${l}`).get()?e.DESELCTING:e.SELECTING),gt.ref(`${l}`).replace(e.SELECTING===t||null)}Ct.onDragStart=n=>{var r;t=(r=n).shiftKey?e.SELECTING:r.ctrlKey||r.metaKey?e.DYNAMIC:r.altKey?e.DESELCTING:e.RESETTING},Ct.onDrag=e=>{n(e,!1)},Ct.onTap=e=>{n(e,!0)}})();var St=St||{};St.Geometry=function(){},St.Geometry.intersectLineLine=function(e,t){var n=(e.intercept-t.intercept)/(t.slope-e.slope);return{x:n,y:e.slope*n+e.intercept}},St.Geometry.distanceFromOrigin=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},St.Geometry.distanceLineFromOrigin=function(e){return Math.abs(e.intercept)/Math.sqrt(Math.pow(e.slope,2)+1)},St.Geometry.perpendicularThroughPoint=function(e,t){var n=-1/e.slope;return{slope:n,intercept:t.y-n*t.x}},St.Geometry.angleFromOrigin=function(e){return Math.atan2(e.y,e.x)},St.Geometry.normalizeAngle=function(e){var t=2*Math.PI;return(e%t+t)%t},St.Geometry.lengthOfRayUntilIntersect=function(e,t){return t.intercept/(Math.sin(e)-t.slope*Math.cos(e))},St.Hsluv=function(){},St.Hsluv.getBounds=function(e){for(var t=[],n=Math.pow(e+16,3)/1560896,r=n>St.Hsluv.epsilon?n:e/St.Hsluv.kappa,o=0;o<3;)for(var i=o++,l=St.Hsluv.m[i][0],s=St.Hsluv.m[i][1],a=St.Hsluv.m[i][2],c=0;c<2;){var u=c++,d=(284517*l-94839*a)*r,f=(838422*a+769860*s+731718*l)*e*r-769860*u*e,h=(632260*a-126452*s)*r+126452*u;t.push({slope:d/h,intercept:f/h})}return t},St.Hsluv.maxSafeChromaForL=function(e){for(var t=St.Hsluv.getBounds(e),n=1/0,r=0;r<t.length;){var o=t[r];++r;var i=St.Geometry.distanceLineFromOrigin(o);n=Math.min(n,i)}return n},St.Hsluv.maxChromaForLH=function(e,t){for(var n=t/360*Math.PI*2,r=St.Hsluv.getBounds(e),o=1/0,i=0;i<r.length;){var l=r[i];++i;var s=St.Geometry.lengthOfRayUntilIntersect(n,l);s>=0&&(o=Math.min(o,s))}return o},St.Hsluv.dotProduct=function(e,t){for(var n=0,r=0,o=e.length;r<o;){var i=r++;n+=e[i]*t[i]}return n},St.Hsluv.fromLinear=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,.4166666666666667)-.055},St.Hsluv.toLinear=function(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92},St.Hsluv.xyzToRgb=function(e){return[St.Hsluv.fromLinear(St.Hsluv.dotProduct(St.Hsluv.m[0],e)),St.Hsluv.fromLinear(St.Hsluv.dotProduct(St.Hsluv.m[1],e)),St.Hsluv.fromLinear(St.Hsluv.dotProduct(St.Hsluv.m[2],e))]},St.Hsluv.rgbToXyz=function(e){var t=[St.Hsluv.toLinear(e[0]),St.Hsluv.toLinear(e[1]),St.Hsluv.toLinear(e[2])];return[St.Hsluv.dotProduct(St.Hsluv.minv[0],t),St.Hsluv.dotProduct(St.Hsluv.minv[1],t),St.Hsluv.dotProduct(St.Hsluv.minv[2],t)]},St.Hsluv.yToL=function(e){return e<=St.Hsluv.epsilon?e/St.Hsluv.refY*St.Hsluv.kappa:116*Math.pow(e/St.Hsluv.refY,.3333333333333333)-16},St.Hsluv.lToY=function(e){return e<=8?St.Hsluv.refY*e/St.Hsluv.kappa:St.Hsluv.refY*Math.pow((e+16)/116,3)},St.Hsluv.xyzToLuv=function(e){var t=e[0],n=e[1],r=t+15*n+3*e[2],o=4*t,i=9*n;0!=r?(o/=r,i/=r):(o=NaN,i=NaN);var l=St.Hsluv.yToL(n);return 0==l?[0,0,0]:[l,13*l*(o-St.Hsluv.refU),13*l*(i-St.Hsluv.refV)]},St.Hsluv.luvToXyz=function(e){var t=e[0],n=e[1],r=e[2];if(0==t)return[0,0,0];var o=n/(13*t)+St.Hsluv.refU,i=r/(13*t)+St.Hsluv.refV,l=St.Hsluv.lToY(t),s=0-9*l*o/((o-4)*i-o*i);return[s,l,(9*l-15*i*l-i*s)/(3*i)]},St.Hsluv.luvToLch=function(e){var t,n=e[0],r=e[1],o=e[2],i=Math.sqrt(r*r+o*o);i<1e-8?t=0:(t=180*Math.atan2(o,r)/Math.PI)<0&&(t=360+t);return[n,i,t]},St.Hsluv.lchToLuv=function(e){var t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,Math.cos(r)*n,Math.sin(r)*n]},St.Hsluv.hsluvToLch=function(e){var t=e[0],n=e[1],r=e[2];return r>99.9999999?[100,0,t]:r<1e-8?[0,0,t]:[r,St.Hsluv.maxChromaForLH(r,t)/100*n,t]},St.Hsluv.lchToHsluv=function(e){var t=e[0],n=e[1],r=e[2];return t>99.9999999?[r,0,100]:t<1e-8?[r,0,0]:[r,n/St.Hsluv.maxChromaForLH(t,r)*100,t]},St.Hsluv.hpluvToLch=function(e){var t=e[0],n=e[1],r=e[2];return r>99.9999999?[100,0,t]:r<1e-8?[0,0,t]:[r,St.Hsluv.maxSafeChromaForL(r)/100*n,t]},St.Hsluv.lchToHpluv=function(e){var t=e[0],n=e[1],r=e[2];return t>99.9999999?[r,0,100]:t<1e-8?[r,0,0]:[r,n/St.Hsluv.maxSafeChromaForL(t)*100,t]},St.Hsluv.rgbToHex=function(e){for(var t="#",n=0;n<3;){var r=e[n++],o=Math.round(255*r),i=o%16,l=(o-i)/16|0;t+=St.Hsluv.hexChars.charAt(l)+St.Hsluv.hexChars.charAt(i)}return t},St.Hsluv.hexToRgb=function(e){e=e.toLowerCase();for(var t=[],n=0;n<3;){var r=n++,o=16*St.Hsluv.hexChars.indexOf(e.charAt(2*r+1))+St.Hsluv.hexChars.indexOf(e.charAt(2*r+2));t.push(o/255)}return t},St.Hsluv.lchToRgb=function(e){return St.Hsluv.xyzToRgb(St.Hsluv.luvToXyz(St.Hsluv.lchToLuv(e)))},St.Hsluv.rgbToLch=function(e){return St.Hsluv.luvToLch(St.Hsluv.xyzToLuv(St.Hsluv.rgbToXyz(e)))},St.Hsluv.hsluvToRgb=function(e){return St.Hsluv.lchToRgb(St.Hsluv.hsluvToLch(e))},St.Hsluv.rgbToHsluv=function(e){return St.Hsluv.lchToHsluv(St.Hsluv.rgbToLch(e))},St.Hsluv.hpluvToRgb=function(e){return St.Hsluv.lchToRgb(St.Hsluv.hpluvToLch(e))},St.Hsluv.rgbToHpluv=function(e){return St.Hsluv.lchToHpluv(St.Hsluv.rgbToLch(e))},St.Hsluv.hsluvToHex=function(e){return St.Hsluv.rgbToHex(St.Hsluv.hsluvToRgb(e))},St.Hsluv.hpluvToHex=function(e){return St.Hsluv.rgbToHex(St.Hsluv.hpluvToRgb(e))},St.Hsluv.hexToHsluv=function(e){return St.Hsluv.rgbToHsluv(St.Hsluv.hexToRgb(e))},St.Hsluv.hexToHpluv=function(e){return St.Hsluv.rgbToHpluv(St.Hsluv.hexToRgb(e))},St.Hsluv.m=[[3.240969941904521,-1.537383177570093,-.498610760293],[-.96924363628087,1.87596750150772,.041555057407175],[.055630079696993,-.20397695888897,1.056971514242878]],St.Hsluv.minv=[[.41239079926595,.35758433938387,.18048078840183],[.21263900587151,.71516867876775,.072192315360733],[.019330818715591,.11919477979462,.95053215224966]],St.Hsluv.refY=1,St.Hsluv.refU=.19783000664283,St.Hsluv.refV=.46831999493879,St.Hsluv.kappa=903.2962962,St.Hsluv.epsilon=.0088564516,St.Hsluv.hexChars="0123456789abcdef";var Et={hsluvToRgb:St.Hsluv.hsluvToRgb,rgbToHsluv:St.Hsluv.rgbToHsluv,hpluvToRgb:St.Hsluv.hpluvToRgb,rgbToHpluv:St.Hsluv.rgbToHpluv,hsluvToHex:St.Hsluv.hsluvToHex,hexToHsluv:St.Hsluv.hexToHsluv,hpluvToHex:St.Hsluv.hpluvToHex,hexToHpluv:St.Hsluv.hexToHpluv,lchToHpluv:St.Hsluv.lchToHpluv,hpluvToLch:St.Hsluv.hpluvToLch,lchToHsluv:St.Hsluv.lchToHsluv,hsluvToLch:St.Hsluv.hsluvToLch,lchToLuv:St.Hsluv.lchToLuv,luvToLch:St.Hsluv.luvToLch,xyzToLuv:St.Hsluv.xyzToLuv,luvToXyz:St.Hsluv.luvToXyz,xyzToRgb:St.Hsluv.xyzToRgb,rgbToXyz:St.Hsluv.rgbToXyz,lchToRgb:St.Hsluv.lchToRgb,rgbToLch:St.Hsluv.rgbToLch};function At(e,t,n,r){const{deletePrioritizeHead:o,deletePrioritizeTail:i,allowSelfIntersection:l}=r,s=new $t(!0);let a=null;const c=[];return s.onDragStart=t=>{c.length=0,a=e.ref(wt())},s.onDrag=e=>{if(null==a)throw"UNREACHABLE";const{coord:t,grid:n}=e,r=f(t,n),o=c.indexOf(r,l?c.length-2:0);0<=o?c.length=o+1:c.push(r),a.replace(1<c.length?c:null)},s.onDragEnd=()=>{if(null==a)throw new Error("Line handler, onDragEnd NULL lineRef.");if(1>=c.length)a.replace(null);else{const e=a.path().join("/"),t={redo:{},undo:{[e]:null}};for(let n=0;n<c.length;n++)t.redo[`${e}/${n}`]=c[n];xt(t)}a=null},s.onTap=t=>{const{coord:n,grid:r}=t,l=f(n,r);let s=null;for(const[t,n]of Object.entries(e.get()||{})){const e=u(n);if(o&&l===e[0]){s=t;break}if(i&&l===e[e.length-1]){s=t;break}e.includes(l)&&(s=t)}null!=s&&xt(e.ref(`${s}`).replace(null))},{load(){gt.replace(null),mt.replace(null)},unload(){s.up()},blur(e){},keydown(e){},keyup(e){},padClick(e){},down(e){s.down(e)},move(e){s.move(e,t,n)},up(e){s.up()},leave(e){s.leave(e,t,n)},click(e){s.click(e,t,n)}}}function It(e,t,n,r){for(const o of Object.values(e||{})){const e=u(o);{let o=Number.NEGATIVE_INFINITY;for(const i of e){const e=t[i];null!=e&&(o<e?o=e:n[i]=o!=e||r)}}{e.reverse();let o=Number.POSITIVE_INFINITY;for(const i of e){const e=t[i];null!=e&&(o>e?o=e:o==e?r&&(n[i]=!0):n[i]=!0)}}}}function Lt(e,t,n){const r=new $t(!0);let o;function i(t){return void 0===o&&(o=!e.ref(`${t}`).get()||null),o}const l={redo:{},undo:{}};return r.onDragStart=e=>{o=void 0},r.onDrag=t=>{const{coord:n,grid:r}=t,o=f(n,r),s=e.ref(`${o}`).replace(i(o));null!=s&&(Object.assign(l.redo,s.redo),Object.assign(l.undo,s.undo))},r.onDragEnd=()=>{xt(l),l.redo={},l.undo={}},r.onTap=t=>{const{coord:n,grid:r}=t,o=f(n,r);xt(e.ref(`${o}`).replace(i(o)))},{load(){gt.replace(null),mt.replace(null)},unload(){r.up()},blur(e){},keydown(e){},keyup(e){},padClick(e){},down(e){r.down(e)},move(e){r.move(e,t,n)},up(e){r.up()},leave(e){r.leave(e,t,n)},click(e){r.click(e,t,n)}}}function jt(e,t,n,r){const o=r.keymap||{},{max:i,svgCoord2idx:l}=r;let s=null;function a(e){if(null==s)return!1;let t;if(t=e in o?o[e]:Ht(e),void 0===t)return!1;const n=s.get();if(null!=t&&"number"==typeof n){const e=10*n+t;e<i&&(t=e)}return xt(s.replace(null!=t?t:!0!==n||null)),!0}return{load(){gt.replace(null),mt.replace(null)},unload(){},blur(e){},keydown(e){a(e.code)&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){},padClick(e){a(e.currentTarget.value)&&(e.stopImmediatePropagation(),e.preventDefault())},down(e){},move(e){},up(e){},leave(e){},click(r){const o=l(P(r,n),t);if(null==o)return;const i=e.ref(`${o}`);!0!==i.get()?(s=i,a("Delete")):i.replace(null)}}}const Dt={givens:{getInputHandler:(e,t,n)=>Ot(e,t,n,{multipleDigits:!1,blockedByGivens:!1,blockedByFilled:!1,nextMode:"corner"}),order:220,permanent:!0,inGlobalMenu:!1,menu:{type:"select",name:"Given",icon:"given"}},filled:{getInputHandler:(e,t,n)=>Ot(e,t,n,{multipleDigits:!1,blockedByGivens:!0,blockedByFilled:!1,nextMode:"corner"}),order:210},center:{getInputHandler:(e,t,n)=>Ot(e,t,n,{multipleDigits:!0,blockedByGivens:!0,blockedByFilled:!0,nextMode:"colors"}),order:200},corner:{getInputHandler:(e,t,n)=>Ot(e,t,n,{multipleDigits:!0,blockedByGivens:!0,blockedByFilled:!0,nextMode:"center"}),order:200},colors:{getInputHandler:(e,t,n)=>Ot(e,t,n,{multipleDigits:!0,blockedByGivens:!1,blockedByFilled:!1,nextMode:"filled",digitMapping:["#111111","#666666","#b2b2b2",Et.hsluvToHex([10,100,60]),Et.hsluvToHex([40,100,65]),Et.hsluvToHex([70,100,92]),Et.hsluvToHex([120,100,80]),Et.hsluvToHex([230,100,85]),Et.hsluvToHex([260,100,55]),Et.hsluvToHex([300,100,70])]}),order:10},grid:{order:101,permanent:!0,getWarnings(e,t,n,r){for(let e=0;e<t.height;e++)I(n,S(e,t),r);for(let e=0;e<t.width;e++)I(n,E(e,t),r)}},box:{order:100,permanent:!0,getWarnings(e,t,n,r){if(null==e)return;const o=t.width/e.width*(t.height/e.height);if(!Number.isInteger(o))throw Error("Invalid box sizing");for(let i=0;i<o;i++)I(n,A(i,e,t),r)}},thermo:{getInputHandler:(e,t,n)=>At(e,t,n,{deletePrioritizeHead:!0,deletePrioritizeTail:!1,allowSelfIntersection:!1}),order:30,inGlobalMenu:!1,menu:{type:"select",name:"Thermo",icon:"thermo"},getWarnings(e,t,n,r){It(e,n,r,!0)}},slowThermo:{getInputHandler:(e,t,n)=>At(e,t,n,{deletePrioritizeHead:!0,deletePrioritizeTail:!1,allowSelfIntersection:!1}),order:30,inGlobalMenu:!1,menu:{type:"select",name:"Slow Thermo",icon:"slow-thermo"},getWarnings(e,t,n,r){It(e,n,r,!1)}},between:{getInputHandler:(e,t,n)=>At(e,t,n,{deletePrioritizeHead:!0,deletePrioritizeTail:!0,allowSelfIntersection:!0}),order:50,inGlobalMenu:!1,menu:{type:"select",name:"Between",icon:"between"},getWarnings(e,t,n,r){for(const t of Object.values(e||{})){const e=u(t);if(3>e.length)continue;const o=e.shift(),i=e.pop(),l=n[o],s=n[i];if(null==l||null==s)continue;const a=Math.min(l,s),c=Math.max(l,s);for(const t of e){const e=n[t];null!=e&&(e<=a||c<=e)&&(r[t]=!0,r[o]=!0,r[i]=!0)}}}},palindrome:{getInputHandler:(e,t,n)=>At(e,t,n,{deletePrioritizeHead:!1,deletePrioritizeTail:!1,allowSelfIntersection:!0}),order:60,inGlobalMenu:!1,menu:{type:"select",name:"Palindrome",icon:"palindrome"},getWarnings(e,t,n,r){for(const t of Object.values(e||{})){const e=u(t),o=e.slice(0,e.length>>1),i=e.slice(-o.length);i.reverse(),j(n,o,i,r)}}},whisper:{getInputHandler:(e,t,n)=>At(e,t,n,{deletePrioritizeHead:!1,deletePrioritizeTail:!1,allowSelfIntersection:!0}),order:70,inGlobalMenu:!1,menu:{type:"select",name:"Whisper",icon:"whisper"},getWarnings(e,t,n,r){const o=t.width+1>>1;for(const t of Object.values(e||{})){const e=u(t);for(let t=1;t<e.length;t++){const i=e[t-1],l=e[t],s=n[i],a=n[l];null!=s&&null!=a&&(Math.abs(s-a)<o&&(r[i]=!0,r[l]=!0))}}}},renban:{getInputHandler:(e,t,n)=>At(e,t,n,{deletePrioritizeHead:!1,deletePrioritizeTail:!1,allowSelfIntersection:!1}),order:80,inGlobalMenu:!1,menu:{type:"select",name:"Renban",icon:"renban"},getWarnings(e,t,n,r){e:for(const t of Object.values(e||{})){const e=u(t),o=[];for(const t of e){const e=n[t];if(null==e)continue e;o.push(e)}o.sort(((e,t)=>e-t));for(let t=1;t<o.length;t++)if(o[t-1]+1!==o[t]){e.forEach((e=>r[e]=!0));continue e}}}},arrow:{getInputHandler:function(e,t,n){const r=new $t(!0);let o;!function(e){e.DYNAMIC="",e.BULB="bulb",e.BODY="body"}(o||(o={}));let i=o.DYNAMIC,l=null,s=[],a=[];function c(t){const{coord:n,grid:r}=t,c=f(n,r);if(o.DYNAMIC===i&&function(t){const n=e.get()||{};for(const[r,{bulb:c,body:d}]of Object.entries(n)){const n=u(c||{});if(n.includes(t)){const c=0>=u(d||{}).length;return l=c?e.ref(r):e.ref(wt()),i=o.BODY,s=n,a=[t],void l.ref(o.BULB).replace(n)}}l=e.ref(wt()),i=o.BULB,s=[t],a=[]}(c),null==l)throw"UNREACHABLE";const h=o.BULB===i?s:a,p=h.lastIndexOf(c);0<=p?o.BODY===i&&0===p&&2<h.length?h.push(c):h.length=p+1:h.push(c),o.BULB===i&&function(e,t){let n=-1,r=Number.POSITIVE_INFINITY;e.sort(((e,t)=>e-t));const o=[];for(const i of e){const[e,l]=d(i,t);if(l===r)for(let r=n+1;r<e;r++)o.push(f([r,l],t));n=e,r=l}e.push(...o),e.sort(((e,t)=>e-t))}(h,r);const g=o.BULB===i?1:2;l.ref(i).replace(g<=h.length?h:null)}return r.onDragStart=e=>{i=o.DYNAMIC},r.onDrag=e=>{c(e)},r.onDragEnd=()=>{if(o.DYNAMIC!==i){if(null==l)throw"UNREACHABLE";if(0>=s.length||1===a.length)l.replace(null);else{const e=l.path().join("/"),t={redo:{},undo:{[e]:null}};s.forEach(((n,r)=>t.redo[`${e}/bulb/${r}`]=n)),a.forEach(((n,r)=>t.redo[`${e}/body/${r}`]=n)),xt(t)}l=null}},r.onTap=t=>{if(o.DYNAMIC!==i)return;const{coord:n,grid:r}=t,l=f(n,r);let s=null;for(const[t,{bulb:n,body:r}]of Object.entries(e.get()||{})){if(u(r||{}).includes(l)){s=t;break}u(n||{}).includes(l)&&(s=t)}null!=s?xt(e.ref(`${s}`).replace(null)):c(t)},{load(){gt.replace(null),mt.replace(null)},unload(){r.up()},blur(e){},keydown(e){},keyup(e){},padClick(e){},down(e){r.down(e)},move(e){r.move(e,t,n)},up(e){r.up()},leave(e){r.leave(e,t,n)},click(e){r.click(e,t,n)}}},order:90,inGlobalMenu:!1,menu:{type:"select",name:"Arrow",icon:"arrow"},getWarnings(e,t,n,r){e:for(const{bulb:t,body:o}of Object.values(e||{})){const e=u(t);e.reverse();let i=0,l=1;for(const t of e){const e=n[t];if(null==e)continue e;i+=l*e,l*=10}const[s,...a]=u(o);let c=0,d=!0;for(const e of a){const t=n[e];null==t?d=!1:c+=t}(i<c||d&&i!==c)&&(e.forEach((e=>r[e]=!0)),a.forEach((e=>r[e]=!0)))}}},min:{getInputHandler:Lt,order:20,inGlobalMenu:!1,menu:{type:"select",name:"Min",icon:"min"},getWarnings(e,t,n,r){const o=C(e||{});for(const[e,i]of G(o,t)){const t=n[e],o=n[i];null!=t&&null!=o&&(o<t&&(r[e]=!0,r[i]=!0))}}},max:{getInputHandler:Lt,order:21,inGlobalMenu:!1,menu:{type:"select",name:"Max",icon:"max"},getWarnings(e,t,n,r){const o=C(e||{});for(const[e,i]of G(o,t)){const t=n[e],o=n[i];null!=t&&null!=o&&(t<o&&(r[e]=!0,r[i]=!0))}}},odd:{getInputHandler:Lt,order:41,inGlobalMenu:!1,menu:{type:"select",name:"Odd",icon:"odd-even"},getWarnings(e,t,n,r){D(n,C(e||{}),r,(e=>1==e%2))}},even:{getInputHandler:Lt,order:40,inGlobalMenu:!1,menu:{type:"select",name:"Even",icon:"odd-even"},getWarnings(e,t,n,r){D(n,C(e||{}),r,(e=>0==e%2))}},quadruple:{getInputHandler:function(e,t,n){const r=[];let o=null;function i(e){if(null==o)return!1;const t=Ht(e);if(void 0===t)return!1;if(null==t){if(!0===o.get()){return xt(o.replace(null)),!0}r.length=0}else{if(4<=r.length)return!1;r.push(t),r.sort()}return xt(o.replace(!(0<r.length)||r)),!0}return{load(){gt.replace(null),mt.replace(null)},unload(){},blur(e){},keydown(e){i(e.code)&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){},padClick(e){i(e.currentTarget.value)&&(e.stopImmediatePropagation(),e.preventDefault())},down(e){},move(e){},up(e){},leave(e){},click(r){const l=m(P(r,n),t);if(null==l)return;const s=p(l,t),a=e.ref(`${s}`);!0!==a.get()?(o=a,i("Delete")):a.replace(null)}}},order:110,inGlobalMenu:!1,menu:{type:"select",name:"Quadruple",icon:"quadruple"},getWarnings(e,t,n,r){for(const[o,i]of Object.entries(e||{})){const e=u(i||{}),l=v(g(+o,t),t).map((e=>f(e,t))),s=l.map((e=>n[e]));if(!s.some((e=>null==e))){for(const t of s){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}0<e.length&&l.map((e=>r[e]=!0))}}}},killer:{getInputHandler:function(e,t,n){const r=new $t(!0);let o,i=null;function l(e){if(null==i)return!1;let t=Ht(e);if(void 0===t)return!1;const n=i.ref("sum").get();if(null!=t&&"number"==typeof n){const e=10*n+t;e<100&&(t=e)}if(null===t&&null==n){xt(i.replace(null))}else{xt(i.ref("sum").replace(t))}return!0}function s(t){for(const[n,{sum:r,cells:o}]of Object.entries(e.get()||{}))if(o[t])return n;return null}const a={redo:{},undo:{}};return r.onDragStart=e=>{o=void 0},r.onDrag=t=>{const{coord:n,grid:r}=t,l=f(n,r);if(void 0===o&&function(t){if(void 0===o){const n=s(t);i=e.ref(n||wt()),o=!0}}(l),null==i)throw"UNREACHABLE";const c=i.ref("cells",`${l}`).replace(o);null!=c&&(Object.assign(a.redo,c.redo),Object.assign(a.undo,c.undo))},r.onDragEnd=()=>{xt(a),a.redo={},a.undo={}},r.onTap=t=>{if(void 0!==o)return;const{coord:n,grid:r}=t,i=s(f(n,r));if(null!=i){xt(e.ref(i).replace(null))}},{load(){gt.replace(null),mt.replace(null)},unload(){r.up()},blur(e){},keydown(e){l(e.code)&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){},padClick(e){l(e.currentTarget.value)&&(e.stopImmediatePropagation(),e.preventDefault())},down(e){r.down(e)},move(e){r.move(e,t,n)},up(e){r.up()},leave(e){r.leave(e,t,n)},click(e){r.click(e,t,n)}}},order:120,inGlobalMenu:!1,menu:{type:"select",name:"Killer Cage",icon:"killer"},getWarnings(e,t,n,r){for(const{sum:t,cells:o}of Object.values(e||{})){const e=C(o);I(n,e,r),"number"==typeof t&&L(n,e,r,t)}}},clone:{getInputHandler:function(e,t,n){const r=new $t(!0);let o,i=null,l=null,s={label:null,color:null,a:[],b:[]};!function(e){e[e.DYNAMIC=0]="DYNAMIC",e[e.SELECTING=1]="SELECTING",e[e.MOVING=2]="MOVING"}(o||(o={}));let a=o.DYNAMIC;function c(e){if(null==i)return!1;let t=Ht(e);if(void 0===t)return!1;const n=i.ref("sum").get();if(null!=t&&"number"==typeof n){const e=10*n+t;e<100&&(t=e)}return!0}function h(t){for(const[n,{a:r,b:o}]of Object.entries(e.get()||{})){if(u(r||{}).includes(t))return[n,"a"];if(u(o||{}).includes(t))return[n,"b"]}return null}function p(n){const r=h(n);if(null!=r){const[c,f]=r,h="a"===f?"b":"a";if(i=e.ref(c),a=o.MOVING,s=Object.assign({},i.get()),null!=s[h]){const e=u(s[f]).indexOf(n);l=d(s[h][e],t),s.a=u(s[h]),s.b=[]}else l=d(n,t),s.a=u(s[f]),s.b=[]}else i=e.ref(wt()),a=o.SELECTING,s=function(){const t=new Set;for(const{label:n}of Object.values(e.get()||{}))null!=n&&t.add(n);for(let e=0;;e++){const n=kt(e);if(!t.has(n))return{label:n,color:Et.hsluvToHex([127*e%360,50,50]),a:[],b:[]}}}()}const g={redo:{},undo:{}};return r.onDragStart=e=>{a=o.DYNAMIC,l=null,i=null},r.onDrag=e=>{const{coord:t,grid:n}=e,r=f(t,n);if(o.DYNAMIC===a&&p(r),null==i)throw"UNREACHABLE";if(o.SELECTING===a){if(0<=s.a.indexOf(r))return;s.a.push(r)}else{if(o.MOVING!==a)throw"UNREACHABLE";{if(null==l)throw"UNREACHABLE";const e=d(r,n);e[0]-=l[0],e[1]-=l[1];const t=[];for(let r=0;r<s.a.length;r++){const o=d(s.a[r],n);if(o[0]+=e[0],o[1]+=e[1],o[0]<0||n.width<=o[0]||o[1]<0||n.height<=o[1])return;const i=f(o,n);t.push(i)}s.b=t}}xt(i.replace(s))},r.onDragEnd=()=>{xt(g),g.redo={},g.undo={}},r.onTap=t=>{if(o.DYNAMIC!==a)return;const{coord:n,grid:r}=t,i=h(f(n,r));if(null!=i){const[t,n]=i;xt(e.ref(t).replace(null))}},{load(){gt.replace(null),mt.replace(null)},unload(){r.up()},blur(e){},keydown(e){c(e.code)&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){},padClick(e){c(e.currentTarget.value)&&(e.stopImmediatePropagation(),e.preventDefault())},down(e){r.down(e)},move(e){r.move(e,t,n)},up(e){r.up()},leave(e){r.leave(e,t,n)},click(e){r.click(e,t,n)}}},order:10,inGlobalMenu:!1,menu:{type:"select",name:"Clone",icon:"clone"},getWarnings(e,t,n,r){for(const{a:t,b:o}of Object.values(e||{})){if(null==t||null==o)continue;j(n,u(t),u(o),r)}}},difference:{getInputHandler:(e,t,n)=>jt(e,t,n,{svgCoord2idx:b,max:10}),order:140,inGlobalMenu:!1,menu:{type:"select",name:"Difference",icon:"kropki"},getWarnings(e,t,n,r){for(const[o,i]of Object.entries(e||{})){if(null==i)continue;const e=!0===i?1:i,[l,s]=w(+o,t),a=n[l],c=n[s];null!=a&&null!=c&&(Math.abs(a-c)!==e&&(r[l]=!0,r[s]=!0))}}},ratio:{getInputHandler:(e,t,n)=>jt(e,t,n,{svgCoord2idx:b,max:10}),order:141,inGlobalMenu:!1,menu:{type:"select",name:"Ratio",icon:"kropki"},getWarnings(e,t,n,r){for(const[o,i]of Object.entries(e||{})){if(null==i)continue;const e=!0===i?2:i,[l,s]=w(+o,t),a=n[l],c=n[s];null!=a&&null!=c&&(a*e!==c&&c*e!==a&&(r[l]=!0,r[s]=!0))}}},xv:{getInputHandler:(e,t,n)=>jt(e,t,n,{svgCoord2idx:b,keymap:{KeyX:10,KeyV:5},max:100}),order:142,inGlobalMenu:!1,menu:{type:"select",name:"XV Sum",icon:"xv"},getWarnings(e,t,n,r){for(const[o,i]of Object.entries(e||{})){if("number"!=typeof i)continue;const[e,l]=w(+o,t),s=n[e],a=n[l];null!=s&&null!=a&&(s+a!==i&&(r[e]=!0,r[l]=!0))}}},littleKiller:{getInputHandler:(e,t,n)=>jt(e,t,n,{svgCoord2idx:_,max:100}),order:160,inGlobalMenu:!1,menu:{type:"select",name:"Little Killer",icon:"little-killer"},getWarnings(e,t,n,r){for(const[o,i]of Object.entries(e||{})){if("number"!=typeof i)continue;L(n,H(+o,t).map((e=>f(e,t))),r,i)}}},sandwich:{getInputHandler:(e,t,n)=>jt(e,t,n,{svgCoord2idx:k,max:100}),order:150,inGlobalMenu:!1,menu:{type:"select",name:"Sandwich",icon:"sandwich"},getWarnings(e,t,n,r){for(const[o,i]of Object.entries(e||{})){if("number"!=typeof i)continue;const e=x(+o,t).map((e=>f(e,t))),l=e.map((e=>n[e])),s=l.indexOf(1),a=l.indexOf(t.width);if(s<0||a<0)continue;const c=Math.min(s,a),u=Math.max(s,a);L(n,e.slice(c+1,u),r,i)&&(r[e[s]]=!0,r[e[a]]=!0)}}},skyscraper:{getInputHandler:(e,t,n)=>jt(e,t,n,{svgCoord2idx:k,max:Math.max(t.width,t.height)}),order:151,inGlobalMenu:!1,menu:{type:"select",name:"Skyscraper",icon:"skyscraper"},getWarnings(e,t,n,r){for(const[o,i]of Object.entries(e||{})){if("number"!=typeof i)continue;const e=x(+o,t).map((e=>f(e,t)));let l=0,s=Number.NEGATIVE_INFINITY,a=0;for(;a<e.length;a++){const t=n[e[a]];if(null==t)break;if(s<t&&(s=t,l++,i<l))break}const c=a===e.length;(i<l||c&&i!==l)&&e.map((e=>r[e]=!0))}}},xsums:{getInputHandler:(e,t,n)=>jt(e,t,n,{svgCoord2idx:k,max:100}),order:152,inGlobalMenu:!1,menu:{type:"select",name:"X-Sums",icon:"xv"},getWarnings(e,t,n,r){for(const[o,i]of Object.entries(e||{})){if("number"!=typeof i)continue;const e=x(+o,t).map((e=>f(e,t))),l=n[e[0]];null!=l&&L(n,e.slice(0,l),r,i)}}},diagonal:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Diagonals",checkbox:[{name:"Positive Diagonal",icon:"positive-diagonal",refPath:"positive"},{name:"Negative Diagonal",icon:"negative-diagonal",refPath:"negative"}]},getWarnings(e,t,n,r){if(e){if(e.positive){I(n,O(!0,t).map((e=>f(e,t))),r)}if(e.negative){I(n,O(!1,t).map((e=>f(e,t))),r)}}}},knight:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Antiknight",checkbox:{name:"Antiknight",icon:"knight"}},getWarnings(e,t,n,r){if(e)for(const e of function*({width:e,height:t}){for(const[n,r,o,i]of K(t,e,t,e)){if(n>=o)continue;const e=Math.abs(n-o),t=Math.abs(r-i);3===e+t&&1===Math.abs(e-t)&&(yield[[r,n],[i,o]])}}(t)){I(n,e.map((e=>f(e,t))),r)}}},king:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Antiking",checkbox:{name:"Antiking",icon:"king"}},getWarnings(e,t,n,r){if(e)for(const e of function*({width:e,height:t}){for(const[n,r,o,i]of K(t,e,t,e))n>=o||1===Math.abs(n-o)&&1===Math.abs(r-i)&&(yield[[r,n],[i,o]])}(t)){I(n,e.map((e=>f(e,t))),r)}}},disjointGroups:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Disjoint Groups",checkbox:{name:"Disjoint Groups",icon:"disjoint"}}},consecutive:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Nonconsecutive",checkbox:[{name:"Nonconsecutive Orthogonal Neighbors",icon:"consec-orth",refPath:"orth"},{name:"Nonconsecutive Diagonal Neighbors",icon:"consec-diag",refPath:"diag"}]}},selfTaxicab:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Self-Taxicab",checkbox:{name:"Self-Taxicab",icon:"cityblock"}}}};function Nt(e,t){if(!(e in Dt))throw Error(`Cannot add unknown element type: ${e}.`);const n=Dt[e];if(null==n)throw Error(`Cannot add unimplmeneted element type: ${e}.`);return{type:e,order:n.order,value:t}}function Rt(e=3,t=3){const n=e*t,r={grid:{width:n,height:n},meta:{title:null,author:null,description:null},elements:{}};return r.elements[1]=Nt("grid"),r.elements[2]=Nt("box",{width:e,height:t}),r.elements[10]=Nt("givens",{}),r.elements[11]=Nt("filled",{}),r.elements[12]=Nt("corner",{}),r.elements[13]=Nt("center",{}),r.elements[14]=Nt("colors",{}),r}const Pt={3:[3,1],4:[2,2],5:[5,1],6:[3,2],7:[7,1],8:[4,2],9:[3,3],10:[5,2],11:[11,1],12:[4,3],13:[13,1],14:[7,2],15:[5,3],16:[4,4]},Ut=/R(\d+)C(\d+)/i;function Gt(e){const t=Ut.exec(e);if(null==t)throw Error(`Failed to parse RC string: ${e}.`);const n=Number(t[1]);return[Number(t[2])-1,n-1]}const zt=Symbol("Comlink.proxy"),Ft=Symbol("Comlink.endpoint"),Bt=Symbol("Comlink.releaseProxy"),Wt=Symbol("Comlink.thrown"),Vt=e=>"object"==typeof e&&null!==e||"function"==typeof e,qt=new Map([["proxy",{canHandle:e=>Vt(e)&&e[zt],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Yt(e,t),[n,[n]]},deserialize:e=>(e.start(),Kt(e))}],["throw",{canHandle:e=>Vt(e)&&Wt in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function Yt(e,t=self){t.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:o,type:i,path:l}=Object.assign({path:[]},r.data),s=(r.data.argumentList||[]).map(rn);let a;try{const t=l.slice(0,-1).reduce(((e,t)=>e[t]),e),n=l.reduce(((e,t)=>e[t]),e);switch(i){case"GET":a=n;break;case"SET":t[l.slice(-1)[0]]=rn(r.data.value),a=!0;break;case"APPLY":a=n.apply(t,s);break;case"CONSTRUCT":a=tn(new n(...s));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;Yt(e,n),a=function(e,t){return en.set(e,t),e}(t,[t])}break;case"RELEASE":a=void 0;break;default:return}}catch(e){a={value:e,[Wt]:0}}Promise.resolve(a).catch((e=>({value:e,[Wt]:0}))).then((e=>{const[r,l]=nn(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),l),"RELEASE"===i&&(t.removeEventListener("message",n),Xt(t))}))})),t.start&&t.start()}function Xt(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function Kt(e,t){return Jt(e,[],t)}function Zt(e){if(e)throw new Error("Proxy has been released and is not useable")}function Jt(e,t=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(n,i){if(Zt(r),i===Bt)return()=>on(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{Xt(e),r=!0}));if("then"===i){if(0===t.length)return{then:()=>o};const n=on(e,{type:"GET",path:t.map((e=>e.toString()))}).then(rn);return n.then.bind(n)}return Jt(e,[...t,i])},set(n,o,i){Zt(r);const[l,s]=nn(i);return on(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:l},s).then(rn)},apply(n,o,i){Zt(r);const l=t[t.length-1];if(l===Ft)return on(e,{type:"ENDPOINT"}).then(rn);if("bind"===l)return Jt(e,t.slice(0,-1));const[s,a]=Qt(i);return on(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:s},a).then(rn)},construct(n,o){Zt(r);const[i,l]=Qt(o);return on(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:i},l).then(rn)}});return o}function Qt(e){const t=e.map(nn);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const en=new WeakMap;function tn(e){return Object.assign(e,{[zt]:!0})}function nn(e){for(const[t,n]of qt)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},o]}return[{type:"RAW",value:e},en.get(e)||[]]}function rn(e){switch(e.type){case"HANDLER":return qt.get(e.name).deserialize(e.value);case"RAW":return e.value}}function on(e,t,n){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)}))}const ln=(()=>{let e=null;return function(){return null==e&&(e=Kt(new Worker("build/satSolverWorker.js"))),e}})(),sn={cantAttempt:e=>ln().cantAttempt(e),solve(e,t,n){const r=ln().solveAsync(e,t,tn(n));return()=>r.then(ln().cancel)}};function an(e){for(const[t,{type:n}]of Object.entries(e.elements))ht.includes(n)&&(pt.ref("marks",n).replace(t),"filled"===n&&(pt.ref("tool").replace(t),pt.ref("prevTool").replace(t)))}window.solve=async function(e=10,t=1e4){const n=Date.now(),r=ut.get(),o=await sn.cantAttempt(r);if(o)throw Error("Solver cannot attempt this puzzle: "+o);console.log(`SOLVING: maxSolutions=${e} maxTimeMillis=${t}`);let l=0,s=-1;const a=sn.solve(r,e,(t=>{null==t?(clearTimeout(s),console.log(`DONE. Found ${l<e?"ALL ":""}${l} solutions in ${Date.now()-n} ms.`)):(l++,console.log(`FOUND ${l} in ${Date.now()-n} ms:\n${i(t,r.grid)}`))}));async function c(e){clearTimeout(s),await a()&&console.log(`${e}. Found ${l} solutions in ${Date.now()-n} ms.`)}return isFinite(t)&&(s=window.setTimeout(c,t,"TIMED OUT")),()=>c("CANCELLED")};const cn="https://github.com/SudokuStudio/SudokuStudio/issues/new",un=cn+"?labels=%F0%9F%90%9E%20bug&template=bug_report.yml&title=%F0%9F%90%9E+Bug%3A+";function dn(e,t,n){const r=e.slice();return r[5]=t[n].cloneAbId,r[6]=t[n].label,r[7]=t[n].labelPos,r[8]=t[n].d,r[9]=t[n].color,r}function fn(e,t){let n,r,o,i,l,s,a,c,u,d=t[6]+"";return{key:e,first:null,c(){n=ve("path"),l=ve("text"),s=be(d),$e(n,"d",r=t[8]),$e(n,"fill","none"),$e(n,"stroke",o=t[9]),$e(n,"stroke-width",mn),$e(n,"mask",i="url(#clone-"+t[0]+"-mask)"),$e(l,"x",a=t[7].x),$e(l,"y",c=t[7].y),$e(l,"text-anchor","end"),$e(l,"dominant-baseline","auto"),$e(l,"fill",u=t[9]),$e(l,"font-size",gn),$e(l,"font-weight","800"),this.first=n},m(e,t){he(e,n,t),he(e,l,t),fe(l,s)},p(e,f){t=e,4&f&&r!==(r=t[8])&&$e(n,"d",r),4&f&&o!==(o=t[9])&&$e(n,"stroke",o),1&f&&i!==(i="url(#clone-"+t[0]+"-mask)")&&$e(n,"mask",i),4&f&&d!==(d=t[6]+"")&&Te(s,d),4&f&&a!==(a=t[7].x)&&$e(l,"x",a),4&f&&c!==(c=t[7].y)&&$e(l,"y",c),4&f&&u!==(u=t[9])&&$e(l,"fill",u)},d(e){e&&pe(n),e&&pe(l)}}}function hn(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let l=dn(e,o,t),s=i(l);r.set(s,n[t]=fn(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0])},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){13&l&&(o=e[3](e[2]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,fn,null,dn)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}const pn=.05,gn=.2,mn=.03;function vn(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(2,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(4,a=e.grid)},[l,s,r,function(e){const t=[];for(const[n,{label:r,color:o,a:i,b:l}]of Object.entries(e))for(let e=0;e<2;e++){const s=[i,l][e];if(null==s)continue;const c=u(s);if(c.sort(((e,t)=>e-t)),0>=c.length)continue;const f=c[c.length-1],h=z(c,a,pn);if(null==h)continue;const p=d(f,a),g={x:p[0]+1-pn-mn,y:p[1]+1-pn-mn},m=`${n}_${e}`;t.push({cloneAbId:m,labelPos:g,d:h,label:r||"",color:o||"#222"})}return t},a]}function bn(e,t,n){let{id:r}=t,{ref:o}=t,{grid:i}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"ref"in e&&n(1,o=e.ref),"grid"in e&&n(2,i=e.grid)},[r,o,i]}class yn extends rt{constructor(e){super(),nt(this,e,bn,null,ne,{id:0,ref:1,grid:2})}}function wn(e,t,n){const r=e.slice();return r[7]=t[n].idx,r[8]=t[n].x,r[9]=t[n].y,r[10]=t[n].text,r[11]=t[n].d,r}function kn(e,t){let n,r,o,i,l,s,a,c,u=t[10]+"";return{key:e,first:null,c(){n=ve("path"),i=ve("text"),l=be(u),$e(n,"d",r=t[11]),$e(n,"stroke",_n),$e(n,"stroke-width",Mn),$e(n,"marker-end",o="url(#lk-arrow-"+t[0]+")"),$e(i,"x",s=t[8]),$e(i,"y",a=t[9]),$e(i,"text-anchor","middle"),$e(i,"dominant-baseline","central"),$e(i,"fill",_n),$e(i,"font-size",$n),$e(i,"font-weight",Tn),$e(i,"textLength",c=t[10].length>2?1.2*$n:void 0),$e(i,"lengthAdjust","spacingAndGlyphs"),this.first=n},m(e,t){he(e,n,t),he(e,i,t),fe(i,l)},p(e,d){t=e,4&d&&r!==(r=t[11])&&$e(n,"d",r),1&d&&o!==(o="url(#lk-arrow-"+t[0]+")")&&$e(n,"marker-end",o),4&d&&u!==(u=t[10]+"")&&Te(l,u),4&d&&s!==(s=t[8])&&$e(i,"x",s),4&d&&a!==(a=t[9])&&$e(i,"y",a),4&d&&c!==(c=t[10].length>2?1.2*$n:void 0)&&$e(i,"textLength",c)},d(e){e&&pe(n),e&&pe(i)}}}function xn(e){let t,n,r,o,i,l=[],s=new Map,a=e[3](e[2]||{});const c=e=>e[7];for(let t=0;t<a.length;t+=1){let n=wn(e,a,t),r=c(n);s.set(r,l[t]=kn(r,n))}return{c(){t=ve("marker"),n=ve("path"),o=ye(),i=ve("g");for(let e=0;e<l.length;e+=1)l[e].c();$e(n,"d","M 0.4,0.425 L 0.5,0.5 L 0.4,0.575"),$e(n,"fill","none"),$e(n,"stroke",_n),$e(n,"stroke-width",Mn),$e(t,"id",r="lk-arrow-"+e[0]),$e(t,"viewBox","0 0 1 1"),$e(t,"refX","0.5"),$e(t,"refY","0.5"),$e(t,"markerUnits","userSpaceOnUse"),$e(t,"markerWidth","1"),$e(t,"markerHeight","1"),$e(t,"orient","auto"),$e(i,"id",e[0])},m(e,r){he(e,t,r),fe(t,n),he(e,o,r),he(e,i,r);for(let e=0;e<l.length;e+=1)l[e].m(i,null)},p(e,[n]){1&n&&r!==(r="lk-arrow-"+e[0])&&$e(t,"id",r),13&n&&(a=e[3](e[2]||{}),l=Ze(l,n,c,1,e,a,s,i,Xe,kn,null,wn)),1&n&&$e(i,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t),e&&pe(o),e&&pe(i);for(let e=0;e<l.length;e+=1)l[e].d()}}}const _n="#000",$n=.4,Tn=800,Mn=.025;function Hn(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(2,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;const c=.4*$n,u=c+.2;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(4,a=e.grid)},[l,s,r,function(e){const t=[];for(const[n,r]of Object.entries(e||{})){const e=!0!==r?`${r}`:"_",[o,i]=$(+n,a,-.9),l=T(+n);t.push({idx:+n,x:o,y:i,text:e,d:`M${o+c*l[0]},${i+c*l[1]}L${o+u*l[0]},${i+u*l[1]}`})}return t},a]}function Cn(e,t,n){const r=e.slice();return r[14]=t[n].idx,r[15]=t[n].x,r[16]=t[n].y,r[17]=t[n].text,r}function On(e){let t,n,r;return{c(){t=ve("circle"),$e(t,"cx",n=e[15]),$e(t,"cy",r=e[16]),$e(t,"r",e[5]),$e(t,"fill",e[3]),$e(t,"stroke",e[2]),$e(t,"stroke-width",e[6])},m(e,n){he(e,t,n)},p(e,o){512&o&&n!==(n=e[15])&&$e(t,"cx",n),512&o&&r!==(r=e[16])&&$e(t,"cy",r),32&o&&$e(t,"r",e[5]),8&o&&$e(t,"fill",e[3]),4&o&&$e(t,"stroke",e[2]),64&o&&$e(t,"stroke-width",e[6])},d(e){e&&pe(t)}}}function Sn(e,t){let n,r,o,i,l,s=t[17]+"",a=0<t[5]&&On(t);return{key:e,first:null,c(){n=we(),a&&a.c(),r=ve("text"),o=be(s),$e(r,"x",i=t[15]),$e(r,"y",l=t[16]),$e(r,"text-anchor","middle"),$e(r,"dominant-baseline","central"),$e(r,"fill",t[4]),$e(r,"font-size",t[7]),$e(r,"font-weight",t[8]),this.first=n},m(e,t){he(e,n,t),a&&a.m(e,t),he(e,r,t),fe(r,o)},p(e,n){0<(t=e)[5]?a?a.p(t,n):(a=On(t),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),512&n&&s!==(s=t[17]+"")&&Te(o,s),512&n&&i!==(i=t[15])&&$e(r,"x",i),512&n&&l!==(l=t[16])&&$e(r,"y",l),16&n&&$e(r,"fill",t[4]),128&n&&$e(r,"font-size",t[7]),256&n&&$e(r,"font-weight",t[8])},d(e){e&&pe(n),a&&a.d(e),e&&pe(r)}}}function En(e){let t,n=[],r=new Map,o=e[10](e[9]||{});const i=e=>e[14];for(let t=0;t<o.length;t+=1){let l=Cn(e,o,t),s=i(l);r.set(s,n[t]=Sn(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0])},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){2044&l&&(o=e[10](e[9]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,Sn,null,Cn)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function An(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(9,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t,{idx2coord:c}=t,{stroke:u="#242424"}=t,{fill:d="#fff"}=t,{textColor:f="#000"}=t,{radius:h=.15}=t,{strokeWidth:p=.02}=t,{fontSize:g=.25}=t,{fontWeight:m=600}=t,{mapDigits:v=(e=>!0!==e?`${e}`:"")}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(11,a=e.grid),"idx2coord"in e&&n(12,c=e.idx2coord),"stroke"in e&&n(2,u=e.stroke),"fill"in e&&n(3,d=e.fill),"textColor"in e&&n(4,f=e.textColor),"radius"in e&&n(5,h=e.radius),"strokeWidth"in e&&n(6,p=e.strokeWidth),"fontSize"in e&&n(7,g=e.fontSize),"fontWeight"in e&&n(8,m=e.fontWeight),"mapDigits"in e&&n(13,v=e.mapDigits)},[l,s,u,d,f,h,p,g,m,r,function(e){const t=[];for(const[n,r]of Object.entries(e)){const e=v(r),[o,i]=c(+n,a);t.push({idx:+n,x:o,y:i,text:e})}return t},a,c,v]}class In extends rt{constructor(e){super(),nt(this,e,An,En,ne,{id:0,ref:1,grid:11,idx2coord:12,stroke:2,fill:3,textColor:4,radius:5,strokeWidth:6,fontSize:7,fontWeight:8,mapDigits:13})}}function Ln(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].slices,r}function jn(e,t,n){const r=e.slice();return r[9]=t[n].d,r[10]=t[n].fill,r}function Dn(e){let t,n,r;return{c(){t=ve("path"),$e(t,"d",n=e[9]),$e(t,"fill",r=e[10]),$e(t,"fill-opacity","0.6"),$e(t,"stroke","none")},m(e,n){he(e,t,n)},p(e,o){4&o&&n!==(n=e[9])&&$e(t,"d",n),4&o&&r!==(r=e[10])&&$e(t,"fill",r)},d(e){e&&pe(t)}}}function Nn(e,t){let n,r,o=t[6],i=[];for(let e=0;e<o.length;e+=1)i[e]=Dn(jn(t,o,e));return{key:e,first:null,c(){n=ve("g");for(let e=0;e<i.length;e+=1)i[e].c();$e(n,"id",r="colors-"+t[0]+"-"+t[5]),this.first=n},m(e,t){he(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,l){if(t=e,12&l){let e;for(o=t[6],e=0;e<o.length;e+=1){const r=jn(t,o,e);i[e]?i[e].p(r,l):(i[e]=Dn(r),i[e].c(),i[e].m(n,null))}for(;e<i.length;e+=1)i[e].d(1);i.length=o.length}5&l&&r!==(r="colors-"+t[0]+"-"+t[5])&&$e(n,"id",r)},d(e){e&&pe(n),ge(i,e)}}}function Rn(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let l=Ln(e,o,t),s=i(l);r.set(s,n[t]=Nn(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0])},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){13&l&&(o=e[3](e[2]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,Nn,null,Ln)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Pn(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(2,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(4,a=e.grid)},[l,s,r,function(e){const t=[];for(const[n,r]of Object.entries(e)){const e=Object.keys(r||{});e.sort(((e,t)=>{const n=Et.hexToHsluv(e),r=Et.hexToHsluv(t);return Math.round(.06*(n[0]-r[0]))||n[2]-r[2]}));const o=e.map(((e,t,r)=>({fill:e,d:V(+n,a,t,r.length)})));t.push({idx:+n,slices:o})}return t},a]}function Un(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].x,r[7]=t[n].y,r[8]=t[n].nums,r}function Gn(e,t){let n,r,o,i,l,s=t[8].join("")+"";return{key:e,first:null,c(){n=ve("text"),r=be(s),$e(n,"x",o=t[6]),$e(n,"y",i=t[7]),$e(n,"fill","#4e72b0"),$e(n,"text-anchor","middle"),$e(n,"dominant-baseline","central"),$e(n,"font-size","0.3"),$e(n,"font-weight","600"),$e(n,"textLength",l=t[8].length>5?"0.9":void 0),$e(n,"lengthAdjust","spacingAndGlyphs"),this.first=n},m(e,t){he(e,n,t),fe(n,r)},p(e,a){t=e,4&a&&s!==(s=t[8].join("")+"")&&Te(r,s),4&a&&o!==(o=t[6])&&$e(n,"x",o),4&a&&i!==(i=t[7])&&$e(n,"y",i),4&a&&l!==(l=t[8].length>5?"0.9":void 0)&&$e(n,"textLength",l)},d(e){e&&pe(n)}}}function zn(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let l=Un(e,o,t),s=i(l);r.set(s,n[t]=Gn(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0]),$e(t,"mask","url(#SUDOKU_MASK_GIVENS_FILLED)")},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){12&l&&(o=e[3](e[2]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,Gn,null,Un)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Fn(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(2,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(4,a=e.grid)},[l,s,r,function(e){const t=[];for(const[n,r]of Object.entries(e)){const[e,o]=d(+n,a).map((e=>e+.5));t.push({idx:+n,x:e,y:o,nums:C(r)})}return t},a]}function Bn(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].nums,r}function Wn(e,t,n){const r=e.slice();return r[9]=t[n].x,r[10]=t[n].y,r[11]=t[n].num,r}function Vn(e){let t,n,r,o,i=e[11]+"";return{c(){t=ve("text"),n=be(i),$e(t,"x",r=e[9]),$e(t,"y",o=e[10]),$e(t,"fill","#4e72b0"),$e(t,"text-anchor","middle"),$e(t,"dominant-baseline","central"),$e(t,"font-size","0.3"),$e(t,"font-weight","600")},m(e,r){he(e,t,r),fe(t,n)},p(e,l){4&l&&i!==(i=e[11]+"")&&Te(n,i),4&l&&r!==(r=e[9])&&$e(t,"x",r),4&l&&o!==(o=e[10])&&$e(t,"y",o)},d(e){e&&pe(t)}}}function qn(e,t){let n,r,o=t[6],i=[];for(let e=0;e<o.length;e+=1)i[e]=Vn(Wn(t,o,e));return{key:e,first:null,c(){n=we();for(let e=0;e<i.length;e+=1)i[e].c();r=we(),this.first=n},m(e,t){he(e,n,t);for(let n=0;n<i.length;n+=1)i[n].m(e,t);he(e,r,t)},p(e,n){if(t=e,12&n){let e;for(o=t[6],e=0;e<o.length;e+=1){const l=Wn(t,o,e);i[e]?i[e].p(l,n):(i[e]=Vn(l),i[e].c(),i[e].m(r.parentNode,r))}for(;e<i.length;e+=1)i[e].d(1);i.length=o.length}},d(e){e&&pe(n),ge(i,e),e&&pe(r)}}}function Yn(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let l=Bn(e,o,t),s=i(l);r.set(s,n[t]=qn(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0]),$e(t,"mask","url(#SUDOKU_MASK_GIVENS_FILLED)")},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){12&l&&(o=e[3](e[2]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,qn,null,Bn)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Xn(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(2,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(4,a=e.grid)},[l,s,r,function(e){const t=[];for(const[n,r]of Object.entries(e)){const e=d(+n,a)[0]+.5,o=d(+n,a)[1]+.5,i=!0===r?[]:C(r).map(((t,n,r)=>{const[i,l]=B(n,r.length);return{x:e+i,y:o+l,num:t}}));t.push({idx:+n,nums:i})}return t},a]}function Kn(e){let t,n,r,o,i,l,s;return{c(){t=ve("g"),n=ve("line"),i=ve("line"),$e(n,"x1","0"),$e(n,"y1",r=e[1].height),$e(n,"x2",o=e[1].width),$e(n,"y2","0"),$e(n,"class","svelte-1qd4hgf"),Ce(n,"hide",!e[2]),$e(i,"x1","0"),$e(i,"y1","0"),$e(i,"x2",l=e[1].width),$e(i,"y2",s=e[1].height),$e(i,"class","svelte-1qd4hgf"),Ce(i,"hide",!e[3]),$e(t,"id",e[0])},m(e,r){he(e,t,r),fe(t,n),fe(t,i)},p(e,[a]){2&a&&r!==(r=e[1].height)&&$e(n,"y1",r),2&a&&o!==(o=e[1].width)&&$e(n,"x2",o),4&a&&Ce(n,"hide",!e[2]),2&a&&l!==(l=e[1].width)&&$e(i,"x2",l),2&a&&s!==(s=e[1].height)&&$e(i,"y2",s),8&a&&Ce(i,"hide",!e[3]),1&a&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t)}}}function Zn(e,t,n){let r,o,{id:i}=t,{ref:l}=t,{grid:s}=t;const a=l.ref("positive");oe(e,a,(e=>n(2,r=e)));const c=l.ref("negative");return oe(e,c,(e=>n(3,o=e))),e.$$set=e=>{"id"in e&&n(0,i=e.id),"ref"in e&&n(6,l=e.ref),"grid"in e&&n(1,s=e.grid)},[i,s,r,o,a,c,l]}function Jn(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].x,r[7]=t[n].y,r[8]=t[n].lines,r}function Qn(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function er(e){let t,n,r,o,i=e[11]+"";return{c(){t=ve("text"),n=be(i),$e(t,"x",r=e[6]),$e(t,"y",o=e[7]+.9*lr*(e[13]-.5*(e[8].length-1))),$e(t,"text-anchor","middle"),$e(t,"dominant-baseline","central"),$e(t,"font-size",lr),$e(t,"font-weight","600")},m(e,r){he(e,t,r),fe(t,n)},p(e,l){4&l&&i!==(i=e[11]+"")&&Te(n,i),4&l&&r!==(r=e[6])&&$e(t,"x",r),4&l&&o!==(o=e[7]+.9*lr*(e[13]-.5*(e[8].length-1)))&&$e(t,"y",o)},d(e){e&&pe(t)}}}function tr(e,t){let n,r,o,i,l=t[8],s=[];for(let e=0;e<l.length;e+=1)s[e]=er(Qn(t,l,e));return{key:e,first:null,c(){n=ve("circle");for(let e=0;e<s.length;e+=1)s[e].c();i=we(),$e(n,"cx",r=t[6]),$e(n,"cy",o=t[7]),$e(n,"r",rr),$e(n,"fill","#fff"),$e(n,"stroke","#000"),$e(n,"stroke-width",or),this.first=n},m(e,t){he(e,n,t);for(let n=0;n<s.length;n+=1)s[n].m(e,t);he(e,i,t)},p(e,a){if(t=e,4&a&&r!==(r=t[6])&&$e(n,"cx",r),4&a&&o!==(o=t[7])&&$e(n,"cy",o),12&a){let e;for(l=t[8],e=0;e<l.length;e+=1){const n=Qn(t,l,e);s[e]?s[e].p(n,a):(s[e]=er(n),s[e].c(),s[e].m(i.parentNode,i))}for(;e<s.length;e+=1)s[e].d(1);s.length=l.length}},d(e){e&&pe(n),ge(s,e),e&&pe(i)}}}function nr(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let l=Jn(e,o,t),s=i(l);r.set(s,n[t]=tr(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0])},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){12&l&&(o=e[3](e[2]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,tr,null,Jn)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}const rr=.2125,or=.02,ir=/.{1,2}/g,lr=.2;function sr(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(2,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(4,a=e.grid)},[l,s,r,function(e){const t=[];for(const[n,r]of Object.entries(e)){const[e,o]=g(+n,a),i=u(r).join("").match(ir)||[];t.push({idx:+n,x:e,y:o,lines:i})}return t},a]}function ar(e,t,n){const r=e.slice();return r[5]=t[n].cageId,r[6]=t[n].text,r[7]=t[n].labelPos,r[8]=t[n].d,r}function cr(e,t,n){const r=e.slice();return r[5]=t[n].cageId,r[6]=t[n].text,r[7]=t[n].labelPos,r}function ur(e,t){let n,r,o,i;return{key:e,first:null,c(){n=ve("rect"),$e(n,"x",r=t[7].x),$e(n,"y",o=t[7].y),$e(n,"width",i=.7*`${t[6]}`.length*pr),$e(n,"height",1.1*pr),$e(n,"fill","#000"),this.first=n},m(e,t){he(e,n,t)},p(e,l){t=e,8&l&&r!==(r=t[7].x)&&$e(n,"x",r),8&l&&o!==(o=t[7].y)&&$e(n,"y",o),8&l&&i!==(i=.7*`${t[6]}`.length*pr)&&$e(n,"width",i)},d(e){e&&pe(n)}}}function dr(e,t){let n,r,o,i,l,s,a,c=t[6]+"";return{key:e,first:null,c(){n=ve("text"),r=be(c),l=ve("path"),$e(n,"x",o=t[7].x),$e(n,"y",i=t[7].y),$e(n,"text-anchor","start"),$e(n,"dominant-baseline","hanging"),$e(n,"font-size",pr),$e(n,"font-weight","600"),$e(l,"d",s=t[8]),$e(l,"fill","none"),$e(l,"stroke","#000"),$e(l,"stroke-width",gr),$e(l,"stroke-dasharray","0.075 0.04"),$e(l,"mask",a="url(#killer-"+t[0]+"-mask)"),this.first=n},m(e,t){he(e,n,t),fe(n,r),he(e,l,t)},p(e,u){t=e,8&u&&c!==(c=t[6]+"")&&Te(r,c),8&u&&o!==(o=t[7].x)&&$e(n,"x",o),8&u&&i!==(i=t[7].y)&&$e(n,"y",i),8&u&&s!==(s=t[8])&&$e(l,"d",s),1&u&&a!==(a="url(#killer-"+t[0]+"-mask)")&&$e(l,"mask",a)},d(e){e&&pe(n),e&&pe(l)}}}function fr(e){let t,n,r,o,i,l,s,a,c,u=[],d=new Map,f=[],h=new Map,p=e[4](e[3]||{});const g=e=>e[5];for(let t=0;t<p.length;t+=1){let n=cr(e,p,t),r=g(n);d.set(r,u[t]=ur(r,n))}let m=e[4](e[3]||{});const v=e=>e[5];for(let t=0;t<m.length;t+=1){let n=ar(e,m,t),r=v(n);h.set(r,f[t]=dr(r,n))}return{c(){t=ve("mask"),n=ve("rect");for(let e=0;e<u.length;e+=1)u[e].c();a=ye(),c=ve("g");for(let e=0;e<f.length;e+=1)f[e].c();$e(n,"x","0"),$e(n,"y","0"),$e(n,"width",r=e[2].width),$e(n,"height",o=e[2].height),$e(n,"fill","#fff"),$e(t,"id",i="killer-"+e[0]+"-mask"),$e(t,"maskUnits","userSpaceOnUse"),$e(t,"maskContentUnits","userSpaceOnUse"),$e(t,"x","0"),$e(t,"y","0"),$e(t,"width",l=e[2].width),$e(t,"height",s=e[2].height),$e(c,"id",e[0])},m(e,r){he(e,t,r),fe(t,n);for(let e=0;e<u.length;e+=1)u[e].m(t,null);he(e,a,r),he(e,c,r);for(let e=0;e<f.length;e+=1)f[e].m(c,null)},p(e,[a]){4&a&&r!==(r=e[2].width)&&$e(n,"width",r),4&a&&o!==(o=e[2].height)&&$e(n,"height",o),24&a&&(p=e[4](e[3]||{}),u=Ze(u,a,g,1,e,p,d,t,Xe,ur,null,cr)),1&a&&i!==(i="killer-"+e[0]+"-mask")&&$e(t,"id",i),4&a&&l!==(l=e[2].width)&&$e(t,"width",l),4&a&&s!==(s=e[2].height)&&$e(t,"height",s),25&a&&(m=e[4](e[3]||{}),f=Ze(f,a,v,1,e,m,h,c,Xe,dr,null,ar)),1&a&&$e(c,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<u.length;e+=1)u[e].d();e&&pe(a),e&&pe(c);for(let e=0;e<f.length;e+=1)f[e].d()}}}const hr=.075,pr=.2,gr=.015;function mr(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(3,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(2,a=e.grid)},[l,s,a,r,function(e){const t=[];for(const[n,{sum:r,cells:o}]of Object.entries(e||{})){const e=C(o);if(0>=e.length)continue;const i=e[0],l=z(e,a,hr);if(null==l)continue;const s=d(i,a),c={x:s[0]+hr-gr,y:s[1]+hr-gr},u=null!=r?`${r}`:"";t.push({cageId:n,text:u,labelPos:c,d:l})}return t}]}function vr(e,t,n){const r=e.slice();return r[6]=t[n].idx,r[7]=t[n].x,r[8]=t[n].y,r}function br(e,t){let n,r,o;return{key:e,first:null,c(){n=ve("rect"),$e(n,"x",r=t[7]),$e(n,"y",o=t[8]),$e(n,"width",t[3]),$e(n,"height",t[3]),$e(n,"fill","#666"),$e(n,"fill-opacity","0.267"),this.first=n},m(e,t){he(e,n,t)},p(e,i){t=e,4&i&&r!==(r=t[7])&&$e(n,"x",r),4&i&&o!==(o=t[8])&&$e(n,"y",o)},d(e){e&&pe(n)}}}function yr(e){let t,n=[],r=new Map,o=e[4](e[2]||{});const i=e=>e[6];for(let t=0;t<o.length;t+=1){let l=vr(e,o,t),s=i(l);r.set(s,n[t]=br(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0])},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){28&l&&(o=e[4](e[2]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,br,null,vr)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}const wr=.125;function kr(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(2,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(5,a=e.grid)},[l,s,r,.75,function(e){const t=[];for(const n of C(e)){const[e,r]=d(n,a);t.push({idx:+n,x:e+wr,y:r+wr})}return t},a]}function xr(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].cx,r[7]=t[n].cy,r}function _r(e,t){let n,r,o;return{key:e,first:null,c(){n=ve("circle"),$e(n,"cx",r=t[6]),$e(n,"cy",o=t[7]),$e(n,"r","0.425"),$e(n,"fill","#666"),$e(n,"fill-opacity","0.267"),this.first=n},m(e,t){he(e,n,t)},p(e,i){t=e,4&i&&r!==(r=t[6])&&$e(n,"cx",r),4&i&&o!==(o=t[7])&&$e(n,"cy",o)},d(e){e&&pe(n)}}}function $r(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let l=xr(e,o,t),s=i(l);r.set(s,n[t]=_r(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0])},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){12&l&&(o=e[3](e[2]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,_r,null,xr)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Tr(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(2,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(4,a=e.grid)},[l,s,r,function(e){const t=[];for(const n of C(e)){const[e,r]=d(n,a);t.push({idx:+n,cx:e+.5,cy:r+.5})}return t},a]}function Mr(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function Hr(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function Cr(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function Or(e,t){let n,r,o;return{key:e,first:null,c(){n=ve("use"),$e(n,"href",r="#max-"+t[0]+"-maskitem"),$e(n,"transform",o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")"),$e(n,"fill","#000"),this.first=n},m(e,t){he(e,n,t)},p(e,i){t=e,1&i&&r!==(r="#max-"+t[0]+"-maskitem")&&$e(n,"href",r),12&i&&o!==(o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")")&&$e(n,"transform",o)},d(e){e&&pe(n)}}}function Sr(e,t){let n,r,o;return{key:e,first:null,c(){n=ve("rect"),$e(n,"x",r=d(+t[4],t[2])[0]),$e(n,"y",o=d(+t[4],t[2])[1]),$e(n,"width","1"),$e(n,"height","1"),$e(n,"fill","#7d3737"),$e(n,"fill-opacity","0.1"),this.first=n},m(e,t){he(e,n,t)},p(e,i){t=e,12&i&&r!==(r=d(+t[4],t[2])[0])&&$e(n,"x",r),12&i&&o!==(o=d(+t[4],t[2])[1])&&$e(n,"y",o)},d(e){e&&pe(n)}}}function Er(e,t){let n,r,o;return{key:e,first:null,c(){n=ve("use"),$e(n,"href",r="#max-"+t[0]),$e(n,"transform",o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")"),this.first=n},m(e,t){he(e,n,t)},p(e,i){t=e,1&i&&r!==(r="#max-"+t[0])&&$e(n,"href",r),12&i&&o!==(o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")")&&$e(n,"transform",o)},d(e){e&&pe(n)}}}function Ar(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v,b,y,w,k,x=[],_=new Map,$=[],T=new Map,M=[],H=new Map,C=Object.entries(e[3]||{});const O=e=>e[4];for(let t=0;t<C.length;t+=1){let n=Cr(e,C,t),r=O(n);_.set(r,x[t]=Or(r,n))}let S=Object.entries(e[3]||{});const E=e=>e[4];for(let t=0;t<S.length;t+=1){let n=Hr(e,S,t),r=E(n);T.set(r,$[t]=Sr(r,n))}let A=Object.entries(e[3]||{});const I=e=>e[4];for(let t=0;t<A.length;t+=1){let n=Mr(e,A,t),r=I(n);H.set(r,M[t]=Er(r,n))}return{c(){t=ve("path"),r=ye(),o=ve("path"),l=ye(),s=ve("mask"),a=ve("rect");for(let e=0;e<x.length;e+=1)x[e].c();p=ye(),g=ve("rect"),b=ye(),y=ve("g");for(let e=0;e<$.length;e+=1)$[e].c();w=ve("g");for(let e=0;e<M.length;e+=1)M[e].c();$e(t,"id",n="max-"+e[0]),$e(t,"d","M 0.12,0.38 L 0.08,0.50 L 0.12,0.62 M 0.38,0.12 L 0.50,0.08 L 0.62,0.12 M 0.88,0.62 L 0.92,0.50 L 0.88,0.38 M 0.62,0.88 L 0.50,0.92 L 0.38,0.88"),$e(t,"fill","none"),$e(t,"stroke","#000"),$e(t,"stroke-width","0.025"),$e(t,"stroke-miterlimit","1.5"),$e(o,"id",i="max-"+e[0]+"-maskitem"),$e(o,"d","M -0.5,0.5 L 0.5,-0.5 L 1.5,0.5 L 0.5,1.5 M 0,0 L 0,1 L 1,1 L 1,0"),$e(o,"fill","#000"),$e(a,"x","0.25"),$e(a,"y","0.25"),$e(a,"width",c=e[2].width-.5),$e(a,"height",u=e[2].height-.5),$e(a,"fill","#fff"),$e(s,"id",d="max-"+e[0]+"-mask"),$e(s,"maskUnits","userSpaceOnUse"),$e(s,"maskContentUnits","userSpaceOnUse"),$e(s,"x","0"),$e(s,"y","0"),$e(s,"width",f=e[2].width),$e(s,"height",h=e[2].height),$e(g,"width",m=e[2].width),$e(g,"height",v=e[2].height),$e(g,"fill","#fff"),$e(w,"mask",k="url(#max-"+e[0]+"-mask)"),$e(y,"id",e[0])},m(e,n){he(e,t,n),he(e,r,n),he(e,o,n),he(e,l,n),he(e,s,n),fe(s,a);for(let e=0;e<x.length;e+=1)x[e].m(s,null);he(e,p,n),he(e,g,n),he(e,b,n),he(e,y,n);for(let e=0;e<$.length;e+=1)$[e].m(y,null);fe(y,w);for(let e=0;e<M.length;e+=1)M[e].m(w,null)},p(e,[r]){1&r&&n!==(n="max-"+e[0])&&$e(t,"id",n),1&r&&i!==(i="max-"+e[0]+"-maskitem")&&$e(o,"id",i),4&r&&c!==(c=e[2].width-.5)&&$e(a,"width",c),4&r&&u!==(u=e[2].height-.5)&&$e(a,"height",u),13&r&&(C=Object.entries(e[3]||{}),x=Ze(x,r,O,1,e,C,_,s,Xe,Or,null,Cr)),1&r&&d!==(d="max-"+e[0]+"-mask")&&$e(s,"id",d),4&r&&f!==(f=e[2].width)&&$e(s,"width",f),4&r&&h!==(h=e[2].height)&&$e(s,"height",h),4&r&&m!==(m=e[2].width)&&$e(g,"width",m),4&r&&v!==(v=e[2].height)&&$e(g,"height",v),12&r&&(S=Object.entries(e[3]||{}),$=Ze($,r,E,1,e,S,T,y,Xe,Sr,w,Hr)),13&r&&(A=Object.entries(e[3]||{}),M=Ze(M,r,I,1,e,A,H,w,Xe,Er,null,Mr)),1&r&&k!==(k="url(#max-"+e[0]+"-mask)")&&$e(w,"mask",k),1&r&&$e(y,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t),e&&pe(r),e&&pe(o),e&&pe(l),e&&pe(s);for(let e=0;e<x.length;e+=1)x[e].d();e&&pe(p),e&&pe(g),e&&pe(b),e&&pe(y);for(let e=0;e<$.length;e+=1)$[e].d();for(let e=0;e<M.length;e+=1)M[e].d()}}}function Ir(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(3,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(2,a=e.grid)},[l,s,a,r]}function Lr(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function jr(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function Dr(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function Nr(e,t){let n,r,o;return{key:e,first:null,c(){n=ve("use"),$e(n,"href",r="#min-"+t[0]+"-maskitem"),$e(n,"transform",o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")"),$e(n,"fill","#000"),this.first=n},m(e,t){he(e,n,t)},p(e,i){t=e,1&i&&r!==(r="#min-"+t[0]+"-maskitem")&&$e(n,"href",r),12&i&&o!==(o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")")&&$e(n,"transform",o)},d(e){e&&pe(n)}}}function Rr(e,t){let n,r,o;return{key:e,first:null,c(){n=ve("rect"),$e(n,"x",r=d(+t[4],t[2])[0]),$e(n,"y",o=d(+t[4],t[2])[1]),$e(n,"width","1"),$e(n,"height","1"),$e(n,"fill","#694b7d"),$e(n,"fill-opacity","0.1"),this.first=n},m(e,t){he(e,n,t)},p(e,i){t=e,12&i&&r!==(r=d(+t[4],t[2])[0])&&$e(n,"x",r),12&i&&o!==(o=d(+t[4],t[2])[1])&&$e(n,"y",o)},d(e){e&&pe(n)}}}function Pr(e,t){let n,r,o;return{key:e,first:null,c(){n=ve("use"),$e(n,"href",r="#min-"+t[0]),$e(n,"transform",o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")"),this.first=n},m(e,t){he(e,n,t)},p(e,i){t=e,1&i&&r!==(r="#min-"+t[0])&&$e(n,"href",r),12&i&&o!==(o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")")&&$e(n,"transform",o)},d(e){e&&pe(n)}}}function Ur(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v,b,y,w,k,x=[],_=new Map,$=[],T=new Map,M=[],H=new Map,C=Object.entries(e[3]||{});const O=e=>e[4];for(let t=0;t<C.length;t+=1){let n=Dr(e,C,t),r=O(n);_.set(r,x[t]=Nr(r,n))}let S=Object.entries(e[3]||{});const E=e=>e[4];for(let t=0;t<S.length;t+=1){let n=jr(e,S,t),r=E(n);T.set(r,$[t]=Rr(r,n))}let A=Object.entries(e[3]||{});const I=e=>e[4];for(let t=0;t<A.length;t+=1){let n=Lr(e,A,t),r=I(n);H.set(r,M[t]=Pr(r,n))}return{c(){t=ve("path"),r=ye(),o=ve("path"),l=ye(),s=ve("mask"),a=ve("rect");for(let e=0;e<x.length;e+=1)x[e].c();p=ye(),g=ve("rect"),b=ye(),y=ve("g");for(let e=0;e<$.length;e+=1)$[e].c();w=ve("g");for(let e=0;e<M.length;e+=1)M[e].c();$e(t,"id",n="min-"+e[0]),$e(t,"d","M 0.08,0.38 L 0.12,0.50 L 0.08,0.62 M 0.38,0.08 L 0.50,0.12 L 0.62,0.08 M 0.92,0.62 L 0.88,0.50 L 0.92,0.38 M 0.62,0.92 L 0.50,0.88 L 0.38,0.92"),$e(t,"fill","none"),$e(t,"stroke","#000"),$e(t,"stroke-width","0.025"),$e(t,"stroke-miterlimit","1.5"),$e(o,"id",i="min-"+e[0]+"-maskitem"),$e(o,"d","M -0.5,0.5 L 0.5,-0.5 L 1.5,0.5 L 0.5,1.5 M 0,0 L 0,1 L 1,1 L 1,0"),$e(o,"fill","#000"),$e(a,"x","0.25"),$e(a,"y","0.25"),$e(a,"width",c=e[2].width-.5),$e(a,"height",u=e[2].height-.5),$e(a,"fill","#fff"),$e(s,"id",d="min-"+e[0]+"-mask"),$e(s,"maskUnits","userSpaceOnUse"),$e(s,"maskContentUnits","userSpaceOnUse"),$e(s,"x","0"),$e(s,"y","0"),$e(s,"width",f=e[2].width),$e(s,"height",h=e[2].height),$e(g,"width",m=e[2].width),$e(g,"height",v=e[2].height),$e(g,"fill","#fff"),$e(w,"mask",k="url(#min-"+e[0]+"-mask)"),$e(y,"id",e[0])},m(e,n){he(e,t,n),he(e,r,n),he(e,o,n),he(e,l,n),he(e,s,n),fe(s,a);for(let e=0;e<x.length;e+=1)x[e].m(s,null);he(e,p,n),he(e,g,n),he(e,b,n),he(e,y,n);for(let e=0;e<$.length;e+=1)$[e].m(y,null);fe(y,w);for(let e=0;e<M.length;e+=1)M[e].m(w,null)},p(e,[r]){1&r&&n!==(n="min-"+e[0])&&$e(t,"id",n),1&r&&i!==(i="min-"+e[0]+"-maskitem")&&$e(o,"id",i),4&r&&c!==(c=e[2].width-.5)&&$e(a,"width",c),4&r&&u!==(u=e[2].height-.5)&&$e(a,"height",u),13&r&&(C=Object.entries(e[3]||{}),x=Ze(x,r,O,1,e,C,_,s,Xe,Nr,null,Dr)),1&r&&d!==(d="min-"+e[0]+"-mask")&&$e(s,"id",d),4&r&&f!==(f=e[2].width)&&$e(s,"width",f),4&r&&h!==(h=e[2].height)&&$e(s,"height",h),4&r&&m!==(m=e[2].width)&&$e(g,"width",m),4&r&&v!==(v=e[2].height)&&$e(g,"height",v),12&r&&(S=Object.entries(e[3]||{}),$=Ze($,r,E,1,e,S,T,y,Xe,Rr,w,jr)),13&r&&(A=Object.entries(e[3]||{}),M=Ze(M,r,I,1,e,A,H,w,Xe,Pr,null,Lr)),1&r&&k!==(k="url(#min-"+e[0]+"-mask)")&&$e(w,"mask",k),1&r&&$e(y,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t),e&&pe(r),e&&pe(o),e&&pe(l),e&&pe(s);for(let e=0;e<x.length;e+=1)x[e].d();e&&pe(p),e&&pe(g),e&&pe(b),e&&pe(y);for(let e=0;e<$.length;e+=1)$[e].d();for(let e=0;e<M.length;e+=1)M[e].d()}}}function Gr(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(3,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(2,a=e.grid)},[l,s,a,r]}function zr(e,t,n){const r=e.slice();return r[8]=t[n].itemId,r[9]=t[n].d,r}function Fr(e,t){let n,r;return{key:e,first:null,c(){n=ve("path"),$e(n,"d",r=t[9]),$e(n,"fill","none"),$e(n,"stroke-linejoin","round"),$e(n,"stroke-linecap","round"),$e(n,"stroke",t[2]),$e(n,"stroke-width",t[3]),$e(n,"stroke-opacity","0.9"),this.first=n},m(e,t){he(e,n,t)},p(e,o){t=e,16&o&&r!==(r=t[9])&&$e(n,"d",r),4&o&&$e(n,"stroke",t[2]),8&o&&$e(n,"stroke-width",t[3])},d(e){e&&pe(n)}}}function Br(e){let t,n=[],r=new Map,o=e[5](e[4]);const i=e=>e[8];for(let t=0;t<o.length;t+=1){let l=zr(e,o,t),s=i(l);r.set(s,n[t]=Fr(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0])},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){60&l&&(o=e[5](e[4]),n=Ze(n,l,i,1,e,o,r,t,Xe,Fr,null,zr)),1&l&&$e(t,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Wr(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(4,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t,{stroke:c="#c7855c"}=t,{strokeWidth:d=.125}=t,{pathOptions:f={shortenHead:.2,shortenTail:.2,bezierRounding:.2}}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(6,a=e.grid),"stroke"in e&&n(2,c=e.stroke),"strokeWidth"in e&&n(3,d=e.strokeWidth),"pathOptions"in e&&n(7,f=e.pathOptions)},[l,s,c,d,r,function(e){if(null==e)return[];const t=[];for(const[n,r]of Object.entries(e)){const e=u(r);t.push({itemId:n,d:N(e,a,f)})}return t},a,f]}class Vr extends rt{constructor(e){super(),nt(this,e,Wr,Br,ne,{id:0,ref:1,grid:6,stroke:2,strokeWidth:3,pathOptions:7})}}function qr(e,t,n){const r=e.slice();return r[5]=t[n].arrowId,r[6]=t[n].dBulb,r[7]=t[n].dBody,r}function Yr(e,t){let n,r,o,i,l,s,a,c,u,d,f,h,p;return{key:e,first:null,c(){n=ve("mask"),r=ve("rect"),l=ve("path"),c=ve("path"),f=ve("path"),$e(r,"width",o=t[2].width),$e(r,"height",i=t[2].height),$e(r,"fill","#fff"),$e(l,"d",s=t[6]),$e(l,"fill","none"),$e(l,"stroke","#000"),$e(l,"stroke-width",2*Kr-Zr),$e(l,"stroke-linejoin","round"),$e(l,"stroke-linecap","round"),$e(n,"id",a="arrow-"+t[0]+"-mask-"+t[5]),$e(n,"maskUnits","userSpaceOnUse"),$e(c,"d",u=t[6]),$e(c,"fill","none"),$e(c,"stroke",Qr),$e(c,"stroke-width",2*Kr+Zr),$e(c,"mask",d="url(#arrow-"+t[0]+"-mask-"+t[5]+")"),$e(c,"stroke-linejoin","round"),$e(c,"stroke-linecap","round"),$e(f,"d",h=t[7]),$e(f,"fill","none"),$e(f,"stroke",Qr),$e(f,"stroke-width",Jr),$e(f,"stroke-miterlimit","1.5"),$e(f,"marker-end",p="url(#arrow-point-"+t[0]+")"),this.first=n},m(e,t){he(e,n,t),fe(n,r),fe(n,l),he(e,c,t),he(e,f,t)},p(e,g){t=e,4&g&&o!==(o=t[2].width)&&$e(r,"width",o),4&g&&i!==(i=t[2].height)&&$e(r,"height",i),8&g&&s!==(s=t[6])&&$e(l,"d",s),9&g&&a!==(a="arrow-"+t[0]+"-mask-"+t[5])&&$e(n,"id",a),8&g&&u!==(u=t[6])&&$e(c,"d",u),9&g&&d!==(d="url(#arrow-"+t[0]+"-mask-"+t[5]+")")&&$e(c,"mask",d),8&g&&h!==(h=t[7])&&$e(f,"d",h),1&g&&p!==(p="url(#arrow-point-"+t[0]+")")&&$e(f,"marker-end",p)},d(e){e&&pe(n),e&&pe(c),e&&pe(f)}}}function Xr(e){let t,n,r,o,i,l=[],s=new Map,a=e[4](e[3]||{});const c=e=>e[5];for(let t=0;t<a.length;t+=1){let n=qr(e,a,t),r=c(n);s.set(r,l[t]=Yr(r,n))}return{c(){t=ve("marker"),n=ve("path"),o=ye(),i=ve("g");for(let e=0;e<l.length;e+=1)l[e].c();$e(n,"d","M 0.4,0.425 L 0.5,0.5 L 0.4,0.575"),$e(n,"fill","none"),$e(n,"stroke",Qr),$e(n,"stroke-width",Jr),$e(t,"id",r="arrow-point-"+e[0]),$e(t,"viewBox","0 0 1 1"),$e(t,"refX","0.5"),$e(t,"refY","0.5"),$e(t,"markerUnits","userSpaceOnUse"),$e(t,"markerWidth","1"),$e(t,"markerHeight","1"),$e(t,"orient","auto"),$e(i,"id",e[0])},m(e,r){he(e,t,r),fe(t,n),he(e,o,r),he(e,i,r);for(let e=0;e<l.length;e+=1)l[e].m(i,null)},p(e,[n]){1&n&&r!==(r="arrow-point-"+e[0])&&$e(t,"id",r),29&n&&(a=e[4](e[3]||{}),l=Ze(l,n,c,1,e,a,s,i,Xe,Yr,null,qr)),1&n&&$e(i,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t),e&&pe(o),e&&pe(i);for(let e=0;e<l.length;e+=1)l[e].d()}}}const Kr=.375,Zr=.025,Jr=.025,Qr="#222";function eo(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(3,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(2,a=e.grid)},[l,s,a,r,function(e){const t=[];for(const[n,{bulb:r,body:o}]of Object.entries(e)){const e=N(u(r||{}),a),i=N(u(o||{}),a,{shortenHead:Kr,shortenTail:.2});t.push({arrowId:n,dBulb:e,dBody:i})}return t}]}function to(e,t,n){const r=e.slice();return r[6]=t[n].itemId,r[7]=t[n].d,r}function no(e,t,n){const r=e.slice();return r[6]=t[n].itemId,r[10]=t[n].head,r[11]=t[n].tail,r}function ro(e,t){let n,r,o,i,l,s;return{key:e,first:null,c(){n=ve("circle"),i=ve("circle"),$e(n,"cx",r=t[10][0]+.5),$e(n,"cy",o=t[10][1]+.5),$e(n,"r",lo-.5*so),$e(n,"fill","#000"),$e(n,"stroke","none"),$e(i,"cx",l=t[11][0]+.5),$e(i,"cy",s=t[11][1]+.5),$e(i,"r",lo-.5*so),$e(i,"fill","#000"),$e(i,"stroke","none"),this.first=n},m(e,t){he(e,n,t),he(e,i,t)},p(e,a){t=e,4&a&&r!==(r=t[10][0]+.5)&&$e(n,"cx",r),4&a&&o!==(o=t[10][1]+.5)&&$e(n,"cy",o),4&a&&l!==(l=t[11][0]+.5)&&$e(i,"cx",l),4&a&&s!==(s=t[11][1]+.5)&&$e(i,"cy",s)},d(e){e&&pe(n),e&&pe(i)}}}function oo(e,t){let n,r,o,i,l;return{key:e,first:null,c(){n=ve("path"),$e(n,"d",r=t[7]),$e(n,"fill","none"),$e(n,"stroke","#c18bb7"),$e(n,"stroke-opacity","0.95"),$e(n,"stroke-linejoin","round"),$e(n,"stroke-linecap","round"),$e(n,"stroke-width",ao),$e(n,"mask",o="url(#between-"+t[0]+"-mask)"),$e(n,"marker-start",i="url(#between-bulb-"+t[0]+")"),$e(n,"marker-end",l="url(#between-bulb-"+t[0]+")"),this.first=n},m(e,t){he(e,n,t)},p(e,s){t=e,4&s&&r!==(r=t[7])&&$e(n,"d",r),1&s&&o!==(o="url(#between-"+t[0]+"-mask)")&&$e(n,"mask",o),1&s&&i!==(i="url(#between-bulb-"+t[0]+")")&&$e(n,"marker-start",i),1&s&&l!==(l="url(#between-bulb-"+t[0]+")")&&$e(n,"marker-end",l)},d(e){e&&pe(n)}}}function io(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p=[],g=new Map,m=[],v=new Map,b=e[2];const y=e=>e[6];for(let t=0;t<b.length;t+=1){let n=no(e,b,t),r=y(n);g.set(r,p[t]=ro(r,n))}let w=e[2];const k=e=>e[6];for(let t=0;t<w.length;t+=1){let n=to(e,w,t),r=k(n);v.set(r,m[t]=oo(r,n))}return{c(){t=ve("marker"),n=ve("circle"),o=ye(),i=ve("mask"),l=ve("rect");for(let e=0;e<p.length;e+=1)p[e].c();f=ye(),h=ve("g");for(let e=0;e<m.length;e+=1)m[e].c();$e(n,"cx","0.5"),$e(n,"cy","0.5"),$e(n,"r",lo+.5*so),$e(n,"fill","#000"),$e(t,"id",r="between-bulb-"+e[0]),$e(t,"viewBox","0 0 1 1"),$e(t,"refX","0.5"),$e(t,"refY","0.5"),$e(t,"markerUnits","userSpaceOnUse"),$e(t,"markerWidth","1"),$e(t,"markerHeight","1"),$e(t,"orient","auto"),$e(l,"width",s=e[1].width),$e(l,"height",a=e[1].height),$e(l,"fill","#fff"),$e(i,"id",c="between-"+e[0]+"-mask"),$e(i,"maskUnits","userSpaceOnUse"),$e(i,"x","0"),$e(i,"y","0"),$e(i,"width",u=e[1].width),$e(i,"height",d=e[1].height),$e(h,"id",e[0])},m(e,r){he(e,t,r),fe(t,n),he(e,o,r),he(e,i,r),fe(i,l);for(let e=0;e<p.length;e+=1)p[e].m(i,null);he(e,f,r),he(e,h,r);for(let e=0;e<m.length;e+=1)m[e].m(h,null)},p(e,[n]){1&n&&r!==(r="between-bulb-"+e[0])&&$e(t,"id",r),2&n&&s!==(s=e[1].width)&&$e(l,"width",s),2&n&&a!==(a=e[1].height)&&$e(l,"height",a),4&n&&(b=e[2],p=Ze(p,n,y,1,e,b,g,i,Xe,ro,null,no)),1&n&&c!==(c="between-"+e[0]+"-mask")&&$e(i,"id",c),2&n&&u!==(u=e[1].width)&&$e(i,"width",u),2&n&&d!==(d=e[1].height)&&$e(i,"height",d),5&n&&(w=e[2],m=Ze(m,n,k,1,e,w,v,h,Xe,oo,null,to)),1&n&&$e(h,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t),e&&pe(o),e&&pe(i);for(let e=0;e<p.length;e+=1)p[e].d();e&&pe(f),e&&pe(h);for(let e=0;e<m.length;e+=1)m[e].d()}}}const lo=.375,so=.025,ao=.15;function co(e,t,n){let r,{id:o}=t,{ref:i}=t,{grid:l}=t;const s=st(i,(function(e){if(null==e)return[];const t=[];for(const[n,r]of Object.entries(e)){const e=u(r);t.push({head:d(e[0],l),tail:d(e[e.length-1],l),itemId:n,d:N(e,l)})}return t}));return oe(e,s,(e=>n(2,r=e))),e.$$set=e=>{"id"in e&&n(0,o=e.id),"ref"in e&&n(4,i=e.ref),"grid"in e&&n(1,l=e.grid)},[o,l,r,s,i]}function uo(e,t,n){const r=e.slice();return r[6]=t[n].thermoId,r[7]=t[n].d,r[8]=t[n].invalid,r}function fo(e){let t,n,r,o;return{c(){t=ve("path"),$e(t,"d",n=e[7]),$e(t,"fill","none"),$e(t,"stroke",r=e[8]&&!e[3]?"#fff":"#444"),$e(t,"stroke-width","0.2"),$e(t,"marker-start",o="url(#thermo-bulb-"+e[0]+")"),$e(t,"stroke-linejoin","round"),$e(t,"stroke-linecap","round")},m(e,n){he(e,t,n)},p(e,i){32&i&&n!==(n=e[7])&&$e(t,"d",n),40&i&&r!==(r=e[8]&&!e[3]?"#fff":"#444")&&$e(t,"stroke",r),1&i&&o!==(o="url(#thermo-bulb-"+e[0]+")")&&$e(t,"marker-start",o)},d(e){e&&pe(t)}}}function ho(e){let t,n,r,o,i,l;return{c(){t=ve("path"),r=ve("path"),$e(t,"d",n=e[7]),$e(t,"fill","none"),$e(t,"stroke","#111"),$e(t,"stroke-width","0.2"),$e(t,"stroke-linejoin","round"),$e(r,"d",o=e[7]),$e(r,"fill","none"),$e(r,"stroke","#444"),$e(r,"stroke-width","0.2"),$e(r,"marker-start",i="url(#slow-thermo-bulb-"+e[0]+")"),$e(r,"marker-end",l="url(#slow-thermo-endcap-"+e[0]+")"),$e(r,"stroke-linejoin","round"),$e(r,"stroke-dasharray","0.4 0.1"),$e(r,"stroke-dashoffset","0.2")},m(e,n){he(e,t,n),he(e,r,n)},p(e,s){32&s&&n!==(n=e[7])&&$e(t,"d",n),32&s&&o!==(o=e[7])&&$e(r,"d",o),1&s&&i!==(i="url(#slow-thermo-bulb-"+e[0]+")")&&$e(r,"marker-start",i),1&s&&l!==(l="url(#slow-thermo-endcap-"+e[0]+")")&&$e(r,"marker-end",l)},d(e){e&&pe(t),e&&pe(r)}}}function po(e,t){let n,r;function o(e,t){return e[3]?ho:fo}let i=o(t),l=i(t);return{key:e,first:null,c(){n=we(),l.c(),r=we(),this.first=n},m(e,t){he(e,n,t),l.m(e,t),he(e,r,t)},p(e,n){i===(i=o(t=e))&&l?l.p(t,n):(l.d(1),l=i(t),l&&(l.c(),l.m(r.parentNode,r)))},d(e){e&&pe(n),l.d(e),e&&pe(r)}}}function go(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v,b,y,w,k,x,_=[],$=new Map,T=e[4](e[5]||{});const M=e=>e[6];for(let t=0;t<T.length;t+=1){let n=uo(e,T,t),r=M(n);$.set(r,_[t]=po(r,n))}return{c(){t=ve("marker"),n=ve("circle"),o=ye(),i=ve("marker"),l=ve("path"),a=ye(),c=ve("marker"),u=ve("circle"),f=ye(),h=ve("mask");for(let e=0;e<_.length;e+=1)_[e].c();v=ye(),b=ve("g"),y=ve("rect"),$e(n,"cx","0.5"),$e(n,"cy","0.5"),$e(n,"r",mo),$e(n,"fill","#444"),$e(t,"id",r="thermo-bulb-"+e[0]),$e(t,"viewBox","0 0 1 1"),$e(t,"refX","0.5"),$e(t,"refY","0.5"),$e(t,"markerUnits","userSpaceOnUse"),$e(t,"markerWidth","1"),$e(t,"markerHeight","1"),$e(t,"orient","auto"),$e(l,"d","M0.35, 0.13 L0.65, 0.13 L0.86, 0.34 L0.86, 0.64 L0.64, 0.86 L0.35, 0.86 L0.13, 0.65 L0.13, 0.35 Z"),$e(l,"stroke","#444"),$e(l,"stroke-width","0.1"),$e(l,"stroke-alignment","inner"),$e(l,"fill","#222"),$e(i,"id",s="slow-thermo-bulb-"+e[0]),$e(i,"viewBox","0 0 1 1"),$e(i,"refX","0.5"),$e(i,"refY","0.5"),$e(i,"markerUnits","userSpaceOnUse"),$e(i,"markerWidth","1"),$e(i,"markerHeight","1"),$e(i,"orient","auto"),$e(u,"cx","0.5"),$e(u,"cy","0.5"),$e(u,"r","0.1"),$e(u,"fill","#444"),$e(c,"id",d="slow-thermo-endcap-"+e[0]),$e(c,"viewBox","0 0 1 1"),$e(c,"refX","0.5"),$e(c,"refY","0.5"),$e(c,"markerUnits","userSpaceOnUse"),$e(c,"markerWidth","1"),$e(c,"markerHeight","1"),$e(h,"id",p="thermo-"+e[0]+"-mask"),$e(h,"maskUnits","userSpaceOnUse"),$e(h,"x","0"),$e(h,"y","0"),$e(h,"width",g=e[2].width),$e(h,"height",m=e[2].height),$e(y,"x","0"),$e(y,"y","0"),$e(y,"width",w=e[2].width),$e(y,"height",k=e[2].height),$e(y,"fill","#888"),$e(y,"stroke","none"),$e(y,"mask",x="url(#thermo-"+e[0]+"-mask)"),$e(b,"id",e[0])},m(e,r){he(e,t,r),fe(t,n),he(e,o,r),he(e,i,r),fe(i,l),he(e,a,r),he(e,c,r),fe(c,u),he(e,f,r),he(e,h,r);for(let e=0;e<_.length;e+=1)_[e].m(h,null);he(e,v,r),he(e,b,r),fe(b,y)},p(e,[n]){1&n&&r!==(r="thermo-bulb-"+e[0])&&$e(t,"id",r),1&n&&s!==(s="slow-thermo-bulb-"+e[0])&&$e(i,"id",s),1&n&&d!==(d="slow-thermo-endcap-"+e[0])&&$e(c,"id",d),57&n&&(T=e[4](e[5]||{}),_=Ze(_,n,M,1,e,T,$,h,Xe,po,null,uo)),1&n&&p!==(p="thermo-"+e[0]+"-mask")&&$e(h,"id",p),4&n&&g!==(g=e[2].width)&&$e(h,"width",g),4&n&&m!==(m=e[2].height)&&$e(h,"height",m),4&n&&w!==(w=e[2].width)&&$e(y,"width",w),4&n&&k!==(k=e[2].height)&&$e(y,"height",k),1&n&&x!==(x="url(#thermo-"+e[0]+"-mask)")&&$e(y,"mask",x),1&n&&$e(b,"id",e[0])},i:Z,o:Z,d(e){e&&pe(t),e&&pe(o),e&&pe(i),e&&pe(a),e&&pe(c),e&&pe(f),e&&pe(h);for(let e=0;e<_.length;e+=1)_[e].d();e&&pe(v),e&&pe(b)}}}const mo=.375;function vo(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(5,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t,{isSlow:c=!1}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(2,a=e.grid),"isSlow"in e&&n(3,c=e.isSlow)},[l,s,a,c,function(e){const t=[];for(const[n,r]of Object.entries(e)){const e=u(r);t.push({thermoId:n,d:N(e,a,{shortenTail:.25,bezierRounding:.2}),invalid:e.length>a.width})}return t},r]}class bo extends rt{constructor(e){super(),nt(this,e,vo,go,ne,{id:0,ref:1,grid:2,isSlow:3,getThermos:4})}get getThermos(){return this.$$.ctx[4]}}function yo(e,t,n){const r=e.slice();return r[6]=t[n][0],r[7]=t[n][1],r}function wo(e,t){let n,r,o,i,l=t[7]+"";return{key:e,first:null,c(){n=ve("text"),r=be(l),$e(n,"x",o=d(+t[6],t[2])[0]+.5),$e(n,"y",i=d(+t[6],t[2])[1]+.5),$e(n,"fill",t[3]),$e(n,"text-anchor","middle"),$e(n,"dominant-baseline","central"),$e(n,"font-size","0.775"),$e(n,"font-weight","600"),this.first=n},m(e,t){he(e,n,t),fe(n,r)},p(e,s){t=e,32&s&&l!==(l=t[7]+"")&&Te(r,l),36&s&&o!==(o=d(+t[6],t[2])[0]+.5)&&$e(n,"x",o),36&s&&i!==(i=d(+t[6],t[2])[1]+.5)&&$e(n,"y",i),8&s&&$e(n,"fill",t[3])},d(e){e&&pe(n)}}}function ko(e){let t,n=[],r=new Map,o=Object.entries(e[5]||{});const i=e=>e[6];for(let t=0;t<o.length;t+=1){let l=yo(e,o,t),s=i(l);r.set(s,n[t]=wo(s,l))}return{c(){t=ve("g");for(let e=0;e<n.length;e+=1)n[e].c();$e(t,"id",e[0]),$e(t,"mask",e[4])},m(e,r){he(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[l]){44&l&&(o=Object.entries(e[5]||{}),n=Ze(n,l,i,1,e,o,r,t,Xe,wo,null,yo)),1&l&&$e(t,"id",e[0]),16&l&&$e(t,"mask",e[4])},i:Z,o:Z,d(e){e&&pe(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function xo(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(5,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t,{color:c="#000"}=t,{mask:u}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(2,a=e.grid),"color"in e&&n(3,c=e.color),"mask"in e&&n(4,u=e.mask)},[l,s,a,c,u,r]}class _o extends rt{constructor(e){super(),nt(this,e,xo,ko,ne,{id:0,ref:1,grid:2,color:3,mask:4})}}function $o(e){let t,n,r,o,i,l,s,c,u,d,f,h;return{c(){t=ve("pattern"),n=ve("rect"),c=ye(),u=ve("rect"),$e(n,"width",r=e[3].width),$e(n,"height",o=e[3].height),$e(n,"stroke","#000"),$e(n,"fill","none"),$e(n,"stroke-width",a),$e(t,"id",i="box-"+e[0]),$e(t,"width",l=e[3].width),$e(t,"height",s=e[3].height),$e(t,"patternUnits","userSpaceOnUse"),$e(u,"id",e[0]),$e(u,"x",-.02),$e(u,"y",-.02),$e(u,"width",d=e[2].width+a),$e(u,"height",f=e[2].height+a),$e(u,"fill",h="url(#box-"+e[0]+")"),$e(u,"stroke","none")},m(e,r){he(e,t,r),fe(t,n),he(e,c,r),he(e,u,r)},p(e,[c]){8&c&&r!==(r=e[3].width)&&$e(n,"width",r),8&c&&o!==(o=e[3].height)&&$e(n,"height",o),1&c&&i!==(i="box-"+e[0])&&$e(t,"id",i),8&c&&l!==(l=e[3].width)&&$e(t,"width",l),8&c&&s!==(s=e[3].height)&&$e(t,"height",s),1&c&&$e(u,"id",e[0]),4&c&&d!==(d=e[2].width+a)&&$e(u,"width",d),4&c&&f!==(f=e[2].height+a)&&$e(u,"height",f),1&c&&h!==(h="url(#box-"+e[0]+")")&&$e(u,"fill",h)},i:Z,o:Z,d(e){e&&pe(t),e&&pe(c),e&&pe(u)}}}function To(e,t,n){let r,o=Z,i=()=>(o(),o=re(s,(e=>n(3,r=e))),s);e.$$.on_destroy.push((()=>o()));let{id:l}=t,{ref:s}=t;i();let{grid:a}=t;return e.$$set=e=>{"id"in e&&n(0,l=e.id),"ref"in e&&i(n(1,s=e.ref)),"grid"in e&&n(2,a=e.grid)},[l,s,a,r]}function Mo(e){let t,n,r,o,i,a,c,u;return{c(){t=ve("pattern"),n=ve("rect"),o=ye(),i=ve("rect"),$e(n,"width","1"),$e(n,"height","1"),$e(n,"stroke","#000"),$e(n,"fill","none"),$e(n,"stroke-width",l),$e(t,"id",r="grid-"+e[0]),$e(t,"width","1"),$e(t,"height","1"),$e(t,"patternUnits","userSpaceOnUse"),$e(i,"id",e[0]),$e(i,"x",-.005),$e(i,"y",-.005),$e(i,"width",a=e[1].width+s),$e(i,"height",c=e[1].height+s),$e(i,"fill",u="url(#grid-"+e[0]+")"),$e(i,"stroke","none")},m(e,r){he(e,t,r),fe(t,n),he(e,o,r),he(e,i,r)},p(e,[n]){1&n&&r!==(r="grid-"+e[0])&&$e(t,"id",r),1&n&&$e(i,"id",e[0]),2&n&&a!==(a=e[1].width+s)&&$e(i,"width",a),2&n&&c!==(c=e[1].height+s)&&$e(i,"height",c),1&n&&u!==(u="url(#grid-"+e[0]+")")&&$e(i,"fill",u)},i:Z,o:Z,d(e){e&&pe(t),e&&pe(o),e&&pe(i)}}}function Ho(e,t,n){let{id:r}=t,{ref:o}=t,{grid:i}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"ref"in e&&n(2,o=e.ref),"grid"in e&&n(1,i=e.grid)},[r,i,o]}function Co(e){let t;return{c(){t=ve("path"),$e(t,"id",e[0]),$e(t,"d",e[1]),$e(t,"fill",Oo),$e(t,"stroke","none")},m(e,n){he(e,t,n)},p(e,[n]){1&n&&$e(t,"id",e[0]),2&n&&$e(t,"d",e[1])},i:Z,o:Z,d(e){e&&pe(t)}}}const Oo="#08f";function So(e,t,n){let r,{id:o}=t,{ref:i}=t,{grid:l}=t;const s=st(i,(e=>{if(null==e)return"";const[t,n]=d(e,l);return`M${t},${n}L${t+.2},${n}L${t},${n+.2}Z`}));return oe(e,s,(e=>n(1,r=e))),e.$$set=e=>{"id"in e&&n(0,o=e.id),"ref"in e&&n(3,i=e.ref),"grid"in e&&n(4,l=e.grid)},[o,r,s,i,l]}class Eo extends rt{constructor(e){super(),nt(this,e,So,Co,ne,{id:0,ref:3,grid:4})}}function Ao(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v,b,y,w,k;return{c(){t=ve("filter"),n=ve("feGaussianBlur"),r=ve("feComponentTransfer"),o=ve("feFuncR"),i=ve("feFuncG"),l=ve("feFuncB"),s=ve("feFuncA"),c=ye(),u=ve("mask"),d=ve("rect"),p=ve("path"),y=ye(),w=ve("path"),$e(n,"in","SourceGraphic"),$e(n,"stdDeviation",Io),$e(o,"type","identity"),$e(i,"type","identity"),$e(l,"type","identity"),$e(s,"type","linear"),$e(s,"slope","20"),$e(s,"intercept","-9.5"),$e(t,"id",a="select-"+e[0]+"-blur"),$e(d,"x","0"),$e(d,"y","0"),$e(d,"width",f=e[1].width),$e(d,"height",h=e[1].height),$e(d,"fill",e[3]),$e(p,"d",e[5]),$e(p,"fill",e[4]),$e(p,"stroke","none"),$e(p,"filter",g="url(#select-"+e[0]+"-blur)"),$e(u,"id",m="select-"+e[0]+"-mask"),$e(u,"maskUnits","userSpaceOnUse"),$e(u,"x","0"),$e(u,"y","0"),$e(u,"width",v=e[1].width),$e(u,"height",b=e[1].height),$e(w,"id",e[0]),$e(w,"d",e[6]),$e(w,"fill",e[2]),$e(w,"stroke","none"),$e(w,"mask",k="url(#select-"+e[0]+"-mask)")},m(e,a){he(e,t,a),fe(t,n),fe(t,r),fe(r,o),fe(r,i),fe(r,l),fe(r,s),he(e,c,a),he(e,u,a),fe(u,d),fe(u,p),he(e,y,a),he(e,w,a)},p(e,[n]){1&n&&a!==(a="select-"+e[0]+"-blur")&&$e(t,"id",a),2&n&&f!==(f=e[1].width)&&$e(d,"width",f),2&n&&h!==(h=e[1].height)&&$e(d,"height",h),8&n&&$e(d,"fill",e[3]),32&n&&$e(p,"d",e[5]),16&n&&$e(p,"fill",e[4]),1&n&&g!==(g="url(#select-"+e[0]+"-blur)")&&$e(p,"filter",g),1&n&&m!==(m="select-"+e[0]+"-mask")&&$e(u,"id",m),2&n&&v!==(v=e[1].width)&&$e(u,"width",v),2&n&&b!==(b=e[1].height)&&$e(u,"height",b),1&n&&$e(w,"id",e[0]),64&n&&$e(w,"d",e[6]),4&n&&$e(w,"fill",e[2]),1&n&&k!==(k="url(#select-"+e[0]+"-mask)")&&$e(w,"mask",k)},i:Z,o:Z,d(e){e&&pe(t),e&&pe(c),e&&pe(u),e&&pe(y),e&&pe(w)}}}const Io=.05;function Lo(e,t,n){let r,o,{id:i}=t,{ref:l}=t,{grid:s}=t,{fill:a="#08f"}=t,{outlineOpacity:c="#b2b2b2"}=t,{innerOpacity:u="#080808"}=t;const d=st(l,(e=>z(C(e),s,.075)||void 0));oe(e,d,(e=>n(5,r=e)));const f=st(l,(e=>z(C(e),s,0)||void 0));return oe(e,f,(e=>n(6,o=e))),e.$$set=e=>{"id"in e&&n(0,i=e.id),"ref"in e&&n(9,l=e.ref),"grid"in e&&n(1,s=e.grid),"fill"in e&&n(2,a=e.fill),"outlineOpacity"in e&&n(3,c=e.outlineOpacity),"innerOpacity"in e&&n(4,u=e.innerOpacity)},[i,s,a,c,u,r,o,d,f,l]}class jo extends rt{constructor(e){super(),nt(this,e,Lo,Ao,ne,{id:0,ref:9,grid:1,fill:2,outlineOpacity:3,innerOpacity:4})}}function Do(e,t,n){const r=e.slice();return r[16]=t[n].id,r}function No(e,t,n){const r=e.slice();return r[16]=t[n].id,r[19]=t[n].ref,r[20]=t[n].element,r}function Ro(e,t){let n,r,o,i;var l=t[20];function s(e){return{props:{id:e[16],ref:e[19],grid:e[2]}}}return l&&(r=new l(s(t))),{key:e,first:null,c(){n=we(),r&&Je(r.$$.fragment),o=we(),this.first=n},m(e,t){he(e,n,t),r&&Qe(r,e,t),he(e,o,t),i=!0},p(e,n){t=e;const i={};if(32&n&&(i.id=t[16]),32&n&&(i.ref=t[19]),4&n&&(i.grid=t[2]),l!==(l=t[20])){if(r){We();const e=r;Ye(e.$$.fragment,1,0,(()=>{et(e,1)})),Ve()}l?(r=new l(s(t)),Je(r.$$.fragment),qe(r.$$.fragment,1),Qe(r,o.parentNode,o)):r=null}else l&&r.$set(i)},i(e){i||(r&&qe(r.$$.fragment,e),i=!0)},o(e){r&&Ye(r.$$.fragment,e),i=!1},d(e){e&&pe(n),e&&pe(o),r&&et(r,e)}}}function Po(e,t){let n,r;return{key:e,first:null,c(){n=ve("use"),$e(n,"href",r="#"+t[16]),this.first=n},m(e,t){he(e,n,t)},p(e,o){t=e,32&o&&r!==(r="#"+t[16])&&$e(n,"href",r)},d(e){e&&pe(n)}}}function Uo(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v=[],b=new Map,y=[],w=new Map,k=e[5];const x=e=>e[16];for(let t=0;t<k.length;t+=1){let n=No(e,k,t),r=x(n);b.set(r,v[t]=Ro(r,n))}let _=e[5];const $=e=>e[16];for(let t=0;t<_.length;t+=1){let n=Do(e,_,t),r=$(n);w.set(r,y[t]=Po(r,n))}return{c(){t=ve("svg"),n=ve("style"),r=be("svg {\n            -webkit-tap-highlight-color: transparent;\n            touch-action: none;\n        }\n        text {\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }\n        text::selection {\n            background: none;\n        }\n        svg * {\n            pointer-events: none;\n        }\n        .hide {\n            display: none;\n        }\n    "),o=ve("defs"),i=ve("mask"),l=ve("rect"),c=ve("path"),u=ve("mask"),d=ve("rect"),p=ve("path");for(let e=0;e<v.length;e+=1)v[e].c();for(let e=0;e<y.length;e+=1)y[e].c();$e(l,"x","0"),$e(l,"y","0"),$e(l,"width",s=e[2].width),$e(l,"height",a=e[2].height),$e(l,"fill","#fff"),$e(c,"d",e[3]),$e(c,"fill","#000"),$e(c,"stroke","none"),$e(i,"id","SUDOKU_MASK_GIVENS"),$e(i,"maskUnits","userSpaceOnUse"),$e(d,"x","0"),$e(d,"y","0"),$e(d,"width",f=e[2].width),$e(d,"height",h=e[2].height),$e(d,"fill","#fff"),$e(p,"d",e[4]),$e(p,"fill","#000"),$e(p,"stroke","none"),$e(u,"id","SUDOKU_MASK_GIVENS_FILLED"),$e(u,"maskUnits","userSpaceOnUse"),$e(t,"viewBox",g=e[1].x+" "+e[1].y+" "+e[1].width+" "+e[1].height),$e(t,"xmlns","http://www.w3.org/2000/svg")},m(s,a){he(s,t,a),fe(t,n),fe(n,r),fe(t,o),fe(o,i),fe(i,l),fe(i,c),fe(o,u),fe(u,d),fe(u,p);for(let e=0;e<v.length;e+=1)v[e].m(o,null);for(let e=0;e<y.length;e+=1)y[e].m(t,null);e[14](t),m=!0},p(e,[n]){(!m||4&n&&s!==(s=e[2].width))&&$e(l,"width",s),(!m||4&n&&a!==(a=e[2].height))&&$e(l,"height",a),(!m||8&n)&&$e(c,"d",e[3]),(!m||4&n&&f!==(f=e[2].width))&&$e(d,"width",f),(!m||4&n&&h!==(h=e[2].height))&&$e(d,"height",h),(!m||16&n)&&$e(p,"d",e[4]),36&n&&(k=e[5],We(),v=Ze(v,n,x,1,e,k,b,o,Ke,Ro,null,No),Ve()),32&n&&(_=e[5],y=Ze(y,n,$,1,e,_,w,t,Xe,Po,null,Do)),(!m||2&n&&g!==(g=e[1].x+" "+e[1].y+" "+e[1].width+" "+e[1].height))&&$e(t,"viewBox",g)},i(e){if(!m){for(let e=0;e<k.length;e+=1)qe(v[e]);m=!0}},o(e){for(let e=0;e<v.length;e+=1)Ye(v[e]);m=!1},d(n){n&&pe(t);for(let e=0;e<v.length;e+=1)v[e].d();for(let e=0;e<y.length;e+=1)y[e].d();e[14](null)}}}function Go(e){return Object.assign(e.props,{fill:"#f33",outlineOpacity:"#eee",innerOpacity:"#333"}),new jo(e)}function zo(e){return Object.assign(e.props,{idx2coord:(e,t)=>{const[n,r]=function(e,{width:t,height:n}){const r=e>>2,o=1&e;return 2&e?[o*(1+t)-1,r]:[r,o*(1+n)-1]}(e,t);return[n+.5,r+.5]},radius:0,textColor:"#000",fontSize:.5,mapDigits:e=>!0!==e?e:"_"}),new In(e)}const Fo={select:jo,cursor:Eo,warning:Go,grid:class extends rt{constructor(e){super(),nt(this,e,Ho,Mo,ne,{id:0,ref:2,grid:1})}},box:class extends rt{constructor(e){super(),nt(this,e,To,$o,ne,{id:0,ref:1,grid:2})}},givens:_o,filled:function(e){return e.props.color="#4e72b0",e.props.mask="url(#SUDOKU_MASK_GIVENS)",new _o(e)},corner:class extends rt{constructor(e){super(),nt(this,e,Xn,Yn,ne,{id:0,ref:1,grid:4})}},center:class extends rt{constructor(e){super(),nt(this,e,Fn,zn,ne,{id:0,ref:1,grid:4})}},colors:class extends rt{constructor(e){super(),nt(this,e,Pn,Rn,ne,{id:0,ref:1,grid:4})}},thermo:bo,slowThermo:function(e){return Object.assign(e.props,{isSlow:!0}),new bo(e)},between:class extends rt{constructor(e){super(),nt(this,e,co,io,ne,{id:0,ref:4,grid:1})}},palindrome:function(e){return Object.assign(e.props,{stroke:"#c7855c",strokeWidth:.125}),new Vr(e)},whisper:function(e){return Object.assign(e.props,{stroke:"#8fcbcf",strokeWidth:.1,pathOptions:{shortenHead:0,shortenTail:0,bezierRounding:.1}}),new Vr(e)},renban:function(e){return Object.assign(e.props,{stroke:"#cfd184",strokeWidth:.075,pathOptions:{shortenHead:.15,shortenTail:.15,bezierRounding:.15}}),new Vr(e)},arrow:class extends rt{constructor(e){super(),nt(this,e,eo,Xr,ne,{id:0,ref:1,grid:2})}},min:class extends rt{constructor(e){super(),nt(this,e,Gr,Ur,ne,{id:0,ref:1,grid:2})}},max:class extends rt{constructor(e){super(),nt(this,e,Ir,Ar,ne,{id:0,ref:1,grid:2})}},odd:class extends rt{constructor(e){super(),nt(this,e,Tr,$r,ne,{id:0,ref:1,grid:4})}},even:class extends rt{constructor(e){super(),nt(this,e,kr,yr,ne,{id:0,ref:1,grid:5})}},killer:class extends rt{constructor(e){super(),nt(this,e,mr,fr,ne,{id:0,ref:1,grid:2})}},clone:class extends rt{constructor(e){super(),nt(this,e,vn,hn,ne,{id:0,ref:1,grid:4})}},quadruple:class extends rt{constructor(e){super(),nt(this,e,sr,nr,ne,{id:0,ref:1,grid:4})}},difference:function(e){return Object.assign(e.props,{idx2coord:y,stroke:"#242424",fill:"#fff",textColor:"#000",strokeWidth:.02}),new In(e)},ratio:function(e){return Object.assign(e.props,{idx2coord:y,stroke:"none",fill:"#000",textColor:"#fff"}),new In(e)},xv:function(e){return Object.assign(e.props,{idx2coord:y,stroke:"none",fill:"#fff",textColor:"#000",radius:.17,fontSize:.3,fontWeight:800,mapDigits:e=>!0!==e?Y(e):"_"}),new In(e)},littleKiller:class extends rt{constructor(e){super(),nt(this,e,Hn,xn,ne,{id:0,ref:1,grid:4})}},sandwich:zo,xsums:zo,skyscraper:zo,diagonal:class extends rt{constructor(e){super(),nt(this,e,Zn,Kn,ne,{id:0,ref:6,grid:1})}},knight:yn,king:yn,disjointGroups:yn,consecutive:yn,selfTaxicab:yn},Bo={grid:s,box:c,quadruple:.2225,sandwich:1,xsums:1,skyscraper:1,littleKiller:.9};function Wo(e,t,n){let r,o,i,l,s,{userState:a}=t,{warningState:c}=t,{boardState:u}=t,{svg:d=null}=t;const f=u.ref("grid");oe(e,f,(e=>n(2,o=e)));const h=u.ref("elements"),p=st([h,f],(([e,t])=>z(C(q(e||{},!0,!1)),t,0)||void 0));oe(e,p,(e=>n(3,i=e)));const g=st([h,f],(([e,t])=>z(C(q(e||{},!0,!0)),t,0)||void 0));oe(e,g,(e=>n(4,l=e)));const m=it([],(e=>{const t=[];null!=a&&t.push({id:"select_192839012",type:"select",order:95,ref:a.ref("select"),element:jo},{id:"cursor_192839012",type:"cursor",order:94,ref:a.ref("cursor"),element:Eo}),null!=c&&t.push({id:"warning_19282093",type:"warning",order:94,ref:c.ref("cells"),element:Go}),u.ref("elements/*").watch((([n,r],o,i)=>{let l=-1;if(null!=o){if(null==Fo[o.type])return;if(l=t.findIndex((({id:e})=>r===e)),0>l)return void console.error(`Failed to find renderer for constraint with id ${r}.`)}if(null==i)t.splice(l,1);else{const e=Fo[i.type];if(null==e)return void console.warn(`Cannot render unknown constraint type: ${i.type}.`);const s={id:r,type:i.type,order:i.order,ref:u.ref(n,r,"value"),element:e};null==o?t.push(s):(o.type!==i.type&&console.error("Cannot change type of constraint!"),t[l]=s)}t.sort(((e,t)=>e.order-t.order)),e(t)}),!0)}));oe(e,m,(e=>n(5,s=e)));const v=st([f,m],(([e,t])=>{const n=t.map((({type:e})=>Bo[e])).filter((e=>null!=e)).reduce(((e,t)=>e>t?e:t),0);return{x:-n,y:-n,width:e.width+2*n,height:e.height+2*n}}));return oe(e,v,(e=>n(1,r=e))),e.$$set=e=>{"userState"in e&&n(11,a=e.userState),"warningState"in e&&n(12,c=e.warningState),"boardState"in e&&n(13,u=e.boardState),"svg"in e&&n(0,d=e.svg)},[d,r,o,i,l,s,f,p,g,m,v,a,c,u,function(e){Ie[e?"unshift":"push"]((()=>{d=e,n(0,d)}))}]}class Vo extends rt{constructor(e){super(),nt(this,e,Wo,Uo,ne,{userState:11,warningState:12,boardState:13,svg:0})}}const qo=it([],(e=>{const t=[];ut.ref("elements/*").watch((([n,r],o,i)=>{const l=(null==o?void 0:o.type)||i.type,s=Dt[l];if(null==s)return void console.warn(`Unknown constraint type: ${l}.`);let a=-1;if(null!=o&&(a=t.findIndex((({id:e})=>r===e)),0>a))console.error(`Failed to find constraint with id ${r}.`);else{if(null==i)t.splice(a,1);else if(null==o){const e=ut.ref(n,r);t.push({id:r,elementRef:e,info:s})}else o.type!==i.type&&console.error(`Cannot change type of constraint! ${o.type} -> ${i.type}`);t.sort(((e,t)=>+(t.info.permanent||0)-+(e.info.permanent||0)||e.info.order-t.info.order)),e(t)}}),!0)}));ut.ref("elements").watch(((e,t,n)=>{if(null==n)return;const r=q(n),o={},i=dt.get();for(const{type:e,value:t}of Object.values(n)){const n=Dt[e];null!=n&&null!=n.getWarnings&&n.getWarnings(t,i,r,o)}ft.update({cells:o})}),!0);const Yo=st([it(null,(e=>{let t=[];qo.subscribe((e=>t=e)),bt.watch(((n,r,o)=>{const i=o,l=t.find((({id:e})=>i===e))||null;e(l)}),!0)})),at],(([e,t])=>{if(null==e)return null;const{info:n,elementRef:r}=e,o=r.ref("value");if(null==n||null==n.getInputHandler)return null;const i=n.getInputHandler(o,dt.get(),t);return i.load(),i}));function Xo(e){let t,n,r,o,i,l,s;function a(t){e[6](t)}let c={boardState:ut,userState:pt,warningState:ft};return void 0!==e[2]&&(c.svg=e[2]),r=new Vo({props:c}),Ie.push((()=>function(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}(r,"svg",a))),{c(){t=me("div"),n=ye(),Je(r.$$.fragment),$e(t,"class","overlay svelte-kdd1wn"),$e(t,"tabindex","0")},m(o,a){he(o,t,a),e[4](t),he(o,n,a),Qe(r,o,a),i=!0,l||(s=[ke(window,"blur",(function(){te(e[3](e[1],"blur"))&&e[3](e[1],"blur").apply(this,arguments)})),ke(window,"mouseup",(function(){te(e[3](e[1],"up"))&&e[3](e[1],"up").apply(this,arguments)})),ke(window,"keydown",(function(){te(e[3](e[1],"keydown"))&&e[3](e[1],"keydown").apply(this,arguments)})),ke(window,"keyup",(function(){te(e[3](e[1],"keyup"))&&e[3](e[1],"keyup").apply(this,arguments)})),ke(t,"mousedown",_e(xe(e[5])),!0),ke(t,"mousemove",_e(xe((function(){te(e[3](e[1],"move"))&&e[3](e[1],"move").apply(this,arguments)}))),!0),ke(t,"click",_e(xe((function(){te(e[3](e[1],"click"))&&e[3](e[1],"click").apply(this,arguments)}))),!0),ke(t,"contextmenu",_e(xe((function(){te(e[3](e[1],"click"))&&e[3](e[1],"click").apply(this,arguments)}))),!0),ke(t,"mouseleave",_e(xe((function(){te(e[3](e[1],"leave"))&&e[3](e[1],"leave").apply(this,arguments)}))),!0)],l=!0)},p(t,[n]){e=t;const i={};var l;!o&&4&n&&(o=!0,i.svg=e[2],l=()=>o=!1,je.push(l)),r.$set(i)},i(e){i||(qe(r.$$.fragment,e),i=!0)},o(e){Ye(r.$$.fragment,e),i=!1},d(o){o&&pe(t),e[4](null),o&&pe(n),et(r,o),l=!1,ee(s)}}}function Ko(e,t,n){let r,o,i;oe(e,ct,(e=>n(0,r=e))),oe(e,Yo,(e=>n(1,o=e))),oe(e,at,(e=>n(2,i=e)));return[r,o,i,function(e,t){return n=>{null==e||document.activeElement!==r&&document.activeElement!==document.body||e[t](n)}},function(e){Ie[e?"unshift":"push"]((()=>{r=e,ct.set(r)}))},e=>(e.currentTarget.focus(),o&&o.down(e)),function(e){i=e,at.set(i)}]}class Zo extends rt{constructor(e){super(),nt(this,e,Ko,Xo,ne,{})}}function Jo(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v;const b=e[6].default,y=ie(b,e,e[5],null);return{c(){t=me("div"),n=me("div"),r=me("button"),r.innerHTML='<span class="icon hoverable-icon icon-inline icon-c-clickable icon-add"></span>',o=ye(),i=me("span"),l=me("span"),a=ye(),c=be(e[2]),u=ye(),d=me("span"),f=ye(),h=me("div"),p=me("div"),y&&y.c(),$e(r,"class","delete-button nobutton hoverable svelte-1au0lhk"),$e(l,"class",s="icon hoverable-icon icon-inline icon-c-text icon-"+e[1]+" svelte-1au0lhk"),$e(d,"class","tree-menu icon icon-inline icon-c-clickable icon-tree-menu svelte-1au0lhk"),$e(n,"role","button"),$e(n,"tabindex","0"),$e(n,"class","section-title svelte-1au0lhk"),$e(p,"class","panel svelte-1au0lhk"),$e(h,"class","panel-wrapper svelte-1au0lhk"),$e(t,"class","container svelte-1au0lhk"),Ce(t,"closed",e[0])},m(s,b){he(s,t,b),fe(t,n),fe(n,r),fe(n,o),fe(n,i),fe(i,l),fe(i,a),fe(i,c),fe(n,u),fe(n,d),fe(t,f),fe(t,h),fe(h,p),y&&y.m(p,null),g=!0,m||(v=[ke(r,"click",_e((function(){te(e[3])&&e[3].apply(this,arguments)}))),ke(n,"click",e[4])],m=!0)},p(n,[r]){e=n,(!g||2&r&&s!==(s="icon hoverable-icon icon-inline icon-c-text icon-"+e[1]+" svelte-1au0lhk"))&&$e(l,"class",s),(!g||4&r)&&Te(c,e[2]),y&&y.p&&(!g||32&r)&&se(y,b,e,e[5],g?r:-1,null,null),1&r&&Ce(t,"closed",e[0])},i(e){g||(qe(y,e),g=!0)},o(e){Ye(y,e),g=!1},d(e){e&&pe(t),y&&y.d(e),m=!1,ee(v)}}}function Qo(e,t,n){let{$$slots:r={},$$scope:o}=t,{icon:i}=t,{title:l}=t,{closed:s=!1}=t,{onAdd:a}=t;return e.$$set=e=>{"icon"in e&&n(1,i=e.icon),"title"in e&&n(2,l=e.title),"closed"in e&&n(0,s=e.closed),"onAdd"in e&&n(3,a=e.onAdd),"$$scope"in e&&n(5,o=e.$$scope)},[s,i,l,a,function(){n(0,s=!s)},o,r]}class ei extends rt{constructor(e){super(),nt(this,e,Qo,Jo,ne,{icon:1,title:2,closed:0,onAdd:3})}}function ti(e){let t,n,r,o,i,l;return{c(){t=me("input"),r=ye(),o=me("button"),o.textContent="Jump To Board",$e(t,"class","radio-select-button svelte-1yj5trp"),$e(t,"type","radio"),$e(t,"id",n="local-radio-"+ ++li),t.__value=e[0],t.value=t.__value,$e(t,"name",yt),e[12][0].push(t),$e(o,"class","nobutton focus-skip")},m(n,s){he(n,t,s),t.checked=t.__value===e[7],he(n,r,s),he(n,o,s),i||(l=[ke(t,"change",e[11]),ke(o,"click",e[13])],i=!0)},p(e,n){1&n&&(t.__value=e[0],t.value=t.__value),128&n&&(t.checked=t.__value===e[7])},d(n){n&&pe(t),e[12][0].splice(e[12][0].indexOf(t),1),n&&pe(r),n&&pe(o),i=!1,ee(l)}}}function ni(e){let t,n,r;return{c(){t=me("button"),t.innerHTML='<span class="icon hoverable-icon icon-inline icon-c-clickable icon-trash"></span> \n                ',$e(t,"class","delete-button nobutton hoverable svelte-1yj5trp")},m(o,i){he(o,t,i),n||(r=ke(t,"click",_e((function(){te(e[6])&&e[6].apply(this,arguments)}))),n=!0)},p(t,n){e=t},d(e){e&&pe(t),n=!1,r()}}}function ri(e){let t,n;return{c(){t=me("span"),n=be(e[1]),$e(t,"class","name svelte-1yj5trp"),Ce(t,"unused",e[2])},m(e,r){he(e,t,r),fe(t,n)},p(e,r){2&r&&Te(n,e[1]),4&r&&Ce(t,"unused",e[2])},d(e){e&&pe(t)}}}function oi(e){let t,n;return{c(){t=me("label"),n=be(e[1]),$e(t,"class","name clickable svelte-1yj5trp"),$e(t,"for","local-radio-"+li),Ce(t,"unused",e[2])},m(e,r){he(e,t,r),fe(t,n)},p(e,r){2&r&&Te(n,e[1]),4&r&&Ce(t,"unused",e[2])},d(e){e&&pe(t)}}}function ii(e){let t,n,r,o,i,l,s,a,c,u,d=e[4]&&ti(e),f=e[3]&&ni(e);function h(e,t){return e[4]?oi:ri}let p=h(e),g=p(e);const m=e[10].default,v=ie(m,e,e[9],null);return{c(){t=me("div"),d&&d.c(),n=ye(),r=me("div"),o=me("div"),f&&f.c(),i=we(),g.c(),l=ye(),s=me("div"),v&&v.c(),$e(o,"class","constraint-row-left svelte-1yj5trp"),$e(s,"class","constraint-row-right svelte-1yj5trp"),$e(r,"class","constraint-row svelte-1yj5trp"),$e(r,"role","button"),$e(t,"class","constraint-row-container svelte-1yj5trp")},m(h,p){he(h,t,p),d&&d.m(t,null),fe(t,n),fe(t,r),fe(r,o),f&&f.m(o,null),fe(o,i),g.m(o,null),fe(r,l),fe(r,s),v&&v.m(s,null),a=!0,c||(u=ke(r,"click",_e((function(){te(e[5])&&e[5].apply(this,arguments)}))),c=!0)},p(r,[l]){(e=r)[4]?d?d.p(e,l):(d=ti(e),d.c(),d.m(t,n)):d&&(d.d(1),d=null),e[3]?f?f.p(e,l):(f=ni(e),f.c(),f.m(o,i)):f&&(f.d(1),f=null),p===(p=h(e))&&g?g.p(e,l):(g.d(1),g=p(e),g&&(g.c(),g.m(o,null))),v&&v.p&&(!a||512&l)&&se(v,m,e,e[9],a?l:-1,null,null)},i(e){a||(qe(v,e),a=!0)},o(e){Ye(v,e),a=!1},d(e){e&&pe(t),d&&d.d(),f&&f.d(),g.d(),v&&v.d(e),c=!1,u()}}}let li=0;function si(e,t,n){let r,o,i;oe(e,vt,(e=>n(14,r=e))),oe(e,bt,(e=>n(7,o=e))),oe(e,ct,(e=>n(8,i=e)));let{$$slots:l={},$$scope:s}=t,{id:a}=t,{name:c}=t,{unused:u}=t,{deletable:d}=t,{isLocal:f=!1}=t,{onClick:h=(f?()=>ae(vt,r=ae(bt,o=a,o),r):void 0)}=t,{onTrash:p}=t;return e.$$set=e=>{"id"in e&&n(0,a=e.id),"name"in e&&n(1,c=e.name),"unused"in e&&n(2,u=e.unused),"deletable"in e&&n(3,d=e.deletable),"isLocal"in e&&n(4,f=e.isLocal),"onClick"in e&&n(5,h=e.onClick),"onTrash"in e&&n(6,p=e.onTrash),"$$scope"in e&&n(9,s=e.$$scope)},[a,c,u,d,f,h,p,o,i,s,l,function(){o=this.__value,bt.set(o)},[[]],()=>i&&i.focus()]}class ai extends rt{constructor(e){super(),nt(this,e,si,ii,ne,{id:0,name:1,unused:2,deletable:3,isLocal:4,onClick:5,onTrash:6})}}function ci(e){let t,n;return{c(){t=me("span"),$e(t,"class",n="icon icon-inline icon-c-clickable icon-"+e[2].icon)},m(e,n){he(e,t,n)},p(e,r){4&r&&n!==(n="icon icon-inline icon-c-clickable icon-"+e[2].icon)&&$e(t,"class",n)},d(e){e&&pe(t)}}}function ui(e){let t,n;return t=new ai({props:{id:e[0],deletable:e[3],name:e[2].name,unused:!1,isLocal:!0,onTrash:e[4],$$slots:{default:[ci]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.id=e[0]),8&n&&(r.deletable=e[3]),4&n&&(r.name=e[2].name),2&n&&(r.onTrash=e[4]),36&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ye(t.$$.fragment,e),n=!1},d(e){et(t,e)}}}function di(e,t,n){let{id:r}=t,{elementRef:o}=t,{info:i}=t,{deletable:l}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"elementRef"in e&&n(1,o=e.elementRef),"info"in e&&n(2,i=e.info),"deletable"in e&&n(3,l=e.deletable)},[r,o,i,l,()=>o.replace(null)]}class fi extends rt{constructor(e){super(),nt(this,e,di,ui,ne,{id:0,elementRef:1,info:2,deletable:3})}}function hi(e){let t,n,r,o,i,l,s,a,c,u,d;return{c(){t=me("div"),n=me("label"),r=me("span"),i=ye(),l=me("span"),s=be(e[0]),a=ye(),c=me("input"),$e(r,"class",o="icon icon-inline icon-c-text icon-"+e[1]+" svelte-1ns67sk"),$e(l,"class","sr-only"),$e(n,"for","checkbox-"+ ++pi),$e(n,"title",e[0]),$e(n,"class","clickable"),$e(c,"id","checkbox-"+pi),$e(c,"type","checkbox"),$e(t,"class","constraint-checkbox svelte-1ns67sk")},m(o,f){he(o,t,f),fe(t,n),fe(n,r),fe(n,i),fe(n,l),fe(l,s),fe(t,a),fe(t,c),c.checked=e[3],u||(d=[ke(c,"change",e[5]),ke(t,"click",_e(e[4]))],u=!0)},p(e,[t]){2&t&&o!==(o="icon icon-inline icon-c-text icon-"+e[1]+" svelte-1ns67sk")&&$e(r,"class",o),1&t&&Te(s,e[0]),1&t&&$e(n,"title",e[0]),8&t&&(c.checked=e[3])},i:Z,o:Z,d(e){e&&pe(t),u=!1,ee(d)}}}let pi=0;function gi(e,t,n){let r,o=Z,i=()=>(o(),o=re(a,(e=>n(3,r=e))),a);e.$$.on_destroy.push((()=>o()));let{name:l}=t,{icon:s}=t,{checked:a}=t;return i(),e.$$set=e=>{"name"in e&&n(0,l=e.name),"icon"in e&&n(1,s=e.icon),"checked"in e&&i(n(2,a=e.checked))},[l,s,a,r,function(t){Ee.call(this,e,t)},function(){r=this.checked,a.set(r)}]}class mi extends rt{constructor(e){super(),nt(this,e,gi,hi,ne,{name:0,icon:1,checked:2})}}function vi(e,t,n){const r=e.slice();return r[9]=t[n].name,r[10]=t[n].icon,r[11]=t[n].refPath,r}function bi(e){let t,n;return t=new mi({props:{name:e[9],icon:e[10],checked:e[11]?e[5].ref(e[11]):e[5]}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.name=e[9]),4&n&&(r.icon=e[10]),4&n&&(r.checked=e[11]?e[5].ref(e[11]):e[5]),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ye(t.$$.fragment,e),n=!1},d(e){et(t,e)}}}function yi(e){let t,n,r=Array.isArray(e[2].checkbox)?e[2].checkbox:[e[2].checkbox],o=[];for(let t=0;t<r.length;t+=1)o[t]=bi(vi(e,r,t));const i=e=>Ye(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=we()},m(e,r){for(let t=0;t<o.length;t+=1)o[t].m(e,r);he(e,t,r),n=!0},p(e,n){if(36&n){let l;for(r=Array.isArray(e[2].checkbox)?e[2].checkbox:[e[2].checkbox],l=0;l<r.length;l+=1){const i=vi(e,r,l);o[l]?(o[l].p(i,n),qe(o[l],1)):(o[l]=bi(i),o[l].c(),qe(o[l],1),o[l].m(t.parentNode,t))}for(We(),l=r.length;l<o.length;l+=1)i(l);Ve()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)qe(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Ye(o[e]);n=!1},d(e){ge(o,e),e&&pe(t)}}}function wi(e){let t,n;return t=new ai({props:{id:e[0],deletable:e[3],name:e[2].name,unused:e[7](e[4]),onClick:e[6],onTrash:e[8],$$slots:{default:[yi]},$$scope:{ctx:e}}}),{c(){Je(t.$$.fragment)},m(e,r){Qe(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.id=e[0]),8&n&&(r.deletable=e[3]),4&n&&(r.name=e[2].name),16&n&&(r.unused=e[7](e[4])),2&n&&(r.onTrash=e[8]),16388&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ye(t.$$.fragment,e),n=!1},d(e){et(t,e)}}}function ki(e,t,n){let r,{id:o}=t,{elementRef:i}=t,{info:l}=t,{deletable:s}=t;const a=i.ref("value");oe(e,a,(e=>n(4,r=e)));return e.$$set=e=>{"id"in e&&n(0,o=e.id),"elementRef"in e&&n(1,i=e.elementRef),"info"in e&&n(2,l=e.info),"deletable"in e&&n(3,s=e.deletable)},[o,i,l,s,r,a,function(){if(Array.isArray(l.checkbox)){const e=l.checkbox.some((({refPath:e})=>!a.ref(e).get())),t={};for(const{refPath:n}of l.checkbox)t[n]=e;xt(a.replace(t))}else{xt(a.replace(!a.get()))}},function(e){return Array.isArray(l.checkbox)?l.checkbox.every((({refPath:e})=>!a.ref(e).get())):!e},()=>i.replace(null)]}class xi extends rt{constructor(e){super(),nt(this,e,ki,wi,ne,{id:0,elementRef:1,info:2,deletable:3})}}function _i(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v=e[1]?"Running...":"Idle",b=e[1]?"Stop":"Run";return{c(){t=me("div"),n=me("div"),r=be(v),o=ye(),i=me("div"),l=me("input"),s=ye(),a=me("label"),a.textContent="Auto",c=ye(),u=me("button"),d=be(b),f=ye(),h=me("div"),p=be(e[2]),$e(n,"class","solver-row svelte-6cak3z"),$e(l,"id","sat-solver-autorun"),$e(l,"type","checkbox"),$e(l,"name","autorun"),$e(a,"for","sat-solver-autorun"),He(u,"margin-left","2em"),$e(i,"class","solver-row svelte-6cak3z"),$e(h,"class","solver-row svelte-6cak3z"),$e(t,"class","solver-row-container svelte-6cak3z")},m(v,b){he(v,t,b),fe(t,n),fe(n,r),fe(t,o),fe(t,i),fe(i,l),l.checked=e[0],fe(i,s),fe(i,a),fe(i,c),fe(i,u),fe(u,d),fe(t,f),fe(t,h),fe(h,p),g||(m=[ke(l,"change",e[4]),ke(u,"click",e[3])],g=!0)},p(e,[t]){2&t&&v!==(v=e[1]?"Running...":"Idle")&&Te(r,v),1&t&&(l.checked=e[0]),2&t&&b!==(b=e[1]?"Stop":"Run")&&Te(d,b),4&t&&Te(p,e[2])},i:Z,o:Z,d(e){e&&pe(t),g=!1,ee(m)}}}function $i(e,n,r){var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function l(e){try{a(r.next(e))}catch(e){i(e)}}function s(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}a((r=r.apply(e,t||[])).next())}))};let l=!1,s=null,a=!1,c=null,u="Solutions: ?";function d(){return o(this,void 0,void 0,(function*(){if(a)return;const e=ut.get(),t=yield sn.cantAttempt(e);if(t)return r(2,u="Cannot solve: "+t),void r(1,a=!1);const n=Date.now();r(1,a=!0),s=0,r(2,u="Solutions: ?"),c=sn.solve(e,10,(t=>{if(null==s)return void console.warn("solutions null");const o=Date.now()-n+" ms";null==t?(r(2,u=`Solutions: ${s<10?"":""}${s} (${o})`),r(1,a=!1),c=null):(s++,r(2,u=`Solutions: ${s} (${o})`),console.log(`Solution ${s}:\n${i(t,e.grid)}`))}))}))}return ut.watch(t.debounce(((e,t,n)=>o(void 0,void 0,void 0,(function*(){if(l){(yield function(){return o(this,void 0,void 0,(function*(){if(!a||null==c)return!0;const e=yield c();return e&&(r(1,a=!1),c=null),e}))}())&&(yield d())}}))),500),!0,"elements/*"),[l,a,u,function(){return o(this,void 0,void 0,(function*(){a&&c?(yield c())&&(r(1,a=!1),c=null):d()}))},function(){l=this.checked,r(0,l)}]}class Ti extends rt{constructor(e){super(),nt(this,e,$i,_i,ne,{})}}function Mi(e,t,n){const r=e.slice();return r[8]=t[n].id,r[9]=t[n].elementRef,r[10]=t[n].info,r}function Hi(e,t,n){const r=e.slice();return r[8]=t[n].id,r[9]=t[n].elementRef,r[10]=t[n].info,r}function Ci(e){let t,n,r,o;return r=new Ti({}),{c(){t=me("ul"),n=me("li"),Je(r.$$.fragment),$e(t,"class","nolist")},m(e,i){he(e,t,i),fe(t,n),Qe(r,n,null),o=!0},i(e){o||(qe(r.$$.fragment,e),o=!0)},o(e){Ye(r.$$.fragment,e),o=!1},d(e){e&&pe(t),et(r)}}}function Oi(e){let t;return{c(){t=me("li"),t.innerHTML='<div class="empty-placeholder svelte-1hnsx93">Nothing here!</div>'},m(e,n){he(e,t,n)},d(e){e&&pe(t)}}}function Si(e,t){let n,r,o,i;var l=t[4](t[10]);function s(e){return{props:{id:e[8],elementRef:e[9],deletable:!e[10].permanent}}}return l&&(r=new l(s(t))),{key:e,first:null,c(){n=me("li"),r&&Je(r.$$.fragment),o=ye(),this.first=n},m(e,t){he(e,n,t),r&&Qe(r,n,null),fe(n,o),i=!0},p(e,i){t=e;const a={};if(1&i&&(a.id=t[8]),1&i&&(a.elementRef=t[9]),1&i&&(a.deletable=!t[10].permanent),l!==(l=t[4](t[10]))){if(r){We();const e=r;Ye(e.$$.fragment,1,0,(()=>{et(e,1)})),Ve()}l?(r=new l(s(t)),Je(r.$$.fragment),qe(r.$$.fragment,1),Qe(r,n,o)):r=null}else l&&r.$set(a)},i(e){i||(r&&qe(r.$$.fragment,e),i=!0)},o(e){r&&Ye(r.$$.fragment,e),i=!1},d(e){e&&pe(n),r&&et(r)}}}function Ei(e){let t,n,r=[],o=new Map,i=e[0];const l=e=>e[8];for(let t=0;t<i.length;t+=1){let n=Hi(e,i,t),s=l(n);o.set(s,r[t]=Si(s,n))}let s=null;return i.length||(s=Oi()),{c(){t=me("ul");for(let e=0;e<r.length;e+=1)r[e].c();s&&s.c(),$e(t,"class","nolist")},m(e,o){he(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);s&&s.m(t,null),n=!0},p(e,n){17&n&&(i=e[0],We(),r=Ze(r,n,l,1,e,i,o,t,Ke,Si,null,Hi),Ve(),i.length?s&&(s.d(1),s=null):s||(s=Oi(),s.c(),s.m(t,null)))},i(e){if(!n){for(let e=0;e<i.length;e+=1)qe(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)Ye(r[e]);n=!1},d(e){e&&pe(t);for(let e=0;e<r.length;e+=1)r[e].d();s&&s.d()}}}function Ai(e){let t;return{c(){t=me("li"),t.innerHTML='<div class="empty-placeholder svelte-1hnsx93">Nothing here!</div>'},m(e,n){he(e,t,n)},d(e){e&&pe(t)}}}function Ii(e,t){let n,r,o,i;var l=t[4](t[10]);function s(e){return{props:{id:e[8],elementRef:e[9],deletable:!e[10].permanent}}}return l&&(r=new l(s(t))),{key:e,first:null,c(){n=me("li"),r&&Je(r.$$.fragment),o=ye(),this.first=n},m(e,t){he(e,n,t),r&&Qe(r,n,null),fe(n,o),i=!0},p(e,i){t=e;const a={};if(2&i&&(a.id=t[8]),2&i&&(a.elementRef=t[9]),2&i&&(a.deletable=!t[10].permanent),l!==(l=t[4](t[10]))){if(r){We();const e=r;Ye(e.$$.fragment,1,0,(()=>{et(e,1)})),Ve()}l?(r=new l(s(t)),Je(r.$$.fragment),qe(r.$$.fragment,1),Qe(r,n,o)):r=null}else l&&r.$set(a)},i(e){i||(r&&qe(r.$$.fragment,e),i=!0)},o(e){r&&Ye(r.$$.fragment,e),i=!1},d(e){e&&pe(n),r&&et(r)}}}function Li(e){let t,n,r=[],o=new Map,i=e[1];const l=e=>e[8];for(let t=0;t<i.length;t+=1){let n=Mi(e,i,t),s=l(n);o.set(s,r[t]=Ii(s,n))}let s=null;return i.length||(s=Ai()),{c(){t=me("ul");for(let e=0;e<r.length;e+=1)r[e].c();s&&s.c(),$e(t,"class","nolist")},m(e,o){he(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);s&&s.m(t,null),n=!0},p(e,n){18&n&&(i=e[1],We(),r=Ze(r,n,l,1,e,i,o,t,Ke,Ii,null,Mi),Ve(),i.length?s&&(s.d(1),s=null):s||(s=Ai(),s.c(),s.m(t,null)))},i(e){if(!n){for(let e=0;e<i.length;e+=1)qe(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)Ye(r[e]);n=!1},d(e){e&&pe(t);for(let e=0;e<r.length;e+=1)r[e].d();s&&s.d()}}}function ji(e){let t;return{c(){t=me("div"),t.textContent="Nothing here!",$e(t,"class","empty-placeholder svelte-1hnsx93")},m(e,n){he(e,t,n)},d(e){e&&pe(t)}}}function Di(e){let t,n,r,o,i,l,s,a,c,u,d,f,h;return r=new ei({props:{icon:"computer",title:"Solver Panel",$$slots:{default:[Ci]},$$scope:{ctx:e}}}),l=new ei({props:{icon:"globe",title:"Global Constraints",onAdd:e[6],$$slots:{default:[Ei]},$$scope:{ctx:e}}}),c=new ei({props:{icon:"location",title:"Local Constraints",onAdd:e[7],$$slots:{default:[Li]},$$scope:{ctx:e}}}),f=new ei({props:{icon:"pencil",title:"Cosmetic Tools",$$slots:{default:[ji]},$$scope:{ctx:e}}}),{c(){t=me("ul"),n=me("li"),Je(r.$$.fragment),o=ye(),i=me("li"),Je(l.$$.fragment),s=ye(),a=me("li"),Je(c.$$.fragment),u=ye(),d=me("li"),Je(f.$$.fragment),$e(t,"class","nolist")},m(e,p){he(e,t,p),fe(t,n),Qe(r,n,null),fe(t,o),fe(t,i),Qe(l,i,null),fe(t,s),fe(t,a),Qe(c,a,null),fe(t,u),fe(t,d),Qe(f,d,null),h=!0},p(e,[t]){const n={};32768&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);const o={};32769&t&&(o.$$scope={dirty:t,ctx:e}),l.$set(o);const i={};32770&t&&(i.$$scope={dirty:t,ctx:e}),c.$set(i);const s={};32768&t&&(s.$$scope={dirty:t,ctx:e}),f.$set(s)},i(e){h||(qe(r.$$.fragment,e),qe(l.$$.fragment,e),qe(c.$$.fragment,e),qe(f.$$.fragment,e),h=!0)},o(e){Ye(r.$$.fragment,e),Ye(l.$$.fragment,e),Ye(c.$$.fragment,e),Ye(f.$$.fragment,e),h=!1},d(e){e&&pe(t),et(r),et(l),et(c),et(f)}}}function Ni(e,t,n){let r,o;const i=st(qo,(e=>e.filter((({info:e})=>e.menu&&e.inGlobalMenu))));oe(e,i,(e=>n(0,r=e)));const l=st(qo,(e=>e.filter((({info:e})=>e.menu&&!e.inGlobalMenu))));function s(e){const t=window.prompt("TEMPORARY. Enter element type string:\n"+Object.keys(Dt).join(", "));if(null!=t)try{!function(e,t){var n;const r=Nt(e,t);if(!(e in Dt))throw Error(`Cannot add unknown element type: ${e}.`);const o=Dt[e];if(null==o)throw Error(`Cannot add unimplmeneted element type: ${e}.`);const i=wt();xt(ut.update({[`elements/${i}`]:r})),"select"===(null===(n=o.menu)||void 0===n?void 0:n.type)&&(bt.replace(i),vt.replace(i))}(t)}catch(e){alert(`Unknown or unimplemented element type string: ${JSON.stringify(t)}`)}}oe(e,l,(e=>n(1,o=e)));return[r,o,i,l,function(e){const t=e.menu;return null==t?null:function(e){if("select"===t.type)return e.props.info=t,new fi(e);if("checkbox"===t.type)return e.props.info=t,new xi(e);throw Error(`Unknown menu type "${t.type}".`)}},s,()=>s(),()=>s()]}class Ri extends rt{constructor(e){super(),nt(this,e,Ni,Di,ne,{})}}var Pi;
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var Ui=function(e,t){return(Ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Gi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ui(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var zi=function(){return(zi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Fi(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}function Bi(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */var Wi=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),Vi=function(){function e(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.root=e,this.initialize.apply(this,Bi([],Fi(n))),this.foundation=void 0===t?this.getDefaultFoundation():t,this.foundation.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new Wi({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation.destroy()},e.prototype.listen=function(e,t,n){this.root.addEventListener(e,t,n)},e.prototype.unlisten=function(e,t,n){this.root.removeEventListener(e,t,n)},e.prototype.emit=function(e,t,n){var r;void 0===n&&(n=!1),"function"==typeof CustomEvent?r=new CustomEvent(e,{bubbles:n,detail:t}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,n,!1,t),this.root.dispatchEvent(r)},e}();
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
/**
   * @license
   * Copyright 2019 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
function qi(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},r=function(){};e.document.addEventListener("test",r,n),e.document.removeEventListener("test",r,n)}catch(e){t=!1}return t}
/**
   * @license
   * Copyright 2018 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */(e)&&{passive:!0}}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
var Yi={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Xi={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Ki={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},Zi=["touchstart","pointerdown","mousedown","keydown"],Ji=["touchend","pointerup","mouseup","contextmenu"],Qi=[],el=function(e){function t(n){var r=e.call(this,zi(zi({},t.defaultAdapter),n))||this;return r.activationAnimationHasEnded_=!1,r.activationTimer_=0,r.fgDeactivationRemovalTimer_=0,r.fgScale_="0",r.frame_={width:0,height:0},r.initialSize_=0,r.layoutFrame_=0,r.maxRadius_=0,r.unboundedCoords_={left:0,top:0},r.activationState_=r.defaultActivationState_(),r.activationTimerCallback_=function(){r.activationAnimationHasEnded_=!0,r.runDeactivationUXLogicIfReady_()},r.activateHandler_=function(e){return r.activate_(e)},r.deactivateHandler_=function(){return r.deactivate_()},r.focusHandler_=function(){return r.handleFocus()},r.blurHandler_=function(){return r.handleBlur()},r.resizeHandler_=function(){return r.layout()},r}return Gi(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Yi},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Xi},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ki},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var r=t.cssClasses,o=r.ROOT,i=r.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(o),e.adapter.isUnbounded()&&(e.adapter.addClass(i),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,r=n.ROOT,o=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(r),e.adapter.removeClass(o),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(Zi.forEach((function(e){t.adapter.registerInteractionHandler(e,t.activateHandler_)})),this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler_)),this.adapter.registerInteractionHandler("focus",this.focusHandler_),this.adapter.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter.registerInteractionHandler("keyup",this.deactivateHandler_):Ji.forEach((function(e){t.adapter.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;Zi.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler_),Ji.forEach((function(t){e.adapter.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var r=this.previousActivationEvent_;if(!(r&&void 0!==e&&r.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&Qi.length>0&&Qi.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(Qi.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){Qi=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,r=n.VAR_FG_TRANSLATE_START,o=n.VAR_FG_TRANSLATE_END,i=t.cssClasses,l=i.FG_DEACTIVATION,s=i.FG_ACTIVATION,a=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var c="",u="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates_(),f=d.startPoint,h=d.endPoint;c=f.x+"px, "+f.y+"px",u=h.x+"px, "+h.y+"px"}this.adapter.updateCssVariable(r,c),this.adapter.updateCssVariable(o,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter.removeClass(l),this.adapter.computeBoundingRect(),this.adapter.addClass(s),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),a)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var r,o,i=t.x,l=t.y,s=i+n.left,a=l+n.top;if("touchstart"===e.type){var c=e;r=c.changedTouches[0].pageX-s,o=c.changedTouches[0].pageY-a}else{var u=e;r=u.pageX-s,o=u.pageY-a}return{x:r,y:o}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,r=this.activationState_,o=r.hasDeactivationUXRun,i=r.isActivated;(o||!i)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter.removeClass(n)}),Ki.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=zi({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var r=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&r%2!=0?this.initialSize_=r-1:this.initialSize_=r,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,r=e.VAR_LEFT,o=e.VAR_TOP,i=e.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize_+"px"),this.adapter.updateCssVariable(i,this.fgScale_),this.adapter.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter.updateCssVariable(r,this.unboundedCoords_.left+"px"),this.adapter.updateCssVariable(o,this.unboundedCoords_.top+"px"))},t}(Wi),tl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return Gi(t,e),t.attachTo=function(e,n){void 0===n&&(n={isUnbounded:void 0});var r=new t(e);return void 0!==n.isUnbounded&&(r.unbounded=n.isUnbounded),r},t.createAdapter=function(e){return{addClass:function(t){return e.root.classList.add(t)},browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var n,r=e.CSS;if("boolean"==typeof Pi&&!t)return Pi;if(!r||"function"!=typeof r.supports)return!1;var o=r.supports("--css-vars","yes"),i=r.supports("(--css-vars: yes)")&&r.supports("color","#00000000");return n=o||i,t||(Pi=n),n}(window)},computeBoundingRect:function(){return e.root.getBoundingClientRect()},containsEventTarget:function(t){return e.root.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,qi())},deregisterInteractionHandler:function(t,n){return e.root.removeEventListener(t,n,qi())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return function(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}(e.root,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,qi())},registerInteractionHandler:function(t,n){return e.root.addEventListener(t,n,qi())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root.classList.remove(t)},updateCssVariable:function(t,n){return e.root.style.setProperty(t,n)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!1,configurable:!0}),t.prototype.activate=function(){this.foundation.activate()},t.prototype.deactivate=function(){this.foundation.deactivate()},t.prototype.layout=function(){this.foundation.layout()},t.prototype.getDefaultFoundation=function(){return new el(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation.setUnbounded(Boolean(this.unbounded_))},t}(Vi);function nl(e){let t,n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v,b,y,w,k,x,_,$,T,M,H,C,O,S,E,A,I,L,j,D,N,R,P,U,G,z,F,B,W,V,q,Y,X,K,J,Q,ne,re,oe,ie;return{c(){t=me("div"),n=me("div"),r=me("div"),o=me("div"),i=me("input"),l=ye(),s=me("label"),s.innerHTML='<span aria-hidden="true">1</span> \n                    <span class="sr-only">Digits</span>',a=ye(),c=me("div"),u=me("input"),d=ye(),f=me("label"),f.innerHTML='<span aria-hidden="true" style="font-size: 50%;"><span style="position: absolute; top:    12%; left:  20%;">1</span> \n                        <span style="position: absolute; top:    12%; right: 20%;">2</span> \n                        <span style="position: absolute; bottom: 12%; left:  20%;">3</span></span> \n                    <span class="sr-only">Corner Marks</span>',h=ye(),p=me("div"),g=me("input"),m=ye(),v=me("label"),v.innerHTML='<span aria-hidden="true" style="font-size: 50%;">123</span> \n                    <span class="sr-only">Center Marks</span>',b=ye(),y=me("div"),w=me("input"),k=ye(),x=me("label"),x.innerHTML='<span class="icon icon-inline icon-c-textinv icon-colors svelte-hmnhaq"></span> \n                    <span class="sr-only">Colors</span>',_=ye(),$=me("div"),T=me("div"),M=me("div"),H=me("button"),H.textContent="1",C=ye(),O=me("button"),O.textContent="2",S=ye(),E=me("button"),E.textContent="3",A=ye(),I=me("button"),I.textContent="4",L=ye(),j=me("button"),j.textContent="5",D=ye(),N=me("button"),N.textContent="6",R=ye(),P=me("button"),P.textContent="7",U=ye(),G=me("button"),G.textContent="8",z=ye(),F=me("button"),F.textContent="9",B=ye(),W=me("button"),W.textContent="0",V=ye(),q=me("button"),q.innerHTML='<span class="icon icon-inline icon-c-textinv icon-delete"></span>',Y=ye(),X=me("div"),K=me("button"),K.innerHTML='<span class="icon icon-inline icon-c-textinv icon-undo"></span>',J=ye(),Q=me("button"),Q.innerHTML='<span class="icon icon-inline icon-c-textinv icon-undo redo"></span>',ne=ye(),re=me("button"),re.innerHTML='<span class="icon icon-inline icon-c-textinv icon-screenshot"></span>',$e(i,"class","radio-mode-button svelte-hmnhaq"),$e(i,"type","radio"),$e(i,"name",yt),$e(i,"id","mode-radio-digits"),i.__value=e[0],i.value=i.__value,e[13][0].push(i),$e(s,"class","mdc-ripple-surface padbutton padbutton-mode svelte-hmnhaq"),$e(s,"role","button"),$e(s,"for","mode-radio-digits"),$e(o,"class","svelte-hmnhaq"),$e(u,"class","radio-mode-button svelte-hmnhaq"),$e(u,"type","radio"),$e(u,"name",yt),$e(u,"id","mode-radio-corner"),u.__value=e[2],u.value=u.__value,e[13][0].push(u),$e(f,"class","mdc-ripple-surface padbutton padbutton-mode svelte-hmnhaq"),$e(f,"role","button"),$e(f,"for","mode-radio-corner"),$e(c,"class","svelte-hmnhaq"),$e(g,"class","radio-mode-button svelte-hmnhaq"),$e(g,"type","radio"),$e(g,"name",yt),$e(g,"id","mode-radio-center"),g.__value=e[3],g.value=g.__value,e[13][0].push(g),$e(v,"class","mdc-ripple-surface padbutton padbutton-mode svelte-hmnhaq"),$e(v,"role","button"),$e(v,"for","mode-radio-center"),$e(p,"class","svelte-hmnhaq"),$e(w,"class","radio-mode-button svelte-hmnhaq"),$e(w,"type","radio"),$e(w,"name",yt),$e(w,"id","mode-radio-colors"),w.__value=e[4],w.value=w.__value,e[13][0].push(w),$e(x,"class","mdc-ripple-surface padbutton padbutton-mode svelte-hmnhaq"),$e(x,"role","button"),$e(x,"for","mode-radio-colors"),$e(y,"class","svelte-hmnhaq"),$e(r,"class","mode-pad svelte-hmnhaq"),$e(n,"class","mode-pad-container svelte-hmnhaq"),$e(H,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(H,"grid-area","1 / 1 / 2 / 2"),H.value="1",$e(O,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(O,"grid-area","1 / 2 / 2 / 3"),O.value="2",$e(E,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(E,"grid-area","1 / 3 / 2 / 4"),E.value="3",$e(I,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(I,"grid-area","2 / 1 / 3 / 2"),I.value="4",$e(j,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(j,"grid-area","2 / 2 / 3 / 3"),j.value="5",$e(N,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(N,"grid-area","2 / 3 / 3 / 4"),N.value="6",$e(P,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(P,"grid-area","3 / 1 / 4 / 2"),P.value="7",$e(G,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(G,"grid-area","3 / 2 / 4 / 3"),G.value="8",$e(F,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(F,"grid-area","3 / 3 / 4 / 4"),F.value="9",$e(W,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(W,"grid-area","4 / 1 / 5 / 2"),W.value="0",$e(q,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),He(q,"grid-area","4 / 2 / 5 / 4"),q.value="Delete",$e(q,"title","Delete"),$e(q,"aria-label","Delete"),$e(M,"class","num-pad svelte-hmnhaq"),$e(K,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),$e(K,"title","Undo"),$e(K,"aria-label","Undo"),$e(Q,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),$e(Q,"title","Redo"),$e(Q,"aria-label","Redo"),$e(re,"class","mdc-ripple-surface padbutton svelte-hmnhaq"),$e(re,"title","Take Screenshot"),$e(re,"aria-label","Take Screenshot"),$e(X,"class","ctrl-pad svelte-hmnhaq"),$e(T,"class","right svelte-hmnhaq"),$e($,"class","right-container svelte-hmnhaq"),$e(t,"class","container svelte-hmnhaq")},m(Z,ee){he(Z,t,ee),fe(t,n),fe(n,r),fe(r,o),fe(o,i),i.checked=i.__value===e[1],fe(o,l),fe(o,s),fe(r,a),fe(r,c),fe(c,u),u.checked=u.__value===e[1],fe(c,d),fe(c,f),fe(r,h),fe(r,p),fe(p,g),g.checked=g.__value===e[1],fe(p,m),fe(p,v),fe(r,b),fe(r,y),fe(y,w),w.checked=w.__value===e[1],fe(y,k),fe(y,x),fe(t,_),fe(t,$),fe($,T),fe(T,M),fe(M,H),fe(M,C),fe(M,O),fe(M,S),fe(M,E),fe(M,A),fe(M,I),fe(M,L),fe(M,j),fe(M,D),fe(M,N),fe(M,R),fe(M,P),fe(M,U),fe(M,G),fe(M,z),fe(M,F),fe(M,B),fe(M,W),fe(M,V),fe(M,q),fe(T,Y),fe(T,X),fe(X,K),fe(X,J),fe(X,Q),fe(X,ne),fe(X,re),oe||(ie=[ke(i,"change",e[12]),ke(i,"change",e[6]),ke(u,"change",e[14]),ke(u,"change",e[6]),ke(g,"change",e[15]),ke(g,"change",e[6]),ke(w,"change",e[16]),ke(w,"change",e[6]),ke(H,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(O,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(E,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(I,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(j,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(N,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(P,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(G,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(F,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(W,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(q,"click",(function(){te(e[5]&&e[5].padClick||void 0)&&(e[5]&&e[5].padClick||void 0).apply(this,arguments)})),ke(K,"click",e[17]),ke(Q,"click",e[18]),ke(t,"click",e[11])],oe=!0)},p(t,[n]){e=t,1&n&&(i.__value=e[0],i.value=i.__value),2&n&&(i.checked=i.__value===e[1]),4&n&&(u.__value=e[2],u.value=u.__value),2&n&&(u.checked=u.__value===e[1]),8&n&&(g.__value=e[3],g.value=g.__value),2&n&&(g.checked=g.__value===e[1]),16&n&&(w.__value=e[4],w.value=w.__value),2&n&&(w.checked=w.__value===e[1])},i:Z,o:Z,d(n){n&&pe(t),e[13][0].splice(e[13][0].indexOf(i),1),e[13][0].splice(e[13][0].indexOf(u),1),e[13][0].splice(e[13][0].indexOf(g),1),e[13][0].splice(e[13][0].indexOf(w),1),oe=!1,ee(ie)}}}function rl(e,t,n){let r,o,i,l,s,a,c;var u;oe(e,ct,(e=>n(19,r=e))),oe(e,bt,(e=>n(1,i=e))),oe(e,Yo,(e=>n(5,c=e))),u=()=>Array.prototype.forEach.call(document.getElementsByClassName("mdc-ripple-surface"),(e=>tl.attachTo(e))),Se().$$.on_mount.push(u);const d=pt.ref("marks","filled");oe(e,d,(e=>n(0,o=e)));const f=pt.ref("marks","corner");oe(e,f,(e=>n(2,l=e)));const h=pt.ref("marks","center");oe(e,h,(e=>n(3,s=e)));const p=pt.ref("marks","colors");oe(e,p,(e=>n(4,a=e)));return[o,i,l,s,a,c,function(){vt.set(bt.get())},d,f,h,p,function(e){0===e.screenX&&0===e.screenY||r.focus()},function(){i=this.__value,bt.set(i)},[[]],function(){i=this.__value,bt.set(i)},function(){i=this.__value,bt.set(i)},function(){i=this.__value,bt.set(i)},()=>_t(!1),()=>_t(!0)]}class ol extends rt{constructor(e){super(),nt(this,e,rl,nl,ne,{})}}function il(e){let t,n,r,o,i,l,s,a,c,u,d,f,h;return r=new ol({}),{c(){t=me("div"),n=me("div"),Je(r.$$.fragment),o=ye(),i=me("div"),l=me("input"),s=ye(),a=me("input"),c=ye(),u=me("textarea"),$e(n,"class","entry-pad svelte-fcgi7u"),$e(l,"class","info-input title svelte-fcgi7u"),$e(l,"type","text"),$e(l,"placeholder","Untitled"),$e(a,"class","info-input setter svelte-fcgi7u"),$e(a,"type","text"),$e(a,"placeholder","Anonymous"),$e(u,"class","rules-text svelte-fcgi7u"),$e(u,"spellcheck","false"),$e(i,"class","entry-info svelte-fcgi7u"),$e(t,"class","entry-column svelte-fcgi7u")},m(p,g){he(p,t,g),fe(t,n),Qe(r,n,null),e[7](n),fe(t,o),fe(t,i),fe(i,l),Me(l,e[1]),fe(i,s),fe(i,a),Me(a,e[2]),fe(i,c),fe(i,u),Me(u,e[3]),d=!0,f||(h=[ke(l,"input",e[8]),ke(a,"input",e[9]),ke(u,"input",e[10]),ke(u,"focus",ll),ke(u,"blur",ll)],f=!0)},p(e,[t]){2&t&&l.value!==e[1]&&Me(l,e[1]),4&t&&a.value!==e[2]&&Me(a,e[2]),8&t&&Me(u,e[3])},i(e){d||(qe(r.$$.fragment,e),d=!0)},o(e){Ye(r.$$.fragment,e),d=!1},d(n){n&&pe(t),et(r),e[7](null),f=!1,ee(h)}}}function ll(e){e.currentTarget.setAttribute("spellcheck",`${document.activeElement===e.currentTarget}`)}function sl(e,t,n){let r,o,i,l;function s(){n(0,l.style.fontSize=.12*l.clientWidth+"px",l)}var a;window.addEventListener("resize",s),a=()=>window.removeEventListener("resize",s),Se().$$.on_destroy.push(a),requestAnimationFrame(s);const c=ut.ref("meta","title");oe(e,c,(e=>n(1,r=e)));const u=ut.ref("meta","author");oe(e,u,(e=>n(2,o=e)));const d=ut.ref("meta","description");return oe(e,d,(e=>n(3,i=e))),[l,r,o,i,c,u,d,function(e){Ie[e?"unshift":"push"]((()=>{l=e,n(0,l)}))},function(){r=this.value,c.set(r)},function(){o=this.value,u.set(o)},function(){i=this.value,d.set(i)}]}class al extends rt{constructor(e){super(),nt(this,e,sl,il,ne,{})}}function cl(e){let t,n,r;return{c(){t=me("div"),t.innerHTML='<ul class="header-buttons left svelte-1gtf4ed"><li>Solving/Setting</li> \n        <li>New Grid</li> \n        <li>Export</li></ul>',n=ye(),r=me("div"),r.innerHTML='<ul class="header-buttons right svelte-1gtf4ed"><li>Light/dark</li> \n        <li>Help</li> \n        <li>Settings</li></ul>',$e(t,"class","header-left svelte-1gtf4ed"),$e(r,"class","header-right svelte-1gtf4ed")},m(e,o){he(e,t,o),he(e,n,o),he(e,r,o)},p:Z,i:Z,o:Z,d(e){e&&pe(t),e&&pe(n),e&&pe(r)}}}class ul extends rt{constructor(e){super(),nt(this,e,null,cl,ne,{})}}function dl(e){let n,r,o,i,l,s,a,c,u,d,f,h,p,g,m,v,b,y,w,k,x,_,$,T,M,H,C,O,S,E,A;return s=new ul({}),h=new Ri({}),m=new Zo({}),y=new al({}),{c(){n=me("header"),r=me("button"),r.textContent="Jump To Board",o=ye(),i=me("div"),l=me("div"),Je(s.$$.fragment),a=ye(),c=me("main"),u=me("div"),d=me("div"),f=me("div"),Je(h.$$.fragment),p=ye(),g=me("div"),Je(m.$$.fragment),v=ye(),b=me("div"),Je(y.$$.fragment),w=ye(),k=me("footer"),x=me("div"),_=me("a"),_.textContent="Sudoku Studio v.68c0aba",$=ye(),T=me("a"),M=be("Bug Report"),H=ye(),C=me("a"),O=be("Feature Request"),$e(r,"class","nobutton focus-skip"),$e(l,"class","content-row"),$e(i,"class","content"),$e(n,"class","svelte-di5g0b"),$e(f,"class","left-panel svelte-di5g0b"),$e(g,"class","center-panel svelte-di5g0b"),$e(b,"class","right-panel svelte-di5g0b"),$e(d,"class","content-row svelte-di5g0b"),$e(u,"class","content svelte-di5g0b"),$e(c,"class","svelte-di5g0b"),$e(_,"target","_blank"),$e(_,"href","https://github.com/SudokuStudio/SudokuStudio"),$e(_,"class","svelte-di5g0b"),$e(T,"target","_blank"),$e(T,"href",un),$e(T,"class","svelte-di5g0b"),$e(C,"target","_blank"),$e(C,"href","https://github.com/SudokuStudio/SudokuStudio/issues/new?labels=%E2%9C%A8%20enhancement&template=feature_request.yml&title=%E2%9C%A8+Feature%3A+"),$e(C,"class","svelte-di5g0b"),$e(x,"class","footer-text svelte-di5g0b"),$e(k,"class","svelte-di5g0b")},m(I,L){he(I,n,L),fe(n,r),fe(n,o),fe(n,i),fe(i,l),Qe(s,l,null),he(I,a,L),he(I,c,L),fe(c,u),fe(u,d),fe(d,f),Qe(h,f,null),fe(d,p),fe(d,g),Qe(m,g,null),fe(d,v),fe(d,b),Qe(y,b,null),he(I,w,L),he(I,k,L),fe(k,x),fe(x,_),fe(x,$),fe(x,T),fe(T,M),fe(x,H),fe(x,C),fe(C,O),S=!0,E||(A=[ke(r,"click",e[2]),ke(T,"mouseover",t.debounce(e[1],500,!0))],E=!0)},p:Z,i(e){S||(qe(s.$$.fragment,e),qe(h.$$.fragment,e),qe(m.$$.fragment,e),qe(y.$$.fragment,e),S=!0)},o(e){Ye(s.$$.fragment,e),Ye(h.$$.fragment,e),Ye(m.$$.fragment,e),Ye(y.$$.fragment,e),S=!1},d(e){e&&pe(n),et(s),e&&pe(a),e&&pe(c),et(h),et(m),et(y),e&&pe(w),e&&pe(k),E=!1,ee(A)}}}function fl(e,t,n){let r;oe(e,ct,(e=>n(0,r=e)));return[r,function(e){const t=new URL(un);t.searchParams.append("version","68c0aba"),t.searchParams.append("browser",window.navigator.userAgent),t.searchParams.append("os",window.navigator.platform),t.searchParams.append("url",window.location.href),e.currentTarget.href=t.href},()=>r&&r.focus()]}!function(){ut.watch(t.debounce(((e,t,n)=>{const o=new URL(window.location.href);o.searchParams.set("b",r.compressToBase64(JSON.stringify(n))),window.history.replaceState(null,"",o.href)}),200),!1,".");const e=new URL(window.location.href);if(e.searchParams.has("f"))try{const t=function(e){window.LZString=r;const t=r.decompressFromBase64(e);if(null==t)throw Error("Failed to LZString decompress fpuzzles board.");const n=JSON.parse(t),o=n.size;if(null==o||!(o in Pt))throw Error(`Unknown size: ${o})`);const i=Rt(...Pt[o]),l={width:o,height:o};function s(e,t){null==i.elements&&(i.elements={});for(const n of Object.values(i.elements))if(e===n.type)return Object.assign(n.value,t),n;const n=Nt(e,t);return i.elements[wt()]=n,n}function a(e,t){const n=s(e,{});for(const e of t){const t=f(Gt(e.cell),l);n.value[t]=!0}}function c(e,t){const n=s(e,{});for(const e of t)for(const t of e.lines){const e=n.value[wt()]=[];for(const n of t){const t=f(Gt(n),l);e.push(t)}}}function u(e,t,n=Number){const r=s(e,{});for(const e of t){if(2!==e.cells.length){console.error("Cannot parse difference not between two cells.");continue}const t=Gt(e.cells[0]),o=Gt(e.cells[1]),i=b([.5*(t[0]+o[0]+1),.5*(t[1]+o[1]+1)],l);if(null==i){console.error(`Cannot parse difference between two nonadjacent cells: ${e.cells.join(", ")}.`);continue}const s=null!=e.value?n(e.value):null;r.value[i]=null==s||s}}function h(e){const t=s("killer",{});for(const n of e){const e=t.value[wt()]={cells:{},sum:null!=n.value?Number(n.value):void 0};for(const t of n.cells){const n=f(Gt(t),l);e.cells[n]=!0}}}n.title&&(i.meta.title=n.title),n.author&&(i.meta.author=n.author),n.ruleset&&(i.meta.description=n.ruleset);for(let e=0;e<o;e++){const t=n.grid[e];for(let n=0;n<o;n++){const r=t[n],o=f([n,e],l);if(null!=r.region&&console.error("Cannot handle f-puzzles regions."),null!=r.value){let e;e=r.given?s("givens",{}):s("filled",{}),e.value[o]=r.value}if(r.cornerPencilMarks){const e=s("corner",{}).value[o]={};r.cornerPencilMarks.forEach((t=>e[t]=!0))}if(r.centerPencilMarks){const e=s("center",{}).value[o]={};r.centerPencilMarks.forEach((t=>e[t]=!0))}r.highlight&&((s("colors",{}).value[o]={})[r.highlight]=!0)}}if(n["diagonal+"]&&s("diagonal",{positive:!0}),n["diagonal-"]&&s("diagonal",{negative:!0}),n.antiknight&&s("knight",!0),n.antiking&&s("king",!0),n.disjointgroups&&s("disjointGroups",!0),n.nonconsecutive&&s("consecutive",{orth:!0}),n.thermometer&&c("thermo",n.thermometer),n.betweenline&&c("between",n.betweenline),n.whispers&&c("whisper",n.whispers),n.renban&&c("renban",n.renban),n.palindrome&&c("palindrome",n.palindrome),n.arrow){const e=s("arrow",{});for(const t of n.arrow)for(const n of t.lines||[]){const r=e.value[wt()]={bulb:[],body:[]};for(const e of t.cells){const t=f(Gt(e),l);r.bulb.push(t)}for(const e of n){const t=f(Gt(e),l);r.body.push(t)}}}if(n.sandwichsum&&function(e,t){const n=s(e,{});for(const e of t){const t=Gt(e.cell);t[0]+=.5,t[1]+=.5;const r=k(t,l);null!=r?n.value[r]=null==e.value||Number(e.value):console.error("Cannot handle this series.",e)}}("sandwich",n.sandwichsum),n.killercage&&h(n.killercage),n.extraregion&&(console.warn("Extra region import uses killer cage."),h(n.extraregion)),n.littlekillersum){const e=s("littleKiller",{});for(const t of n.littlekillersum){const n=Gt(t.cell);"DR"===t.direction?(n[0]+=.75,n[1]+=.75):"DL"===t.direction?(n[0]+=.25,n[1]+=.75):"UR"===t.direction?(n[0]+=.75,n[1]+=.25):"UL"===t.direction&&(n[0]+=.25,n[1]+=.25);const r=_(n,l);null!=r?e.value[r]=null==t.value||Number(t.value):console.error("Cannot handle this diagonal.",t)}}if(n.difference&&u("difference",n.difference),n.ratio&&u("ratio",n.ratio),n.xv&&u("xv",n.xv,X),n.odd&&a("odd",n.odd),n.even&&a("even",n.even),n.minimum&&a("min",n.minimum),n.maximum&&a("max",n.maximum),n.quadruple){const e=s("quadruple",{});for(const t of n.quadruple){if(4!==t.cells.length){console.error("Cannot parse quadruple not between four cells.");continue}const n=t.cells.map(Gt).reduce((([e,t],[n,r])=>[e+n,t+r]),[0,0]);n[0]*=.25,n[1]*=.25;const r=m(n,l);if(null==r){console.error("Cannot handle this quadruple.",t);continue}const o=p(r,l);e.value[o]=null==t.values||t.values}}if(n.clone){const e=s("clone",{});e:for(const t of n.clone){const r=e.value[wt()]={color:void 0,a:t.cells.map((e=>f(Gt(e),l))),b:t.cloneCells.map((e=>f(Gt(e),l)))};let o=null;for(const e of r.a.concat(r.b)){const[t,r]=d(e,l),{c:i}=n.grid[r][t];if(null==i)continue e;if(!i.startsWith("#"))continue e;if(null==o)o=i;else if(o!==i)continue e}if(null==o)continue;const[i,s,a]=Et.hexToHsluv(o);r.color=Et.hsluvToHex([i,s,.5*a])}}return n.negative&&console.error(`Cannot handle f-puzzles negative constraints: ${n.negative.join(", ")}.`),i}(e.searchParams.get("f").replace(/ /g,"+"));return an(t),ut.update(t),e.searchParams.delete("f"),void window.history.replaceState(null,"",e.href)}catch(e){console.error("Failed to parse f-puzzles board",e)}if(e.searchParams.has("c")){const t=/[1-9]/,n=e.searchParams.get("c");if(81===n.length){const r=Array.from(n).map((e=>t.test(e)?+e:void 0)),o=Rt();an(o);for(const e of Object.values(o.elements))"givens"===e.type&&(e.value=r);return ut.update(o),e.searchParams.delete("c"),void window.history.replaceState(null,"",e.href)}}if(e.searchParams.has("b")){const t=e.searchParams.get("b");try{const e=r.decompressFromBase64(t);if(null!=e){const t=JSON.parse(e);return an(t),void ut.update(t)}}catch(e){console.error("Failed to update board from `b` param.")}}const n=Rt();an(n),ut.update(n)}();return new class extends rt{constructor(e){super(),nt(this,e,fl,dl,ne,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
