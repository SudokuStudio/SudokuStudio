var bundle=function(){"use strict";function e(e,t,n){var r,o,i,s,l;function c(){var a=Date.now()-s;a<t&&a>=0?r=setTimeout(c,t-a):(r=null,n||(l=e.apply(i,o),i=o=null))}null==t&&(t=100);var a=function(){i=this,o=arguments,s=Date.now();var a=n&&!r;return r||(r=setTimeout(c,t)),a&&(l=e.apply(i,o),i=o=null),l};return a.clear=function(){r&&(clearTimeout(r),r=null)},a.flush=function(){r&&(l=e.apply(i,o),i=o=null,clearTimeout(r),r=null)},a}e.debounce=e;var t=e;function n(e){var t={exports:{}};return e(t,t.exports),t.exports}var r=n((function(e){var t=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var s=t.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var s=[];return n.forEach((function(t){s.push(e(t))})),i.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,i,s={},l={},c="",a="",u="",d=2,h=3,f=2,p=[],g=0,m=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=h++,l[c]=!0),a=u+c,Object.prototype.hasOwnProperty.call(s,a))u=a;else{if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,m==t-1?(m=0,p.push(n(g)),g=0):m++;for(o=u.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<f;r++)g=g<<1|o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o=0;for(o=u.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}0==--d&&(d=Math.pow(2,f),f++),delete l[u]}else for(o=s[u],r=0;r<f;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;0==--d&&(d=Math.pow(2,f),f++),s[a]=h++,u=String(c)}if(""!==u){if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,m==t-1?(m=0,p.push(n(g)),g=0):m++;for(o=u.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<f;r++)g=g<<1|o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o=0;for(o=u.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1}0==--d&&(d=Math.pow(2,f),f++),delete l[u]}else for(o=s[u],r=0;r<f;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(o=2,r=0;r<f;r++)g=g<<1|1&o,m==t-1?(m=0,p.push(n(g)),g=0):m++,o>>=1;for(;;){if(g<<=1,m==t-1){p.push(n(g));break}m++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,i,s,l,c,a,u,d=[],h=4,f=4,p=3,g="",m=[],v={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)d[o]=o;for(s=0,c=Math.pow(2,2),a=1;a!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(l>0?1:0)*a,a<<=1;switch(s){case 0:for(s=0,c=Math.pow(2,8),a=1;a!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(l>0?1:0)*a,a<<=1;u=e(s);break;case 1:for(s=0,c=Math.pow(2,16),a=1;a!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(l>0?1:0)*a,a<<=1;u=e(s);break;case 2:return""}for(d[3]=u,i=u,m.push(u);;){if(v.index>t)return"";for(s=0,c=Math.pow(2,p),a=1;a!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(l>0?1:0)*a,a<<=1;switch(u=s){case 0:for(s=0,c=Math.pow(2,8),a=1;a!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(l>0?1:0)*a,a<<=1;d[f++]=e(s),u=f-1,h--;break;case 1:for(s=0,c=Math.pow(2,16),a=1;a!=c;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),s|=(l>0?1:0)*a,a<<=1;d[f++]=e(s),u=f-1,h--;break;case 2:return m.join("")}if(0==h&&(h=Math.pow(2,p),p++),d[u])g=d[u];else{if(u!==f)return null;g=i+i.charAt(0)}m.push(g),d[f++]=i+g.charAt(0),i=g,0==--h&&(h=Math.pow(2,p),p++)}}};return i}();null!=e&&(e.exports=t)})),o=n((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StateManager=t.StateRef=void 0;const n="function"==typeof Object.fromEntries?Object.fromEntries:e=>{const t=Object.create(null);for(const[n,r]of e)t[n]=r;return t},r=Symbol("watchers key");function o(e,t){return null==e&&null==t||Object.is(e,t)}function i(e){return null==e?null:e}class s{constructor(e,t){this._path=[],this._stateManager=e;for(const e of t)".."===e?this._path.pop():"."===e||this._path.push(e)}path(){return[...this._path]}ref(...e){return new s(this._stateManager,[...this._path,...e])}get(){return this._stateManager.get(...this._path)}watch(e,t){return this._stateManager.watch(e,t,this._path.join("/")),e}unwatch(e){this._stateManager.unwatch(e)}replace(e){return this._stateManager.update({[this._path.join("/")]:e})}update(e){const t=this._path.join("/")+"/",r=n(Object.entries(e).map((([e,n])=>[t+e,n])));return this._stateManager.update(r)}subscribe(e){const t=this.watch(((t,n,r)=>e(r)),!0);return()=>this.unwatch(t)}set(e){this.replace(e)}}t.StateRef=s;class l{constructor(){this._data=null,this._watchers=new Map,this._watcherTreeRoot=Object.create(null)}ref(...e){return new s(this,e)}get(...e){let t=this._data;for(const n of e){if(null==t)break;if(n.includes("/"))throw Error('Path cannot contain "/", split into varargs.');t=t[n]}return i(t)}watch(e,t,...n){let r=this._watchers.get(e);null==r&&(r=new Set,this._watchers.set(e,r));for(const r of n)this._watchPattern(e,t,r);return e}unwatch(e){if(!this._watchers.has(e))throw Error("Cannot find watcher.");const t=this._watchers.get(e);this._watchers.delete(e);for(const n of t)if(!l._unwatchPattern(e,this._watcherTreeRoot,n.split("/")))throw Error(`Failed to remove watcher from pattern: ${n}.`)}update(e){if("object"!=typeof e)throw Error(`Invalid update object: ${e}`);let t=!1;const r=[],i=[];for(const[n,s]of Object.entries(e)){if(0>=n.length)throw Error("Update key cannot be empty.");const e=n.split("/"),{data:c,redo:a,undo:u}=l._updateInternal(this._data,s,e,[],[this._watcherTreeRoot]);o(this._data,c)||(t=!0,this._data=c,r.push(...a),i.push(...u))}return t?{redo:n(r),undo:n(i)}:null}_watchPattern(e,t,n){if(!n||0>=n.length)throw Error(`Pattern cannot be empty: ${n}.`);const o=n.split("/");let i=this._watcherTreeRoot;for(const e of o)"."!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(i[e]=Object.create(null)),i=i[e]);(i[r]||(i[r]=new Set)).add(e),t&&l._triggerNow(this._data,o,[],e)}static _unwatchPattern(e,t,n){if(0===n.length){const n=t[r];return null!=n&&(!!n.delete(e)&&(0>=n.size&&delete t[r],!0))}const[o,...i]=n;return!("."===o&&!this._unwatchPattern(e,t,i))&&(!!Object.prototype.hasOwnProperty.call(t,o)&&(!!this._unwatchPattern(e,t[o],i)&&(0>=Object.keys(t[o]).length&&null==t[r]&&delete t[o],!0)))}static _triggerNow(e,t,n,r){if(null==e)return;if(0>=t.length){try{r(n,null,e)}catch(e){console.error("Watcher threw:",e,r)}return}if("object"!=typeof e)return;const[o,...i]=t;if("."===o)this._triggerNow(e,i,n,r);else if("*"===o)for(const[t,o]of Object.entries(e))this._triggerNow(o,i,[...n,t],r);else Object.prototype.hasOwnProperty.call(e,o)&&this._triggerNow(e[o],i,[...n,o],r)}static _updateInternal(e,t,n,s,c){const a=0>=n.length,u="object"==typeof e?e:null,d="object"==typeof t?t:null,{data:h,redo:f,undo:p}=(()=>{if(a){if(null==u&&null==d)return{data:t,undo:[],redo:[]};const n=new Set([...Object.keys(u||{}),...Object.keys(d||{})]);let r=!1;const a=Object.create(null),h=[],f=[];for(const e of n){const t=u?i(u[e]):null,n=d?i(d[e]):null,p=l._nextWatcherTrees(e,c),{data:g,redo:m,undo:v}=l._updateInternal(t,n,[],[...s,e],p);o(t,g)||(r=!0,h.push(...m),f.push(...v),a[e]=g)}if(!r)return{data:e,redo:h,undo:f};const p=Object.assign(Object.create(null),u);for(const[e,t]of Object.entries(a))null==t?delete p[e]:p[e]=t;return 0===Object.keys(p).length?{data:d||t,redo:h,undo:f}:{data:p,redo:h,undo:f}}const[r,...h]=n,f=u?i(u[r]):null,p=l._nextWatcherTrees(r,c),{data:g,redo:m,undo:v}=l._updateInternal(f,t,h,[...s,r],p);if(o(f,g))return{data:e,redo:m,undo:v};const y=Object.assign(Object.create(null),u);return null==g?delete y[r]:y[r]=g,Object.values(y).every((e=>null==e))?{data:null,redo:m,undo:v}:{data:y,redo:m,undo:v}})();if(!o(e,h)){if(null==e){if(null==h)throw"N/A";"object"==typeof h||(f.length=0,f.push([s.join("/"),h]),p.length=0,p.push([s.join("/"),null]))}else"object"==typeof e?null==h||"object"==typeof h||(f.length=0,f.push([s.join("/"),h])):null==h?(f.length=0,f.push([s.join("/"),null]),p.length=0,p.push([s.join("/"),e])):"object"==typeof h?(p.length=0,p.push([s.join("/"),e])):(f.length=0,f.push([s.join("/"),h]),p.length=0,p.push([s.join("/"),e]));for(const t of c)for(const n of t[r]||[])try{n(s,e,h)}catch(e){console.error("Watcher threw:",e,n)}return{data:h,undo:p,redo:f}}return{data:e,undo:p,redo:f}}static _nextWatcherTrees(e,t){const n=[];for(const r of t)r["*"]&&n.push(r["*"]),r[e]&&n.push(r[e]);return n}}t.StateManager=l}));function i(){return""+(31*Math.floor(4294967295*Math.random())+Date.now())%4294967295}function s(e,t=3,n=3){const r=t*n,o={grid:{width:r,height:r},meta:{title:null,author:null,description:null},elements:{}};return o.elements[1]=e("grid"),o.elements[2]=e("gridRegion",function(e=9,t=3,n=3){const r={};for(let t=0;t<e;t++)r[t]={};for(let o=0;o<e;o++)for(let i=0;i<e;i++){const s=o*e+i;r[Math.floor(o/n)*n+Math.floor(i/t)][s]=!0}return r}(r,t,n)),o.elements[10]=e("givens",{}),o.elements[11]=e("filled",{}),o.elements[12]=e("corner",{}),o.elements[13]=e("center",{}),o.elements[14]=e("colors",{}),o}function l(e,t){const n=[];for(let r=0;r<t.height;r++){const o=[];for(let n=0;n<t.width;n++){const i=h([n,r],t);o.push(`${e[i]||"_"}`)}n.push(o.join(" "))}return n.join("\n")}const c=.01,a=.005;function u(e){const t=[];for(let n=0;null!=e[n];n++)t.push(e[n]);return t}function d(e,{width:t}){return[e%t,Math.floor(e/t)]}function h([e,t],{width:n}){return t*n+e}function f([e,t],{width:n,height:r},o){if(e<0||n<=e||t<0||r<=t)return null;if(o){const n=Math.abs(e%1-.5),r=Math.abs(t%1-.5);if(.5<n+r||.35<n||.35<r)return null}return[Math.floor(e),Math.floor(t)]}function p([e,t],{width:n}){return t*(n+1)+e}function g(e,{width:t}){return[e%(t+1),Math.floor(e/(t+1))]}function m([e,t],{width:n,height:r}){const o=Math.round(e),i=Math.round(t);return o<0||n<o||i<0||r<i?null:[o,i]}function v([e,t],{width:n,height:r}){const o=[];for(let i=-1;i<=0;i++){const s=t+i;if(!(s<0||r<=s))for(let t=-1;t<=0;t++){const r=e+t;r<0||n<=r||o.push([r,s])}}return o}function y([e,t],{width:n,height:r}){const o=Math.abs(t%1-.5)>=Math.abs(e%1-.5),i=n-+!o,s=r-+o,l=Math.floor(t-.5*+o),c=Math.floor(e-.5*+!o);return c<0||i<=c||l<0||s<=l?null:2*(i*l+c)+ +o}function b(e,t){const[n,r]=w(e,t),[o,i]=d(n,t),[s,l]=d(r,t);return[.5*(o+s+1),.5*(i+l+1)]}function w(e,t){if(1==e%2){const n=.5*(e-1);return[n,n+t.width]}{const n=.5*e+Math.floor(.5*e/(t.width-1));return[n,n+1]}}function k([e,t],{width:n,height:r}){const o=t<0||r<=t,i=e<0||n<=e;if(o===i)return null;return Math.floor(o?e:t)<<2|+i<<1|+(0<(o?t:e))}function x(e,{width:t,height:n}){const r=e>>2,o=1&e>>1,i=o,s=1-o;let l=r*s,c=r*i;const a=[];for(;l<t&&c<n;)a.push([l,c]),l+=i,c+=s;return 1&e&&a.reverse(),a}function $([e,t],n){const{width:r,height:o}=n,i=e<0,s=t<0,l=o<=t;if(!(i||r<=e||s||l))return null;e=Math.max(-.5,Math.min(r,e)),t=Math.max(-.5,Math.min(o,t));const c=1&Math.floor(2*e)+Math.floor(2*t);let a;a=s?0|c:l?2|1-c:i?c<<1|0:1-c<<1|1;const u=Math.floor(e)+1-2*(1&a),d=Math.floor(t)+1-(2&a);return u<0||r<=u||d<0||o<=d?null:s||l?u<<2|a:r+o-d-1-(1&a>>1)<<2|a}function _(e,{width:t,height:n},r=-.75){const[o,i]=T(e,{width:t,height:n});return[.5+o+r*(1-2*(1&e>>0)),.5+i+r*(1-2*(1&e>>1))]}function M(e){return[1&e?-1:1,2&e?-1:1]}function T(e,{width:t,height:n}){const r=e>>2,o=1&e>>1;if(r<t)return[r,o*(n-1)];return[(1&e)*(t-1),n-(r-t)-1-o]}function A(e,t){let[n,r]=T(e,t);const[o,i]=M(e),s=[];do{s.push([n,r]),n+=o,r+=i}while(0<=n&&n<t.width&&0<=r&&r<t.height);return s}function C(e){return null==e?[]:Object.keys(e).filter((t=>null!=e[t]&&0!=e[t])).map(Number).sort(((e,t)=>e-t))}function S(e,t){if(t.width!==t.height)throw Error(`No major diagonal exists for ${t.height} rows by ${t.width} cols grid.`);return Array(t.width).fill(null).map(((n,r)=>[r,e?t.width-1-r:r]))}function E(e,{width:t,height:n}){if(e<0||n<=e)throw Error(`ROW is outside grid: ${e}.`);return Array(t).fill().map(((n,r)=>e*t+r))}function I(e,{width:t,height:n}){if(e<0||t<=e)throw Error(`COL is outside grid: ${e}.`);return Array(n).fill().map(((n,r)=>e+r*t))}function O(e,t,n){const r=new Map;for(const o of t){const t=e[o];null!=t&&(r.has(t)?(n[r.get(t)]=!0,n[o]=!0):r.set(t,o))}}function H(e,t,n,r){let o=0,i=!0;for(const n of t){const t=e[n];null==t?i=!1:o+=t}return!!(r<o||i&&r!==o)&&(t.forEach((e=>n[e]=!0)),!0)}function L(e,t,n,r){for(let o=0;o<t.length;o++){const i=e[t[o]],s=e[n[o]];null!=i&&null!=s&&(i!==s&&(r[t[o]]=!0,r[n[o]]=!0))}}function D(e,t,n,r){for(const o of t){const t=e[o];null==t||r(t)||(n[o]=!0)}}function j(e,t,{shortenHead:n,shortenTail:r,bezierRounding:o,closeLoops:i}={}){if(0>=e.length)return"";if(i&&1<e.length){const t=e[e.length-1];for(let n=0;n<e.length-1;n++)if(e[n]===t){e.push(e[n+1]);break}const n=e[0];for(let t=1;t<e.length;t++)if(e[t]===n){e=[e[t-1],...e];break}}const s=[];for(const n of e){const[e,r]=d(n,t);s.push([e+.5,r+.5])}if(1===s.length&&s.push(s[0]),n){const e=[s[1][0]-s[0][0],s[1][1]-s[0][1]];N(e),s[0][0]+=e[0]*n,s[0][1]+=e[1]*n}if(r){const e=s.length,t=[s[e-2][0]-s[e-1][0],s[e-2][1]-s[e-1][1]];N(t),s[e-1][0]+=t[0]*r,s[e-1][1]+=t[1]*r}if(o){const e=["M",s[0].join(",")];for(let t=2;t<s.length;t++){const n=s[t-2],r=s[t-1],i=s[t],l=[n[0]-r[0],n[1]-r[1]],c=[i[0]-r[0],i[1]-r[1]];N(l),N(c),l[0]*=o,l[1]*=o,c[0]*=o,c[1]*=o,l[0]+=r[0],l[1]+=r[1],c[0]+=r[0],c[1]+=r[1],e.push("L",l.join(","),"Q",r.join(","),c.join(","))}return e.push("L",s[s.length-1].join(",")),e.join(" ")}return"M"+s.map((e=>e.join(","))).join("L")}function N(e){const t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);e[0]/=t,e[1]/=t}function R({offsetX:e,offsetY:t},n){const{width:r,height:o}=n.getBoundingClientRect(),{x:i,y:s,width:l,height:c}=n.viewBox.baseVal;return[l*e/r+i,c*t/o+s]}function U([e,t],{width:n,height:r}){const o=[];return 0<e&&o.push([e-1,t]),0<t&&o.push([e,t-1]),e<n-1&&o.push([e+1,t]),t<r-1&&o.push([e,t+1]),o}function P(e,t){const n=new Map;for(const r of e){const e=U(d(r,t),t).map((e=>h(e,t))),o=new Set;for(const t of e)n.has(t)?n.get(t).delete(r):o.add(t);n.set(r,o)}const r=[];for(const[e,t]of n)for(const n of t)r.push([e,n]);return r}function G(e,t,n=0,r=!1){const o=function(e,t){const n=new Map;function r(e,t){const r=n.get(t);if(null==r?void 0:r.has(e))r.delete(e),0>=r.size&&n.delete(t);else{let r=n.get(e);null==r&&(r=new Set,n.set(e,r)),r.add(t)}}for(const n of e){const[e,o]=d(n,t),i=p([e,o],t),s=p([1+e,o],t),l=p([1+e,1+o],t),c=p([e,1+o],t);r(i,s),r(s,l),r(l,c),r(c,i)}return n}(e,t);if(0>=o.size)return null;const i=new Set,s=[];for(;!(0>=o.size);){const[e,l]=Array.from(o.entries()).find((([e,t])=>1===t.size)),c=Array.from(l)[0];let a=g(e,t),u=g(c,t),d=c;const h=[];do{const e=o.get(d);let s=r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,l=-1,c=null;for(const n of e){const e=g(n,t),o=(u[0]-a[0])*(e[1]-u[1])-(u[1]-a[1])*(e[0]-u[0]);r!==s<o&&(s=o,l=n,c=e)}if(r&&1<e.size&&i.add(d),null==c)throw"UNREACHABLE";if(e.delete(l),0>=e.size&&o.delete(d),0!==s){const e=n*(u[0]-a[0]),t=n*(c[0]-u[0]),r=n*(a[1]-u[1]),o=n*(u[1]-c[1]),l=o+s*t,f=e+s*r;let[p,g]=u;p+=l,g+=f,i.has(d)?(h.push(`${p-3*e},${g-3*t}`),h.push(`${p-3*r},${g-3*o}`)):h.push(`${p},${g}`)}a=u,u=c,d=l}while(c!==d);s.push("M"+h.join("L")+"Z")}return s.join("")}function F(e,t){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function z(e,t){let n,r;if(t<=4)n=e%2*.6-.3,r=.6*(e/2|0)-.3;else{const o=t/2|0;if(e<o){n=e*(.6/(o-1))-.3,r=-.3}else{n=(e-o)*(.6/(t-o-1))-.3,r=.3}}return[n,r]}const B=2*Math.PI;function V(e,t,n,r,o=.2){if(n>=r)throw Error(`INDEX ${n} must be less than SLICES ${r}.`);if(0>n)throw Error(`INDEX ${n} must be positive`);const[i,s]=d(e,t);if(1===r)return`M${i},${s}L${i+1},${s}L${i+1},${s+1}L${i},${s+1}Z`;const l=((o+n/r)%1+1)%1,c=((o+(n+1)/r)%1+1)%1,a=[.125,.375,.625,.875];let u,h;for(u=0;u<a.length&&a[u]<l;u++);for(h=0;h<a.length&&a[h]<c;h++);u%=a.length,h%=a.length;const f=[l];for(;u!==h;)f.push(a[u]),u++,u%=a.length;return f.push(c),`M${i+.5},${s+.5}L`+f.map((e=>[Math.cos(B*e),Math.sin(B*e)])).map((([e,t])=>{const n=Math.max(Math.abs(e),Math.abs(t));return[e/n,t/n]})).map((([e,t])=>[i+.5*(e+1),s+.5*(t+1)])).map((([e,t])=>`${e},${t}`)).join("L")+"Z"}function W(e,t=!0,n=!0,r=!1){const o={};if(!t&&!n)return o;for(const t of Object.values(e))n&&"filled"===t.type&&Object.assign(o,t.value);for(const n of Object.values(e))if("givens"===n.type)if(t)Object.assign(o,n.value);else for(const e of Object.keys(n.value||{}))delete o[e];if(!r)for(const e of Object.keys(o))0===o[e]&&delete o[e];return o}const Y=(()=>{const e=[["M",1e3],["CM",900],["D",500],["CD",400],["C",100],["XC",90],["L",50],["XL",40],["X",10],["IX",9],["V",5],["IV",4],["I",1]];return function(t){if(0>=t)return`${t}`;let n="";for(const[o,i]of e){var r=Math.floor(t/i);t-=r*i,n+=o.repeat(r)}return n}})(),q=(()=>{const e=/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/,t=/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,n={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};return function(r){let o,i=0;if(!(r=r.toUpperCase())||!e.test(r))return null;for(;o=t.exec(r);)i+=n[o[0]];return i}})();function*K(...e){if(0===e.length)yield[];else for(let t=0;t<e[0];t++)for(const n of K(...e.slice(1)))n.unshift(t),yield n}function*X({width:e,height:t}){for(const[n,r,o,i]of K(t,e,t,e)){if(n>=o)continue;if(1!==Math.abs(n-o))continue;1===Math.abs(r-i)&&(yield[[r,n],[i,o]])}}function*J({width:e,height:t}){for(const[n,r,o,i]of K(t,e,t,e)){if(n>o||r>i)continue;const e=Math.abs(n-o),t=Math.abs(r-i);0!==e&&0!==t||(1!==e&&1!==t||(yield[[r,n],[i,o]]))}}const Z={3:[3,1],4:[2,2],5:[5,1],6:[3,2],7:[7,1],8:[4,2],9:[3,3],10:[5,2],11:[11,1],12:[4,3],13:[13,1],14:[7,2],15:[5,3],16:[4,4]};function Q(){}function ee(e){return e()}function te(){return Object.create(null)}function ne(e){e.forEach(ee)}function re(e){return"function"==typeof e}function oe(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function ie(e,...t){if(null==e)return Q;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function se(e,t,n){e.$$.on_destroy.push(ie(t,n))}function le(e,t,n,r){if(e){const o=ce(e,t,n,r);return e[0](o)}}function ce(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function ae(e,t,n,r,o,i,s){const l=function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(t,r,o,i);if(l){const o=ce(t,n,r,s);e.p(o,l)}}function ue(e){return null==e?"":e}function de(e,t,n=t){return e.set(n),t}let he,fe=!1;function pe(e,t,n,r){for(;e<t;){const o=e+(t-e>>1);n(o)<=r?e=o+1:t=o}return e}function ge(e,t){fe?(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;const t=e.childNodes,n=new Int32Array(t.length+1),r=new Int32Array(t.length);n[0]=-1;let o=0;for(let e=0;e<t.length;e++){const i=pe(1,o+1,(e=>t[n[e]].claim_order),t[e].claim_order)-1;r[e]=n[i]+1;const s=i+1;n[s]=e,o=Math.max(s,o)}const i=[],s=[];let l=t.length-1;for(let e=n[o]+1;0!=e;e=r[e-1]){for(i.push(t[e-1]);l>=e;l--)s.push(t[l]);l--}for(;l>=0;l--)s.push(t[l]);i.reverse(),s.sort(((e,t)=>e.claim_order-t.claim_order));for(let t=0,n=0;t<s.length;t++){for(;n<i.length&&s[t].claim_order>=i[n].claim_order;)n++;const r=n<i.length?i[n]:null;e.insertBefore(s[t],r)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function me(e,t,n){fe&&!n?ge(e,t):(t.parentNode!==e||n&&t.nextSibling!==n)&&e.insertBefore(t,n||null)}function ve(e){e.parentNode.removeChild(e)}function ye(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function be(e){return document.createElement(e)}function we(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ke(e){return document.createTextNode(e)}function xe(){return ke(" ")}function $e(){return ke("")}function _e(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Me(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Te(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Ae(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ce(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Se(e,t){e.value=null==t?"":t}function Ee(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function Ie(e,t,n){e.classList[n?"add":"remove"](t)}function Oe(e){he=e}function He(){if(!he)throw new Error("Function called outside component initialization");return he}function Le(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const De=[],je=[],Ne=[],Re=[],Ue=Promise.resolve();let Pe=!1;function Ge(e){Ne.push(e)}function Fe(e){Re.push(e)}let ze=!1;const Be=new Set;function Ve(){if(!ze){ze=!0;do{for(let e=0;e<De.length;e+=1){const t=De[e];Oe(t),We(t.$$)}for(Oe(null),De.length=0;je.length;)je.pop()();for(let e=0;e<Ne.length;e+=1){const t=Ne[e];Be.has(t)||(Be.add(t),t())}Ne.length=0}while(De.length);for(;Re.length;)Re.pop()();Pe=!1,ze=!1,Be.clear()}}function We(e){if(null!==e.fragment){e.update(),ne(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ge)}}const Ye=new Set;let qe;function Ke(){qe={r:0,c:[],p:qe}}function Xe(){qe.r||ne(qe.c),qe=qe.p}function Je(e,t){e&&e.i&&(Ye.delete(e),e.i(t))}function Ze(e,t,n,r){if(e&&e.o){if(Ye.has(e))return;Ye.add(e),qe.c.push((()=>{Ye.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function Qe(e,t){e.d(1),t.delete(e.key)}function et(e,t){Ze(e,1,1,(()=>{t.delete(e.key)}))}function tt(e,t,n,r,o,i,s,l,c,a,u,d){let h=e.length,f=i.length,p=h;const g={};for(;p--;)g[e[p].key]=p;const m=[],v=new Map,y=new Map;for(p=f;p--;){const e=d(o,i,p),l=n(e);let c=s.get(l);c?r&&c.p(e,t):(c=a(l,e),c.c()),v.set(l,m[p]=c),l in g&&y.set(l,Math.abs(p-g[l]))}const b=new Set,w=new Set;function k(e){Je(e,1),e.m(l,u),s.set(e.key,e),u=e.first,f--}for(;h&&f;){const t=m[f-1],n=e[h-1],r=t.key,o=n.key;t===n?(u=t.first,h--,f--):v.has(o)?!s.has(r)||b.has(r)?k(t):w.has(o)?h--:y.get(r)>y.get(o)?(w.add(r),k(t)):(b.add(o),h--):(c(n,s),h--)}for(;h--;){const t=e[h];v.has(t.key)||c(t,s)}for(;f;)k(m[f-1]);return m}function nt(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function rt(e){e&&e.c()}function ot(e,t,n,r){const{fragment:o,on_mount:i,on_destroy:s,after_update:l}=e.$$;o&&o.m(t,n),r||Ge((()=>{const t=i.map(ee).filter(re);s?s.push(...t):ne(t),e.$$.on_mount=[]})),l.forEach(Ge)}function it(e,t){const n=e.$$;null!==n.fragment&&(ne(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function st(e,t){-1===e.$$.dirty[0]&&(De.push(e),Pe||(Pe=!0,Ue.then(Ve)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function lt(e,t,n,r,o,i,s=[-1]){const l=he;Oe(e);const c=e.$$={fragment:null,ctx:null,props:i,update:Q,not_equal:o,bound:te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:te(),dirty:s,skip_bound:!1};let a=!1;if(c.ctx=n?n(e,t.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return c.ctx&&o(c.ctx[t],c.ctx[t]=i)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](i),a&&st(e,t)),n})):[],c.update(),a=!0,ne(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){fe=!0;const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(ve)}else c.fragment&&c.fragment.c();t.intro&&Je(e.$$.fragment),ot(e,t.target,t.anchor,t.customElement),fe=!1,Ve()}Oe(l)}class ct{$destroy(){it(this,1),this.$destroy=Q}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const at=[];function ut(e,t){return{subscribe:dt(e,t).subscribe}}function dt(e,t=Q){let n;const r=[];function o(t){if(oe(e,t)&&(e=t,n)){const t=!at.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),at.push(n,e)}if(t){for(let e=0;e<at.length;e+=2)at[e][0](at[e+1]);at.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,s=Q){const l=[i,s];return r.push(l),1===r.length&&(n=t(o)||Q),i(e),()=>{const e=r.indexOf(l);-1!==e&&r.splice(e,1),0===r.length&&(n(),n=null)}}}}function ht(e,t,n){const r=!Array.isArray(e),o=r?[e]:e,i=t.length<2;return ut(n,(e=>{let n=!1;const s=[];let l=0,c=Q;const a=()=>{if(l)return;c();const n=t(r?s[0]:s,e);i?e(n):c=re(n)?n:Q},u=o.map(((e,t)=>ie(e,(e=>{s[t]=e,l&=~(1<<t),n&&a()}),(()=>{l|=1<<t}))));return n=!0,a(),function(){ne(u),c()}}))}const ft=dt(),pt=dt(),gt=window.boardState=new o.StateManager,mt=gt.ref("grid");function vt(){return gt.get("elements")}function yt(e,t){return Object.keys(e).find((n=>t===e[n].type))}function bt(e,t){const n=yt(vt(),e);return null==n?null:gt.get("elements",n,"value",`${t}`)}function wt(e,t,n){const r=yt(vt(),e);if(null==r)throw Error(`Mark type ${e} not found for cell ${t}`);return gt.ref("elements",r,"value",`${t}`).replace(n)}const kt=window.warningState=new o.StateManager,xt=["filled","corner","center","colors"],$t=window.userState=new o.StateManager;function _t(e){switch(e){case $t.get("marks","filled"):return"filled";case $t.get("marks","corner"):return"corner";case $t.get("marks","center"):return"center";case $t.get("marks","colors"):return"colors";default:return null}}$t.update({select:{},cursor:{index:null,isShown:!1},tool:"120",prevTool:"120",marks:{filled:"120",corner:"130",center:"140",colors:"150"},history:{},historyUndone:{}});const Mt=$t.ref("select"),Tt=$t.ref("cursor","index"),At=$t.ref("cursor","isShown"),Ct=$t.ref("prevTool"),St=$t.ref("tool"),Et="tool";function It(e){for(const[t,{type:n}]of Object.entries(e.elements))xt.includes(n)&&($t.ref("marks",n).replace(t),"filled"===n&&($t.ref("tool").replace(t),$t.ref("prevTool").replace(t)))}var Ot=Ot||{};Ot.Geometry=function(){},Ot.Geometry.intersectLineLine=function(e,t){var n=(e.intercept-t.intercept)/(t.slope-e.slope);return{x:n,y:e.slope*n+e.intercept}},Ot.Geometry.distanceFromOrigin=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},Ot.Geometry.distanceLineFromOrigin=function(e){return Math.abs(e.intercept)/Math.sqrt(Math.pow(e.slope,2)+1)},Ot.Geometry.perpendicularThroughPoint=function(e,t){var n=-1/e.slope;return{slope:n,intercept:t.y-n*t.x}},Ot.Geometry.angleFromOrigin=function(e){return Math.atan2(e.y,e.x)},Ot.Geometry.normalizeAngle=function(e){var t=2*Math.PI;return(e%t+t)%t},Ot.Geometry.lengthOfRayUntilIntersect=function(e,t){return t.intercept/(Math.sin(e)-t.slope*Math.cos(e))},Ot.Hsluv=function(){},Ot.Hsluv.getBounds=function(e){for(var t=[],n=Math.pow(e+16,3)/1560896,r=n>Ot.Hsluv.epsilon?n:e/Ot.Hsluv.kappa,o=0;o<3;)for(var i=o++,s=Ot.Hsluv.m[i][0],l=Ot.Hsluv.m[i][1],c=Ot.Hsluv.m[i][2],a=0;a<2;){var u=a++,d=(284517*s-94839*c)*r,h=(838422*c+769860*l+731718*s)*e*r-769860*u*e,f=(632260*c-126452*l)*r+126452*u;t.push({slope:d/f,intercept:h/f})}return t},Ot.Hsluv.maxSafeChromaForL=function(e){for(var t=Ot.Hsluv.getBounds(e),n=1/0,r=0;r<t.length;){var o=t[r];++r;var i=Ot.Geometry.distanceLineFromOrigin(o);n=Math.min(n,i)}return n},Ot.Hsluv.maxChromaForLH=function(e,t){for(var n=t/360*Math.PI*2,r=Ot.Hsluv.getBounds(e),o=1/0,i=0;i<r.length;){var s=r[i];++i;var l=Ot.Geometry.lengthOfRayUntilIntersect(n,s);l>=0&&(o=Math.min(o,l))}return o},Ot.Hsluv.dotProduct=function(e,t){for(var n=0,r=0,o=e.length;r<o;){var i=r++;n+=e[i]*t[i]}return n},Ot.Hsluv.fromLinear=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,.4166666666666667)-.055},Ot.Hsluv.toLinear=function(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92},Ot.Hsluv.xyzToRgb=function(e){return[Ot.Hsluv.fromLinear(Ot.Hsluv.dotProduct(Ot.Hsluv.m[0],e)),Ot.Hsluv.fromLinear(Ot.Hsluv.dotProduct(Ot.Hsluv.m[1],e)),Ot.Hsluv.fromLinear(Ot.Hsluv.dotProduct(Ot.Hsluv.m[2],e))]},Ot.Hsluv.rgbToXyz=function(e){var t=[Ot.Hsluv.toLinear(e[0]),Ot.Hsluv.toLinear(e[1]),Ot.Hsluv.toLinear(e[2])];return[Ot.Hsluv.dotProduct(Ot.Hsluv.minv[0],t),Ot.Hsluv.dotProduct(Ot.Hsluv.minv[1],t),Ot.Hsluv.dotProduct(Ot.Hsluv.minv[2],t)]},Ot.Hsluv.yToL=function(e){return e<=Ot.Hsluv.epsilon?e/Ot.Hsluv.refY*Ot.Hsluv.kappa:116*Math.pow(e/Ot.Hsluv.refY,.3333333333333333)-16},Ot.Hsluv.lToY=function(e){return e<=8?Ot.Hsluv.refY*e/Ot.Hsluv.kappa:Ot.Hsluv.refY*Math.pow((e+16)/116,3)},Ot.Hsluv.xyzToLuv=function(e){var t=e[0],n=e[1],r=t+15*n+3*e[2],o=4*t,i=9*n;0!=r?(o/=r,i/=r):(o=NaN,i=NaN);var s=Ot.Hsluv.yToL(n);return 0==s?[0,0,0]:[s,13*s*(o-Ot.Hsluv.refU),13*s*(i-Ot.Hsluv.refV)]},Ot.Hsluv.luvToXyz=function(e){var t=e[0],n=e[1],r=e[2];if(0==t)return[0,0,0];var o=n/(13*t)+Ot.Hsluv.refU,i=r/(13*t)+Ot.Hsluv.refV,s=Ot.Hsluv.lToY(t),l=0-9*s*o/((o-4)*i-o*i);return[l,s,(9*s-15*i*s-i*l)/(3*i)]},Ot.Hsluv.luvToLch=function(e){var t,n=e[0],r=e[1],o=e[2],i=Math.sqrt(r*r+o*o);i<1e-8?t=0:(t=180*Math.atan2(o,r)/Math.PI)<0&&(t=360+t);return[n,i,t]},Ot.Hsluv.lchToLuv=function(e){var t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,Math.cos(r)*n,Math.sin(r)*n]},Ot.Hsluv.hsluvToLch=function(e){var t=e[0],n=e[1],r=e[2];return r>99.9999999?[100,0,t]:r<1e-8?[0,0,t]:[r,Ot.Hsluv.maxChromaForLH(r,t)/100*n,t]},Ot.Hsluv.lchToHsluv=function(e){var t=e[0],n=e[1],r=e[2];return t>99.9999999?[r,0,100]:t<1e-8?[r,0,0]:[r,n/Ot.Hsluv.maxChromaForLH(t,r)*100,t]},Ot.Hsluv.hpluvToLch=function(e){var t=e[0],n=e[1],r=e[2];return r>99.9999999?[100,0,t]:r<1e-8?[0,0,t]:[r,Ot.Hsluv.maxSafeChromaForL(r)/100*n,t]},Ot.Hsluv.lchToHpluv=function(e){var t=e[0],n=e[1],r=e[2];return t>99.9999999?[r,0,100]:t<1e-8?[r,0,0]:[r,n/Ot.Hsluv.maxSafeChromaForL(t)*100,t]},Ot.Hsluv.rgbToHex=function(e){for(var t="#",n=0;n<3;){var r=e[n++],o=Math.round(255*r),i=o%16,s=(o-i)/16|0;t+=Ot.Hsluv.hexChars.charAt(s)+Ot.Hsluv.hexChars.charAt(i)}return t},Ot.Hsluv.hexToRgb=function(e){e=e.toLowerCase();for(var t=[],n=0;n<3;){var r=n++,o=16*Ot.Hsluv.hexChars.indexOf(e.charAt(2*r+1))+Ot.Hsluv.hexChars.indexOf(e.charAt(2*r+2));t.push(o/255)}return t},Ot.Hsluv.lchToRgb=function(e){return Ot.Hsluv.xyzToRgb(Ot.Hsluv.luvToXyz(Ot.Hsluv.lchToLuv(e)))},Ot.Hsluv.rgbToLch=function(e){return Ot.Hsluv.luvToLch(Ot.Hsluv.xyzToLuv(Ot.Hsluv.rgbToXyz(e)))},Ot.Hsluv.hsluvToRgb=function(e){return Ot.Hsluv.lchToRgb(Ot.Hsluv.hsluvToLch(e))},Ot.Hsluv.rgbToHsluv=function(e){return Ot.Hsluv.lchToHsluv(Ot.Hsluv.rgbToLch(e))},Ot.Hsluv.hpluvToRgb=function(e){return Ot.Hsluv.lchToRgb(Ot.Hsluv.hpluvToLch(e))},Ot.Hsluv.rgbToHpluv=function(e){return Ot.Hsluv.lchToHpluv(Ot.Hsluv.rgbToLch(e))},Ot.Hsluv.hsluvToHex=function(e){return Ot.Hsluv.rgbToHex(Ot.Hsluv.hsluvToRgb(e))},Ot.Hsluv.hpluvToHex=function(e){return Ot.Hsluv.rgbToHex(Ot.Hsluv.hpluvToRgb(e))},Ot.Hsluv.hexToHsluv=function(e){return Ot.Hsluv.rgbToHsluv(Ot.Hsluv.hexToRgb(e))},Ot.Hsluv.hexToHpluv=function(e){return Ot.Hsluv.rgbToHpluv(Ot.Hsluv.hexToRgb(e))},Ot.Hsluv.m=[[3.240969941904521,-1.537383177570093,-.498610760293],[-.96924363628087,1.87596750150772,.041555057407175],[.055630079696993,-.20397695888897,1.056971514242878]],Ot.Hsluv.minv=[[.41239079926595,.35758433938387,.18048078840183],[.21263900587151,.71516867876775,.072192315360733],[.019330818715591,.11919477979462,.95053215224966]],Ot.Hsluv.refY=1,Ot.Hsluv.refU=.19783000664283,Ot.Hsluv.refV=.46831999493879,Ot.Hsluv.kappa=903.2962962,Ot.Hsluv.epsilon=.0088564516,Ot.Hsluv.hexChars="0123456789abcdef";var Ht={hsluvToRgb:Ot.Hsluv.hsluvToRgb,rgbToHsluv:Ot.Hsluv.rgbToHsluv,hpluvToRgb:Ot.Hsluv.hpluvToRgb,rgbToHpluv:Ot.Hsluv.rgbToHpluv,hsluvToHex:Ot.Hsluv.hsluvToHex,hexToHsluv:Ot.Hsluv.hexToHsluv,hpluvToHex:Ot.Hsluv.hpluvToHex,hexToHpluv:Ot.Hsluv.hexToHpluv,lchToHpluv:Ot.Hsluv.lchToHpluv,hpluvToLch:Ot.Hsluv.hpluvToLch,lchToHsluv:Ot.Hsluv.lchToHsluv,hsluvToLch:Ot.Hsluv.hsluvToLch,lchToLuv:Ot.Hsluv.lchToLuv,luvToLch:Ot.Hsluv.luvToLch,xyzToLuv:Ot.Hsluv.xyzToLuv,luvToXyz:Ot.Hsluv.luvToXyz,xyzToRgb:Ot.Hsluv.xyzToRgb,rgbToXyz:Ot.Hsluv.rgbToXyz,lchToRgb:Ot.Hsluv.lchToRgb,rgbToLch:Ot.Hsluv.rgbToLch};const Lt=/R(\d+)C(\d+)/i;function Dt(e){const t=Lt.exec(e);if(null==t)throw Error(`Failed to parse RC string: ${e}.`);const n=Number(t[1]);return[Number(t[2])-1,n-1]}function jt(e){return Array.isArray?Array.isArray(e):"[object Array]"===zt(e)}function Nt(e){return"string"==typeof e}function Rt(e){return"number"==typeof e}function Ut(e){return!0===e||!1===e||function(e){return Pt(e)&&null!==e}(e)&&"[object Boolean]"==zt(e)}function Pt(e){return"object"==typeof e}function Gt(e){return null!=e}function Ft(e){return!e.trim().length}function zt(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Bt=Object.prototype.hasOwnProperty;class Vt{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=Wt(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Wt(e){let t=null,n=null,r=null,o=1;if(Nt(e)||jt(e))r=e,t=Yt(e),n=qt(e);else{if(!Bt.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const i=e.name;if(r=i,Bt.call(e,"weight")&&(o=e.weight,o<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(i));t=Yt(i),n=qt(i)}return{path:t,id:n,weight:o,src:r}}function Yt(e){return jt(e)?e:e.split(".")}function qt(e){return jt(e)?e.join("."):e}var Kt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const o=(e,t,i)=>{if(Gt(e))if(t[i]){const s=e[t[i]];if(!Gt(s))return;if(i===t.length-1&&(Nt(s)||Rt(s)||Ut(s)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(s));else if(jt(s)){r=!0;for(let e=0,n=s.length;e<n;e+=1)o(s[e],t,i+1)}else t.length&&o(s,t,i+1)}else n.push(e)};return o(e,Nt(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const Xt=/[^ ]+/g;class Jt{constructor({getFn:e=Kt.getFn}={}){this.norm=function(e=3){const t=new Map,n=Math.pow(10,e);return{get(e){const r=e.match(Xt).length;if(t.has(r))return t.get(r);const o=1/Math.sqrt(r),i=parseFloat(Math.round(o*n)/n);return t.set(r,i),i},clear(){t.clear()}}}(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Nt(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Nt(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Gt(e)||Ft(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,r)=>{let o=this.getFn(e,t.path);if(Gt(o))if(jt(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(Gt(r))if(Nt(r)&&!Ft(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else jt(r)&&r.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[r]=e}else if(!Ft(o)){let e={v:o,n:this.norm.get(o)};n.$[r]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Zt(e,t,{getFn:n=Kt.getFn}={}){const r=new Jt({getFn:n});return r.setKeys(e.map(Wt)),r.setSources(t),r.create(),r}function Qt(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:o=Kt.distance,ignoreLocation:i=Kt.ignoreLocation}={}){const s=t/e.length;if(i)return s;const l=Math.abs(r-n);return o?s+l/o:l?1:s}const en=32;function tn(e,t,n,{location:r=Kt.location,distance:o=Kt.distance,threshold:i=Kt.threshold,findAllMatches:s=Kt.findAllMatches,minMatchCharLength:l=Kt.minMatchCharLength,includeMatches:c=Kt.includeMatches,ignoreLocation:a=Kt.ignoreLocation}={}){if(t.length>en)throw new Error(`Pattern length exceeds max of ${en}.`);const u=t.length,d=e.length,h=Math.max(0,Math.min(r,d));let f=i,p=h;const g=l>1||c,m=g?Array(d):[];let v;for(;(v=e.indexOf(t,p))>-1;){let e=Qt(t,{currentLocation:v,expectedLocation:h,distance:o,ignoreLocation:a});if(f=Math.min(e,f),p=v+u,g){let e=0;for(;e<u;)m[v+e]=1,e+=1}}p=-1;let y=[],b=1,w=u+d;const k=1<<u-1;for(let r=0;r<u;r+=1){let i=0,l=w;for(;i<l;){Qt(t,{errors:r,currentLocation:h+l,expectedLocation:h,distance:o,ignoreLocation:a})<=f?i=l:w=l,l=Math.floor((w-i)/2+i)}w=l;let c=Math.max(1,h-l+1),v=s?d:Math.min(h+l,d)+u,x=Array(v+2);x[v+1]=(1<<r)-1;for(let i=v;i>=c;i-=1){let s=i-1,l=n[e.charAt(s)];if(g&&(m[s]=+!!l),x[i]=(x[i+1]<<1|1)&l,r&&(x[i]|=(y[i+1]|y[i])<<1|1|y[i+1]),x[i]&k&&(b=Qt(t,{errors:r,currentLocation:s,expectedLocation:h,distance:o,ignoreLocation:a}),b<=f)){if(f=b,p=s,p<=h)break;c=Math.max(1,2*h-p)}}if(Qt(t,{errors:r+1,currentLocation:h,expectedLocation:h,distance:o,ignoreLocation:a})>f)break;y=x}const x={isMatch:p>=0,score:Math.max(.001,b)};if(g){const e=function(e=[],t=Kt.minMatchCharLength){let n=[],r=-1,o=-1,i=0;for(let s=e.length;i<s;i+=1){let s=e[i];s&&-1===r?r=i:s||-1===r||(o=i-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}(m,l);e.length?c&&(x.indices=e):x.isMatch=!1}return x}function nn(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}class rn{constructor(e,{location:t=Kt.location,threshold:n=Kt.threshold,distance:r=Kt.distance,includeMatches:o=Kt.includeMatches,findAllMatches:i=Kt.findAllMatches,minMatchCharLength:s=Kt.minMatchCharLength,isCaseSensitive:l=Kt.isCaseSensitive,ignoreLocation:c=Kt.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(e,t)=>{this.chunks.push({pattern:e,alphabet:nn(e),startIndex:t})},u=this.pattern.length;if(u>en){let e=0;const t=u%en,n=u-t;for(;e<n;)a(this.pattern.substr(e,en),e),e+=en;if(t){const e=u-en;a(this.pattern.substr(e),e)}}else a(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:r,distance:o,threshold:i,findAllMatches:s,minMatchCharLength:l,ignoreLocation:c}=this.options;let a=[],u=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:h,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=tn(e,t,h,{location:r+f,distance:o,threshold:i,findAllMatches:s,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});p&&(d=!0),u+=g,p&&m&&(a=[...a,...m])}));let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=a),h}}class on{constructor(e){this.pattern=e}static isMultiMatch(e){return sn(e,this.multiRegex)}static isSingleMatch(e){return sn(e,this.singleRegex)}search(){}}function sn(e,t){const n=e.match(t);return n?n[1]:null}class ln extends on{constructor(e,{location:t=Kt.location,threshold:n=Kt.threshold,distance:r=Kt.distance,includeMatches:o=Kt.includeMatches,findAllMatches:i=Kt.findAllMatches,minMatchCharLength:s=Kt.minMatchCharLength,isCaseSensitive:l=Kt.isCaseSensitive,ignoreLocation:c=Kt.ignoreLocation}={}){super(e),this._bitapSearch=new rn(e,{location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class cn extends on{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,r.push([t,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const an=[class extends on{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},cn,class extends on{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends on{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends on{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends on{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends on{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},ln],un=an.length,dn=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const hn=new Set([ln.type,cn.type]);class fn{constructor(e,{isCaseSensitive:t=Kt.isCaseSensitive,includeMatches:n=Kt.includeMatches,minMatchCharLength:r=Kt.minMatchCharLength,ignoreLocation:o=Kt.ignoreLocation,findAllMatches:i=Kt.findAllMatches,location:s=Kt.location,threshold:l=Kt.threshold,distance:c=Kt.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:o,location:s,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(dn).filter((e=>e&&!!e.trim())),r=[];for(let e=0,o=n.length;e<o;e+=1){const o=n[e];let i=!1,s=-1;for(;!i&&++s<un;){const e=an[s];let n=e.isMultiMatch(o);n&&(r.push(new e(n,t)),i=!0)}if(!i)for(s=-1;++s<un;){const e=an[s];let n=e.isSingleMatch(o);if(n){r.push(new e(n,t));break}}}return r}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let o=0,i=[],s=0;for(let r=0,l=t.length;r<l;r+=1){const l=t[r];i.length=0,o=0;for(let t=0,r=l.length;t<r;t+=1){const r=l[t],{isMatch:c,indices:a,score:u}=r.search(e);if(!c){s=0,o=0,i.length=0;break}if(o+=1,s+=u,n){const e=r.constructor.type;hn.has(e)?i=[...i,...a]:i.push(a)}}if(o){let e={isMatch:!0,score:s/o};return n&&(e.indices=i),e}}return{isMatch:!1,score:1}}}const pn=[];function gn(e,t){for(let n=0,r=pn.length;n<r;n+=1){let r=pn[n];if(r.condition(e,t))return new r(e,t)}return new rn(e,t)}const mn="$and",vn="$or",yn="$path",bn="$val",wn=e=>!(!e[mn]&&!e[vn]),kn=e=>({[mn]:Object.keys(e).map((t=>({[t]:e[t]})))});function xn(e,t,{auto:n=!0}={}){const r=e=>{let o=Object.keys(e);const i=(e=>!!e[yn])(e);if(!i&&o.length>1&&!wn(e))return r(kn(e));if((e=>!jt(e)&&Pt(e)&&!wn(e))(e)){const r=i?e[yn]:o[0],s=i?e[bn]:e[r];if(!Nt(s))throw new Error((e=>`Invalid value for key ${e}`)(r));const l={keyId:qt(r),pattern:s};return n&&(l.searcher=gn(s,t)),l}let s={children:[],operator:o[0]};return o.forEach((t=>{const n=e[t];jt(n)&&n.forEach((e=>{s.children.push(r(e))}))})),s};return wn(e)||(e=kn(e)),r(e)}function $n(e,t){const n=e.matches;t.matches=[],Gt(n)&&n.forEach((e=>{if(!Gt(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let o={indices:n,value:r};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)}))}function _n(e,t){t.score=e.score}class Mn{constructor(e,t={},n){this.options={...Kt,...t},this.options.useExtendedSearch,this._keyStore=new Vt(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Jt))throw new Error("Incorrect 'index' type");this._myIndex=t||Zt(this.options.keys,this._docs,{getFn:this.options.getFn})}add(e){Gt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,r-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:i,ignoreFieldNorm:s}=this.options;let l=Nt(e)?Nt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Kt.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:r,score:o})=>{const i=e?e.weight:null;n*=Math.pow(0===o&&i?Number.EPSILON:o,(i||1)*(t?1:r))})),e.score=n}))}(l,{ignoreFieldNorm:s}),o&&l.sort(i),Rt(t)&&t>-1&&(l=l.slice(0,t)),function(e,t,{includeMatches:n=Kt.includeMatches,includeScore:r=Kt.includeScore}={}){const o=[];return n&&o.push($n),r&&o.push(_n),e.map((e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return o.length&&o.forEach((t=>{t(e,r)})),r}))}(l,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=gn(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:e,i:n,n:o})=>{if(!Gt(e))return;const{isMatch:i,score:s,indices:l}=t.searchIn(e);i&&r.push({item:e,idx:n,matches:[{score:s,value:e,norm:o,indices:l}]})})),r}_searchLogical(e){const t=xn(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:o}=e,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:o});return i&&i.length?[{idx:r,item:t,matches:i}]:[]}switch(e.operator){case mn:{const o=[];for(let i=0,s=e.children.length;i<s;i+=1){const s=e.children[i],l=n(s,t,r);if(!l.length)return[];o.push(...l)}return o}case vn:{const o=[];for(let i=0,s=e.children.length;i<s;i+=1){const s=e.children[i],l=n(s,t,r);if(l.length){o.push(...l);break}}return o}}},r=this._myIndex.records,o={},i=[];return r.forEach((({$:e,i:r})=>{if(Gt(e)){let s=n(t,e,r);s.length&&(o[r]||(o[r]={idx:r,item:e,matches:[]},i.push(o[r])),s.forEach((({matches:e})=>{o[r].matches.push(...e)})))}})),i}_searchObjectList(e){const t=gn(e,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach((({$:e,i:r})=>{if(!Gt(e))return;let i=[];n.forEach(((n,r)=>{i.push(...this._findMatches({key:n,value:e[r],searcher:t}))})),i.length&&o.push({idx:r,item:e,matches:i})})),o}_findMatches({key:e,value:t,searcher:n}){if(!Gt(t))return[];let r=[];if(jt(t))t.forEach((({v:t,i:o,n:i})=>{if(!Gt(t))return;const{isMatch:s,score:l,indices:c}=n.searchIn(t);s&&r.push({score:l,key:e,value:t,idx:o,norm:i,indices:c})}));else{const{v:o,n:i}=t,{isMatch:s,score:l,indices:c}=n.searchIn(o);s&&r.push({score:l,key:e,value:o,norm:i,indices:c})}return r}}function Tn(e){return!!e&&((0!==Object.keys(e.redo).length||0!==Object.keys(e.undo).length)&&($t.update({[`history/${Date.now()}`]:JSON.stringify(e),historyUndone:null}),!0))}function An(e){const t=$t.get(e?"historyUndone":"history")||{},n=Object.keys(t);if(0===n.length)return!1;const r=n.reduce(((t,n)=>e!==+t>+n?t:n)),o=t[`${r}`];null==o&&(console.warn("EMPTY HISTORY ENTRY",r,o),$t.update({[`${e?"historyUndone":"history"}/${r}`]:null}),An(e));const i=JSON.parse(o);return gt.update(e?i.redo:i.undo),$t.update({[`history/${r}`]:e?o:null,[`historyUndone/${r}`]:e?null:o}),!0}Mn.version="6.4.6",Mn.createIndex=Zt,Mn.parseIndex=function(e,{getFn:t=Kt.getFn}={}){const{keys:n,records:r}=e,o=new Jt({getFn:t});return o.setKeys(n),o.setIndexRecords(r),o},Mn.config=Kt,Mn.parseQuery=xn,function(...e){pn.push(...e)}(fn),window.changeHistory=An,window.addEventListener("keydown",(e=>{if("KeyZ"===e.code&&(e.ctrlKey||e.metaKey))An(e.shiftKey);else{if("KeyY"!==e.code||!e.ctrlKey&&!e.metaKey)return;An(!0)}e.preventDefault(),e.stopImmediatePropagation()}));const Cn=/^(?:Digit|Numpad)?(\d)$/,Sn={Delete:null,Backspace:null,NumpadDecimal:null};function En(e){if(e in Sn)return Sn[e];const t=Cn.exec(e);return t?Number(t[1]):void 0}function In(e){const t=e.target;if(t instanceof Element){const n=t.getBoundingClientRect(),r=e.changedTouches[0];if(null!=r)return{offsetX:r.pageX-n.left,offsetY:r.pageY-n.top}}return null}class On{constructor(e){this.onTap=null,this.onDoubleTap=null,this.onDrag=null,this.onDragStart=null,this.onDragEnd=null,this._prevPos=null,this._prevCell=null,this._isDown=!1,this._isTap=!1,this._lastTapTime=0,this._tapCount=0,this._lastTapPosition=null,this._interpolateBetweenCells=e}mouseDown(e,t,n){this._handleDown(e,e,t,n)}mouseMove(e,t,n){this._handleMove(e,e,t,n)}mouseUp(){this._handleUp()}touchDown(e,t,n){const r=In(e);null!=r&&this._handleDown(e,r,t,n)}touchMove(e,t,n){const r=In(e);null!=r&&this._handleMove(e,r,t,n)}touchUp(e,t,n){this._handleUp();const r=In(e);if(null==r)return;const o=(new Date).getTime(),i=R(r,n),s=o-this._lastTapTime;this._lastTapTime=o;let l=0;null!=this._lastTapPosition&&(l=F(i,this._lastTapPosition)),this._lastTapPosition=i,500>s&&0<s&&.25>l?this._tapCount+=1:this._tapCount=1,2===this._tapCount?this._handleDoubleClick(e,i,t,n):this._handleClick(e,i,t,n)}leave(e,t,n){this._isDown&&this._handle(e,e,t,n)}click(e,t,n){const r=R(e,n);2===e.detail?this._handleDoubleClick(e,r,t,n):this._handleClick(e,r,t,n)}_handleDown(e,t,n,r){this._isDown=!0,this._isTap=!0,this._handle(e,t,n,r)}_handleMove(e,t,n,r){this._isDown&&this._handle(e,t,n,r)}_handleUp(){this._isDown&&(this.onDragEnd&&this.onDragEnd(),this._prevPos=null,this._prevCell=null,this._isDown=!1)}_handleClick(e,t,n,r){if(this._isTap){const r=f(t,n,!1);null!=r&&this.onTap&&this.onTap({event:e,coord:r,grid:n})}}_handleDoubleClick(e,t,n,r){const o=f(t,n,!1);null!=o&&this.onDoubleTap&&this.onDoubleTap({event:e,coord:o,grid:n})}_handle(e,t,n,r){const o=R(t,r);if(this._interpolateBetweenCells&&null!=this._prevPos&&1<F(this._prevPos,o)){for(const t of function(e,t,n){const r=Math.floor(t[0])-Math.floor(e[0]),o=Math.floor(t[1])-Math.floor(e[1]),i=Math.max(Math.abs(r),Math.abs(o)),s=[];for(let r=1;r<=i;r++){const o=r/i,l=(1-o)*e[0]+o*t[0],c=(1-o)*e[1]+o*t[1];0<=l&&l<n.width&&0<=c&&c<n.height&&s.push([Math.floor(l),Math.floor(c)])}return s}(this._prevPos,o,n))this.onDrag&&this.onDrag({event:e,coord:t,grid:n}),this._prevCell=h(t,n);this._prevPos=o,this._isTap=!1}else{const t=f(o,n,!(null==this._prevPos));if(null!=t){this._prevPos=o;const r=h(t,n);if(null!=this._prevCell){if(this._prevCell===r)return;this._isTap=!1,this.onDrag&&this.onDrag({event:e,coord:t,grid:n})}else this._isTap&&this.onDragStart&&this.onDragStart({event:e,coord:t,grid:n});this._prevCell=r}}}}const Hn=new On(!1);function Ln(e,t,n,r){const{multipleDigits:o,blockedByGivens:i,blockedByFilled:s,digitMapping:l,nextMode:c}=r,a=["filled","corner","center","colors"];function u(t){let n=En(t);if(l&&null!=n&&n in l&&(n=l[n]),void 0===n)return!1;if(f(e,n))for(const e of a){const t=$t.get("marks",e);if(null==t)continue;if(!f(gt.ref("elements",`${t}`,"value"),n))break}return!0}function f(e,t){const n=function(e=!0,t=!0){return W(vt()||{},e,t)}(null!=t&&i,null!=t&&s),r={};let l=!0;for(const i of C(Mt.get()))null==n[i]&&(o&&null!=t?(r[`${i}/${t}`]=!0,l&&(l=!!e.ref(`${i}`,`${t}`).get())):(r[`${i}`]=t,l&&(l=t==e.ref(`${i}`).get())));if(l){if(null==t)return!0;for(const e of Object.keys(r))r[e]=null}return Tn(e.update(r)),!1}const p=new Set(["Shift","Control","Alt","Meta"]),g={KeyZ:"filled",KeyX:"corner",KeyC:"center",KeyV:"colors",Space:c};function m(e,t){!e.shiftKey&&e.getModifierState("NumLock")?setTimeout((()=>St.replace(t)),1):St.replace(t)}function v(e){if("keydown"===e.type&&e.code in g){const t=$t.get("marks",g[e.code]);return St.replace(t),Ct.replace(t),!0}if(!p.has(e.key))return!1;const t=St.get();if(e.shiftKey)e.ctrlKey||e.metaKey?m(e,$t.get("marks","colors")):m(e,$t.get("marks","corner"));else if(e.ctrlKey||e.metaKey)m(e,$t.get("marks","center"));else{if(!e.altKey)return m(e,Ct.get()),!0;m(e,$t.get("marks","colors"))}return null==Ct.get()&&(Ct.replace(t),!0)}const y={ArrowLeft:[-1,0],ArrowUp:[0,-1],ArrowRight:[1,0],ArrowDown:[0,1],KeyA:[-1,0],KeyW:[0,-1],KeyD:[1,0],KeyS:[0,1]};return{load(){},unload(){Hn.mouseUp()},blur(e){St.replace(Ct.get()),Mt.replace({})},keydown(e){(u(e.code)||v(e)||function(e){if(!(e.code in y))return!1;if(e.ctrlKey||e.metaKey)return!1;const[n,r]=y[e.code];let[o,i]=d(Tt.get()||0,t);o+=n+t.width,i+=r+t.height,o%=t.width,i%=t.height;const s=h([o,i],t);return Tt.replace(s),At.replace(!0),e.shiftKey?Mt.ref(`${s}`).replace(!0):e.ctrlKey?Mt.ref(`${s}`).replace(null):Mt.replace({[s]:!0}),!0}(e)||function(e){if(!e.ctrlKey&&!e.metaKey||"KeyA"!==e.code)return!1;const n={};for(let e=0;e<t.height;e++)for(let r=0;r<t.width;r++)n[h([r,e],t)]=!0;return Mt.replace(n),!0}(e))&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){v(e)&&(e.stopImmediatePropagation(),e.preventDefault())},padClick(e){u(e.currentTarget.value)},mouseDown(e){Hn.mouseDown(e,t,n)},mouseMove(e){Hn.mouseMove(e,t,n)},mouseUp(e){Hn.mouseUp()},leave(e){Hn.leave(e,t,n)},click(e){Hn.click(e,t,n)},touchDown(e){Hn.touchDown(e,t,n)},touchMove(e){Hn.touchMove(e,t,n)},touchUp(e){Hn.touchUp(e,t,n)}}}(()=>{let e;!function(e){e[e.RESETTING=0]="RESETTING",e[e.DYNAMIC=1]="DYNAMIC",e[e.SELECTING=2]="SELECTING",e[e.DESELECTING=3]="DESELECTING"}(e||(e={}));let t=e.RESETTING;function n(n){const{coord:r,grid:o}=n,i=h(r,o);Tt.replace(i),At.replace(!1),e.DYNAMIC===t&&(t=Mt.ref(`${i}`).get()?e.DESELECTING:e.SELECTING),Mt.ref(`${i}`).replace(e.SELECTING===t||null)}function r(e){const t={filled:null,colors:null,center:null,corner:null};for(const n of xt){const r=bt(n,e);if("filled"===n){const n=bt("givens",e);null!=n?t.filled=n:null!=r&&(t.filled=r)}else if(null!=r){const e=Object.keys(r);"center"===n?t.center=e:"corner"===n?t.corner=e:"colors"===n&&(t.colors=e)}}return null!=t.filled&&(t.center=null,t.corner=null),t}const o=["filled","colors","center","corner"];function i(e,t,n){return"filled"===e?n.filled===t.filled:"colors"===e?t.colors.some((e=>{var t;return null===(t=n.colors)||void 0===t?void 0:t.includes(e)})):"center"===e?t.center.every((e=>{var t;return null===(t=n.center)||void 0===t?void 0:t.includes(e)})):"corner"===e&&t.corner.some((e=>{var t;return null===(t=n.corner)||void 0===t?void 0:t.includes(e)}))}function s(e){const{coord:t,grid:n}=e,s=r(h(t,n)),l=function(e){const t=_t(St.get());if(null!=e[t])return t;for(const t of o)if(null!=e[t])return t;return null}(s);if(null==l)return;const c=function(e,t,n){const o={};for(let s=0;s<n.width;s++)for(let l=0;l<n.height;l++){const c=h([s,l],n);i(e,t,r(c))&&(o[c]=!0)}return o}(l,s,n);Mt.replace(c)}Hn.onDragStart=r=>{const{event:o}=r;if(t=function(t){return t.shiftKey?e.SELECTING:t.ctrlKey||t.metaKey?e.DYNAMIC:t.altKey?e.DESELECTING:e.RESETTING}(o),e.RESETTING===t){const{coord:n,grid:o}=r,i=h(n,o),s=Mt.get()||{};if(1===Object.keys(s).length&&s[i])return;Mt.replace({[i]:!0}),t=e.SELECTING}n(r)},Hn.onDrag=r=>{e.RESETTING===t&&(t=e.SELECTING),n(r)},Hn.onTap=n=>{e.RESETTING===t&&Mt.replace({})},Hn.onDoubleTap=e=>{s(e)}})();const Dn={getInputHandler:(e,t,n)=>Ln(e,t,n,{multipleDigits:!1,blockedByGivens:!1,blockedByFilled:!1,nextMode:"corner"}),order:220,permanent:!0,inGlobalMenu:!1,menu:{type:"select",name:"Given",icon:"given"}},jn={getInputHandler:(e,t,n)=>Ln(e,t,n,{multipleDigits:!1,blockedByGivens:!0,blockedByFilled:!1,nextMode:"corner"}),order:210},Nn={getInputHandler:(e,t,n)=>Ln(e,t,n,{multipleDigits:!0,blockedByGivens:!0,blockedByFilled:!0,nextMode:"center"}),order:200},Rn={getInputHandler:(e,t,n)=>Ln(e,t,n,{multipleDigits:!0,blockedByGivens:!0,blockedByFilled:!0,nextMode:"colors"}),order:200},Un={getInputHandler:(e,t,n)=>Ln(e,t,n,{multipleDigits:!0,blockedByGivens:!1,blockedByFilled:!1,nextMode:"filled",digitMapping:Pn}),order:10},Pn=["#111111","#666666","#b2b2b2",Ht.hsluvToHex([10,100,60]),Ht.hsluvToHex([40,100,65]),Ht.hsluvToHex([70,100,92]),Ht.hsluvToHex([120,100,80]),Ht.hsluvToHex([230,100,85]),Ht.hsluvToHex([260,100,55]),Ht.hsluvToHex([300,100,70])];function Gn(e,t,n,r){const{deletePrioritizeHead:o,deletePrioritizeTail:s,allowSelfIntersection:l}=r,c=new On(!0);let a=null;const d=[];function f(e){if(null==a)throw"UNREACHABLE";const{coord:t,grid:n}=e,r=h(t,n),o=d.indexOf(r,l?d.length-2:0);0<=o?d.length=o+1:d.push(r),a.replace(1<d.length?d:null)}return c.onDragStart=t=>{d.length=0,a=e.ref(i()),f(t)},c.onDrag=e=>{f(e)},c.onDragEnd=()=>{if(null==a)throw new Error("Line handler, onDragEnd NULL lineRef.");if(1>=d.length)a.replace(null);else{const e=a.path().join("/"),t={redo:{},undo:{[e]:null}};for(let n=0;n<d.length;n++)t.redo[`${e}/${n}`]=d[n];Tn(t)}a=null},c.onTap=t=>{const{coord:n,grid:r}=t,i=h(n,r);let l=null;for(const[t,n]of Object.entries(e.get()||{})){const e=u(n);if(o&&i===e[0]){l=t;break}if(s&&i===e[e.length-1]){l=t;break}e.includes(i)&&(l=t)}null!=l&&Tn(e.ref(`${l}`).replace(null))},{load(){Mt.replace(null),At.replace(!1)},unload(){c.mouseUp()},blur(e){},keydown(e){},keyup(e){},padClick(e){},mouseDown(e){c.mouseDown(e,t,n)},mouseMove(e){c.mouseMove(e,t,n)},mouseUp(e){c.mouseUp()},leave(e){c.leave(e,t,n)},click(e){c.click(e,t,n)},touchDown(e){c.touchDown(e,t,n)},touchMove(e){c.touchMove(e,t,n)},touchUp(e){c.touchUp(e,t,n)}}}function Fn(e,t,n,r){for(const o of Object.values(e||{})){const e=u(o);{let o=Number.NEGATIVE_INFINITY;for(const i of e){const e=t[i];null!=e&&(o<e?o=e:n[i]=o!=e||r)}}{e.reverse();let o=Number.POSITIVE_INFINITY;for(const i of e){const e=t[i];null!=e&&(o>e?o=e:o==e?r&&(n[i]=!0):n[i]=!0)}}}}function zn(e,t,n,r,o){return{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!1,deletePrioritizeTail:!1,allowSelfIntersection:!0}),order:70,inGlobalMenu:!1,menu:{type:"select",name:t,icon:n},getWarnings(t,n,r,o,i){const s=e(n.width);for(const e of Object.values(t||{})){const t=u(e);for(let e=1;e<t.length;e++){const n=t[e-1],r=t[e],l=o[n],c=o[r];null!=l&&null!=c&&(Math.abs(l-c)<s&&(i[n]=!0,i[r]=!0))}}},meta:{description:r,tags:o,category:["local","line"]}}}function Bn(e,t,n,r){for(const[o,i]of e){const e=h(o,t),s=h(i,t),l=n[e],c=n[s];null!=l&&null!=c&&(1===Math.abs(l-c)&&(r[e]=!0,r[s]=!0))}}function Vn(e,t,n,r){const o=J(e);for(const[i,s]of o){const o=h(i,e),l=h(s,e),c=t[o],a=t[l];null!=c&&null!=a&&(c+a===r&&(n[o]=!0,n[l]=!0))}}function Wn(e,t,n,r){const o=new On(!0);let i;!function(e){e[e.DYNAMIC=0]="DYNAMIC",e[e.ADDING=1]="ADDING",e[e.REMOVING=2]="REMOVING"}(i||(i={}));let s=i.DYNAMIC;const l={redo:{},undo:{}};function c(t){const{coord:n,grid:o}=t,c=h(n,o);i.DYNAMIC===s&&(s=e.ref(`${c}`).get()?i.REMOVING:i.ADDING);if(bt(r,c))return;const a=s===i.ADDING||null,u=e.ref(`${c}`).replace(a);null!=u&&(Object.assign(l.redo,u.redo),Object.assign(l.undo,u.undo))}return o.onDragStart=e=>{s=i.DYNAMIC,c(e)},o.onDrag=e=>{c(e)},o.onDragEnd=()=>{Tn(l),l.redo={},l.undo={}},{load(){Mt.replace(null),At.replace(!1)},unload(){o.mouseUp()},blur(e){},keydown(e){},keyup(e){},padClick(e){},mouseDown(e){o.mouseDown(e,t,n)},mouseMove(e){o.mouseMove(e,t,n)},mouseUp(e){o.mouseUp()},leave(e){o.leave(e,t,n)},click(e){o.click(e,t,n)},touchDown(e){o.touchDown(e,t,n)},touchMove(e){o.touchMove(e,t,n)},touchUp(e){o.touchUp(e,t,n)}}}function Yn(e,t,n,r,o,i){const s=C(e||{});for(const e of s){const s=n[e];if(null==s)continue;const[l,c]=d(e,t),a=h(o(c,l,s),t),u=n[a];null!=u&&(i(c,l,u)&&(r[e]=!0,r[a]=!0))}}function qn(e,t,n,r){const o=r.keymap||{},{max:i,svgCoord2idx:s}=r;let l=null;function c(e){if(null==l)return!1;let t;if(t=e in o?o[e]:En(e),void 0===t)return!1;const n=l.get();if(null!=t&&"number"==typeof n){const e=10*n+t;e<i&&(t=e)}return Tn(l.replace(null!=t?t:!0!==n||null)),!0}function a(r){const o=s(R(r,n),t);if(null==o)return;const i=e.ref(`${o}`);!0!==i.get()?(l=i,c("Delete")):i.replace(null)}return{load(){Mt.replace(null),At.replace(!1)},unload(){},blur(e){},keydown(e){c(e.code)&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){},padClick(e){c(e.currentTarget.value)&&(e.stopImmediatePropagation(),e.preventDefault())},mouseDown(e){},mouseMove(e){},mouseUp(e){},leave(e){},click(e){a(e)},touchDown(e){const t=In(e);null!=t&&a(t)},touchMove(e){},touchUp(e){}}}function Kn(e){e++;const t=[];for(;0<e;){const n=--e%26;e=Math.floor(e/26),t.unshift(String.fromCharCode(65+n))}return t.join("")}const Xn={givens:Dn,filled:jn,center:Rn,corner:Nn,colors:Un,grid:{order:101,permanent:!0,getWarnings(e,t,n,r,o){for(let e=0;e<t.height;e++)O(r,E(e,t),o);for(let e=0;e<t.width;e++)O(r,I(e,t),o)}},gridRegion:{order:100,permanent:!0,getWarnings(e,t,n,r,o){if(null==e)return;const i=u(e||{});for(const e of i)O(r,C(e),o)}},thermo:{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!0,deletePrioritizeTail:!1,allowSelfIntersection:!1}),order:30,inGlobalMenu:!1,menu:{type:"select",name:"Thermo",icon:"thermo"},getWarnings(e,t,n,r,o){Fn(e,r,o,!0)},meta:{description:"Digits on thermos increase from bulb to tip and may not repeat.",tags:["line","non-repeat","thermometer"],category:["local","line"]}},slowThermo:{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!0,deletePrioritizeTail:!1,allowSelfIntersection:!1}),order:30,inGlobalMenu:!1,menu:{type:"select",name:"Slow Thermo",icon:"slow-thermo"},getWarnings(e,t,n,r,o){Fn(e,r,o,!1)},meta:{description:"Digits on slow thermos increase or stay the same from bulb to tip; digits may repeat.",tags:["line","repeat","thermometer"],category:["local","line"]}},between:{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!0,deletePrioritizeTail:!0,allowSelfIntersection:!0}),order:50,inGlobalMenu:!1,menu:{type:"select",name:"Between",icon:"between"},getWarnings(e,t,n,r,o){for(const t of Object.values(e||{})){const e=u(t);if(3>e.length)continue;const n=e.shift(),i=e.pop(),s=r[n],l=r[i];if(null==s||null==l)continue;const c=Math.min(s,l),a=Math.max(s,l);for(const t of e){const e=r[t];null!=e&&(e<=c||a<=e)&&(o[t]=!0,o[n]=!0,o[i]=!0)}}},meta:{description:"Digits on between lines must be greater than one circle and less than the other; digits may repeat.",tags:["line","range"],category:["local","line"]}},lockout:{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!0,deletePrioritizeTail:!0,allowSelfIntersection:!0}),order:50,inGlobalMenu:!1,menu:{type:"select",name:"Lockout",icon:"lockout"},getWarnings(e,t,n,r,o){const i=(t.width+1>>1)-1;for(const t of Object.values(e||{})){const e=u(t),n=e.shift(),s=e.pop(),l=r[n],c=r[s];if(null==l||null==c)continue;const a=Math.min(l,c),d=Math.max(l,c);d-a<i&&(o[n]=!0,o[s]=!0);for(const t of e){const e=r[t];null!=e&&a<=e&&e<=d&&(o[t]=!0,o[n]=!0,o[s]=!0)}}},meta:{description:"Digits on lockout lines must not be between or equal to the digits in the circles. Circles must differ by at least 4. Digits may repeat.",tags:["line","range"],category:["local","line"]}},doubleArrow:{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!0,deletePrioritizeTail:!0,allowSelfIntersection:!0}),order:50,inGlobalMenu:!1,menu:{type:"select",name:"Double Arrow",icon:"double-arrow"},getWarnings(e,t,n,r,o){for(const t of Object.values(e||{})){const e=u(t);if(3>e.length)continue;const n=e.shift(),i=e.pop(),s=r[n],l=r[i];if(null==s||null==l)continue;const c=s+l;let a=0,d=!0;for(const t of e){const e=r[t];null==e?d=!1:a+=e}(c<a||d&&c!==a)&&(o[n]=!0,o[i]=!0,e.forEach((e=>o[e]=!0)))}},meta:{description:"Digits on the line must have the same sum as the two circles; digits may repeat.",tags:["line","sum"],category:["local","line"]}},palindrome:{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!1,deletePrioritizeTail:!1,allowSelfIntersection:!0}),order:60,inGlobalMenu:!1,menu:{type:"select",name:"Palindrome",icon:"palindrome"},getWarnings(e,t,n,r,o){for(const t of Object.values(e||{})){const e=u(t),n=e.slice(0,e.length>>1),i=e.slice(-n.length);i.reverse(),L(r,n,i,o)}},meta:{description:"Digits along palindromes must read the same from both ends.",tags:["line"],category:["local","line"]}},whisper:zn((e=>e+1>>1),"German Whisper","whisper","Adjacent digits along German Whispers must differ by at least 5; digits may repeat.",["line","german","five","5"]),dutchWhisper:zn((e=>(e+1>>1)-1),"Dutch Whisper","dutch-whisper","Adjacent digits along Dutch Whispers must differ by at least 4; digits may repeat.",["line","dutch","five","4"]),renban:{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!1,deletePrioritizeTail:!1,allowSelfIntersection:!0}),order:80,inGlobalMenu:!1,menu:{type:"select",name:"Renban",icon:"renban"},getWarnings(e,t,n,r,o){e:for(const t of Object.values(e||{})){const e=[...new Set(u(t))],n=[];for(const t of e){const e=r[t];if(null==e)continue e;n.push(e)}n.sort(((e,t)=>e-t));for(let t=1;t<n.length;t++)if(n[t-1]+1!==n[t]){e.forEach((e=>o[e]=!0));continue e}}},meta:{description:"Digits along renban lines must be in a consecutive set in any order; digits may not repeat.",tags:["line","non-repeat"],category:["local","line"]}},regionSum:{getInputHandler:(e,t,n)=>Gn(e,t,n,{deletePrioritizeHead:!1,deletePrioritizeTail:!1,allowSelfIntersection:!0}),order:80,inGlobalMenu:!1,menu:{type:"select",name:"Region Sum",icon:"region-sum"},getWarnings(e,t,n,r,o){for(const t of Object.values(e||{})){const e=u(t);if(0===e.length)continue;const i=[];let s=0,l=n[e[0]],c=0;for(let t=0;t<e.length;t++){const o=e[t];n[o]!=l&&(i.push({startIdx:s,endIdx:t,sum:c}),s=t,l=n[o],c=0);const a=r[o];if(null==a){for(;t<e.length&&n[e[t]]===l;)t++;s=t,l=n[e[t]],c=0,t--}else c+=a}s!==e.length&&i.push({startIdx:s,endIdx:e.length,sum:c}),i.every((e=>e.sum===i[0].sum))||i.forEach((t=>{for(let n=t.startIdx;n<t.endIdx;n++)o[e[n]]=!0}))}},meta:{description:"Digits along region sum lines sum to the same value in each region it passes through. Each instance of a single line that passes through a box is counted separately. Different lines may have different sums.",tags:["line","region sum"],category:["local","line"]}},arrow:{getInputHandler:function(e,t,n){const r=new On(!0);let o;!function(e){e.DYNAMIC="",e.BULB="bulb",e.BODY="body"}(o||(o={}));let s=o.DYNAMIC,l=null,c=[],a=[];function f(t){const{coord:n,grid:r}=t,f=h(n,r);if(o.DYNAMIC===s&&function(t){const n=e.get()||{};for(const[r,{bulb:d,body:h}]of Object.entries(n)){const n=u(d||{});if(n.includes(t)){const d=0>=u(h||{}).length;return l=d?e.ref(r):e.ref(i()),s=o.BODY,c=n,a=[t],void l.ref(o.BULB).replace(n)}}l=e.ref(i()),s=o.BULB,c=[t],a=[]}(f),null==l)throw"UNREACHABLE";const p=o.BULB===s?c:a,g=p.lastIndexOf(f);0<=g?o.BODY===s&&0===g&&2<p.length?p.push(f):p.length=g+1:p.push(f),o.BULB===s&&function(e,t){let n=-1,r=Number.POSITIVE_INFINITY;e.sort(((e,t)=>e-t));const o=[];for(const i of e){const[e,s]=d(i,t);if(s===r)for(let r=n+1;r<e;r++)o.push(h([r,s],t));n=e,r=s}e.push(...o),e.sort(((e,t)=>e-t))}(p,r);const m=o.BULB===s?1:2;l.ref(s).replace(m<=p.length?p:null)}return r.onDragStart=e=>{s=o.DYNAMIC,f(e)},r.onDrag=e=>{f(e)},r.onDragEnd=()=>{if(null==l)throw"UNREACHABLE";if(0>=c.length||1===a.length)l.replace(null);else{const e=l.path().join("/"),t={redo:{},undo:{[e]:null}};c.forEach(((n,r)=>t.redo[`${e}/bulb/${r}`]=n)),a.forEach(((n,r)=>t.redo[`${e}/body/${r}`]=n)),Tn(t)}l=null},r.onTap=t=>{if(o.BODY!==s)return;const{coord:n,grid:r}=t,i=h(n,r);let l=null;for(const[t,{bulb:n}]of Object.entries(e.get()||{}))if(u(n||{}).includes(i)){l=t;break}null!=l&&Tn(e.ref(`${l}`).replace(null))},{load(){Mt.replace(null),At.replace(!1)},unload(){r.mouseUp()},blur(e){},keydown(e){},keyup(e){},padClick(e){},mouseDown(e){r.mouseDown(e,t,n)},mouseMove(e){r.mouseMove(e,t,n)},mouseUp(e){r.mouseUp()},leave(e){r.leave(e,t,n)},click(e){r.click(e,t,n)},touchDown(e){r.touchDown(e,t,n)},touchMove(e){r.touchMove(e,t,n)},touchUp(e){r.touchUp(e,t,n)}}},order:90,inGlobalMenu:!1,menu:{type:"select",name:"Arrow",icon:"arrow"},getWarnings(e,t,n,r,o){e:for(const{bulb:t,body:n}of Object.values(e||{})){const e=u(t);e.reverse();let i=0,s=1;for(const t of e){const e=r[t];if(null==e)continue e;i+=s*e,s*=10}const[l,...c]=u(n);let a=0,d=!0;for(const e of c){const t=r[e];null==t?d=!1:a+=t}(i<a||d&&i!==a)&&(e.forEach((e=>o[e]=!0)),c.forEach((e=>o[e]=!0)))}},meta:{description:"Digits along arrows must sum to the digit in the circle; digits may repeat.",tags:["line","sum"],category:["local","line"]}},min:{getInputHandler:(e,t,n)=>Wn(e,t,n,"max"),order:20,inGlobalMenu:!1,menu:{type:"select",name:"Min",icon:"min"},getWarnings(e,t,n,r,o){const i=C(e||{});for(const[e,n]of P(i,t)){const t=r[e],i=r[n];null!=t&&null!=i&&(i<t&&(o[e]=!0,o[n]=!0))}},meta:{description:"Contiguous groups of cells with less-than signs must be less than all of their edge neighbors.",tags:["extreme","fortress","minimum","less"],category:["local","cell"]}},max:{getInputHandler:(e,t,n)=>Wn(e,t,n,"min"),order:21,inGlobalMenu:!1,menu:{type:"select",name:"Max",icon:"max"},getWarnings(e,t,n,r,o){const i=C(e||{});for(const[e,n]of P(i,t)){const t=r[e],i=r[n];null!=t&&null!=i&&(t<i&&(o[e]=!0,o[n]=!0))}},meta:{description:"Contiguous groups of cells with greater-than signs must be greater than all of their edge neighbors.",tags:["extreme","fortress","maximum","more","greater"],category:["local","cell"]}},odd:{getInputHandler:(e,t,n)=>Wn(e,t,n,"even"),order:41,inGlobalMenu:!1,menu:{type:"select",name:"Odd",icon:"odd-even"},getWarnings(e,t,n,r,o){D(r,C(e||{}),o,(e=>1==e%2))},meta:{description:"Cells with a gray circle must be odd.",tags:["parity","modulo","remainder"],category:["local","cell"]}},even:{getInputHandler:(e,t,n)=>Wn(e,t,n,"odd"),order:40,inGlobalMenu:!1,menu:{type:"select",name:"Even",icon:"odd-even"},getWarnings(e,t,n,r,o){D(r,C(e||{}),o,(e=>0==e%2))},meta:{description:"Cells with a gray square must be even.",tags:["parity","modulo","remainder"],category:["local","cell"]}},columnIndexer:{getInputHandler:(e,t,n)=>Wn(e,t,n,""),order:42,inGlobalMenu:!1,menu:{type:"select",name:"Column Indexer",icon:"odd-even"},getWarnings(e,t,n,r,o){Yn(e,t,r,o,((e,t,n)=>[n-1,e]),((e,t,n)=>n!=t+1))},meta:{description:"If the cell with this constraint is at row R, column C and has digit V, then the cell at Row R, column V has digit C.",tags:["indexer"],category:["local","cell"]}},rowIndexer:{getInputHandler:(e,t,n)=>Wn(e,t,n,""),order:42,inGlobalMenu:!1,menu:{type:"select",name:"Row Indexer",icon:"odd-even"},getWarnings(e,t,n,r,o){Yn(e,t,r,o,((e,t,n)=>[t,n-1]),((e,t,n)=>n!=e+1))},meta:{description:"If the cell with this constraint is at row R, column C and has digit V, then the cell at Row V, column C has digit R.",tags:["indexer"],category:["local","cell"]}},quadruple:{getInputHandler:function(e,t,n){const r=[];let o=null,i=4;function s(e){if(null==o)return!1;const t=En(e);if(void 0===t)return!1;if(null==t){if(!0===o.get()){return Tn(o.replace(null)),!0}r.length=0}else i<=r.length&&(r.length=0),r.push(t),r.sort();return Tn(o.replace(!(0<r.length)||r)),!0}function l(r){const l=m(R(r,n),t);if(null==l)return;const c=p(l,t),a=e.ref(`${c}`);i=4,(l[0]<=0||t.width<=l[0])&&(i*=.5),(l[1]<=0||t.height<=l[1])&&(i*=.5),!0!==a.get()?(o=a,s("Delete")):a.replace(null)}return{load(){Mt.replace(null),At.replace(!1)},unload(){},blur(e){},keydown(e){s(e.code)&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){},padClick(e){s(e.currentTarget.value)&&(e.stopImmediatePropagation(),e.preventDefault())},mouseDown(e){},mouseMove(e){},mouseUp(e){},leave(e){},click(e){l(e)},touchDown(e){const t=In(e);null!=t&&l(t)},touchMove(e){},touchUp(e){}}},order:110,inGlobalMenu:!1,menu:{type:"select",name:"Quadruple",icon:"quadruple"},getWarnings(e,t,n,r,o){for(const[n,i]of Object.entries(e||{})){const e=u(i||{}),s=v(g(+n,t),t).map((e=>h(e,t))),l=s.map((e=>r[e]));if(!l.some((e=>null==e))){for(const t of l){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}0<e.length&&s.map((e=>o[e]=!0))}}},meta:{description:"Digits in quadruple circles must appear at least once in the 1–4 neighboring cells.",tags:[],category:["local","adj"]}},killer:{getInputHandler:function(e,t,n){const r=new On(!1);let o,s=null;!function(e){e[e.DYNAMIC=0]="DYNAMIC",e[e.ADDING=1]="ADDING",e[e.REMOVING=2]="REMOVING"}(o||(o={}));let l=o.DYNAMIC;function c(e){if(null==s)return!1;let t=En(e);if(void 0===t)return!1;const n=s.ref("sum").get();if(null!=t&&"number"==typeof n){const e=10*n+t;e<100&&(t=e)}if(null===t&&null==n){Tn(s.replace(null))}else{Tn(s.ref("sum").replace(t))}return!0}function a(t){for(const[n,{sum:r,cells:o}]of Object.entries(e.get()||{}))if(o[t])return n;return null}const u={redo:{},undo:{}};function d(t){const{coord:n,grid:r}=t,c=h(n,r);if(o.DYNAMIC===l&&function(t){if(o.DYNAMIC===l){const n=a(t);s=e.ref(n||i()),l=null==n?o.ADDING:o.REMOVING}}(c),null==s)throw"UNREACHABLE";const d=s.ref("cells",`${c}`).replace(l);null!=d&&(Object.assign(u.redo,d.redo),Object.assign(u.undo,d.undo))}return r.onDragStart=e=>{l=o.DYNAMIC,d(e)},r.onDrag=e=>{l=o.ADDING,d(e)},r.onDragEnd=()=>{Tn(u),u.redo={},u.undo={}},r.onTap=t=>{if(o.REMOVING!==l)return;const{coord:n,grid:r}=t,i=a(h(n,r));if(null!=i){Tn(e.ref(i).replace(null))}},{load(){Mt.replace(null),At.replace(!1)},unload(){r.mouseUp()},blur(e){},keydown(e){c(e.code)&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){},padClick(e){c(e.currentTarget.value)&&(e.stopImmediatePropagation(),e.preventDefault())},mouseDown(e){r.mouseDown(e,t,n)},mouseMove(e){r.mouseMove(e,t,n)},mouseUp(e){r.mouseUp()},leave(e){r.leave(e,t,n)},click(e){r.click(e,t,n)},touchDown(e){r.touchDown(e,t,n)},touchMove(e){r.touchMove(e,t,n)},touchUp(e){r.touchUp(e,t,n)}}},order:120,inGlobalMenu:!1,menu:{type:"select",name:"Killer Cage",icon:"killer"},getWarnings(e,t,n,r,o){for(const{sum:t,cells:n}of Object.values(e||{})){const e=C(n);O(r,e,o),"number"==typeof t&&H(r,e,o,t)}},meta:{description:"Digits in cages must sum to the given cage total (if given); digits may not repeat.",tags:["partial","cage","sum"],category:["local","area"]}},clone:{getInputHandler:function(e,t,n){const r=new On(!0);let o,s=null,l=null,c={label:null,color:null,a:[],b:[]};!function(e){e[e.DYNAMIC=0]="DYNAMIC",e[e.SELECTING=1]="SELECTING",e[e.MOVING=2]="MOVING"}(o||(o={}));let a=o.DYNAMIC;function f(e){if(null==s)return!1;let t=En(e);if(void 0===t)return!1;const n=s.ref("sum").get();if(null!=t&&"number"==typeof n){const e=10*n+t;e<100&&(t=e)}return!0}function p(t){for(const[n,{a:r,b:o}]of Object.entries(e.get()||{})){if(u(r||{}).includes(t))return[n,"a"];if(u(o||{}).includes(t))return[n,"b"]}return null}function g(n){const r=p(n);if(null!=r){const[i,h]=r,f="a"===h?"b":"a";if(s=e.ref(i),a=o.MOVING,c=Object.assign({},s.get()),null!=c[f]){const e=u(c[h]).indexOf(n);l=d(c[f][e],t),c.a=u(c[f]),c.b=[]}else l=d(n,t),c.a=u(c[h]),c.b=[]}else s=e.ref(i()),a=o.SELECTING,c=function(){const t=new Set;for(const{label:n}of Object.values(e.get()||{}))null!=n&&t.add(n);for(let e=0;;e++){const n=Kn(e);if(!t.has(n))return{label:n,color:Ht.hsluvToHex([127*e%360,50,50]),a:[],b:[]}}}()}const m={redo:{},undo:{}};function v(e){const{coord:t,grid:n}=e,r=h(t,n);if(o.DYNAMIC===a&&g(r),null==s)throw"UNREACHABLE";if(o.SELECTING===a){if(0<=c.a.indexOf(r))return;c.a.push(r)}else{if(o.MOVING!==a)throw"UNREACHABLE";{if(null==l)throw"UNREACHABLE";const e=d(r,n);e[0]-=l[0],e[1]-=l[1];const t=[];for(let r=0;r<c.a.length;r++){const o=d(c.a[r],n);if(o[0]+=e[0],o[1]+=e[1],o[0]<0||n.width<=o[0]||o[1]<0||n.height<=o[1])return;const i=h(o,n);t.push(i)}c.b=t}}Tn(s.replace(c))}return r.onDragStart=e=>{a=o.DYNAMIC,l=null,s=null,v(e)},r.onDrag=e=>{v(e)},r.onDragEnd=()=>{Tn(m),m.redo={},m.undo={}},r.onTap=t=>{if(o.MOVING!==a)return;const{coord:n,grid:r}=t,i=p(h(n,r));if(null!=i){const[t,n]=i;Tn(e.ref(t).replace(null))}},{load(){Mt.replace(null),At.replace(!1)},unload(){r.mouseUp()},blur(e){},keydown(e){f(e.code)&&(e.stopImmediatePropagation(),e.preventDefault())},keyup(e){},padClick(e){f(e.currentTarget.value)&&(e.stopImmediatePropagation(),e.preventDefault())},mouseDown(e){r.mouseDown(e,t,n)},mouseMove(e){r.mouseMove(e,t,n)},mouseUp(e){r.mouseUp()},leave(e){r.leave(e,t,n)},click(e){r.click(e,t,n)},touchDown(e){r.touchDown(e,t,n)},touchMove(e){r.touchMove(e,t,n)},touchUp(e){r.touchUp(e,t,n)}}},order:10,inGlobalMenu:!1,menu:{type:"select",name:"Clone",icon:"clone"},getWarnings(e,t,n,r,o){for(const{a:t,b:n}of Object.values(e||{})){if(null==t||null==n)continue;L(r,u(t),u(n),o)}},meta:{description:"Digits in cloned sets must be the same and in the same order.",tags:[],category:["local","area"]}},difference:{getInputHandler:(e,t,n)=>qn(e,t,n,{svgCoord2idx:y,max:10}),order:140,inGlobalMenu:!1,menu:{type:"select",name:"Difference",icon:"kropki"},getWarnings(e,t,n,r,o){for(const[n,i]of Object.entries(e||{})){if(null==i)continue;const e=!0===i?1:i,[s,l]=w(+n,t),c=r[s],a=r[l];null!=c&&null!=a&&(Math.abs(c-a)!==e&&(o[s]=!0,o[l]=!0))}},meta:{description:"Cells separated by a white dot must differ by 1, or the number given.",tags:["dot","edge","white","kropki","consecutive","pair"],category:["local","adj"]}},ratio:{getInputHandler:(e,t,n)=>qn(e,t,n,{svgCoord2idx:y,max:10}),order:141,inGlobalMenu:!1,menu:{type:"select",name:"Ratio",icon:"kropki"},getWarnings(e,t,n,r,o){for(const[n,i]of Object.entries(e||{})){if(null==i)continue;const e=!0===i?2:i,[s,l]=w(+n,t),c=r[s],a=r[l];null!=c&&null!=a&&(c*e!==a&&a*e!==c&&(o[s]=!0,o[l]=!0))}},meta:{description:"Cells separated by a black dot must have a ratio of 2, or the number given.",tags:["dot","edge","black","kropki","times","multiply","pair"],category:["local","adj"]}},xv:{getInputHandler:(e,t,n)=>qn(e,t,n,{svgCoord2idx:y,keymap:{KeyX:10,KeyV:5},max:100}),order:142,inGlobalMenu:!1,menu:{type:"select",name:"XV Sum",icon:"xv"},getWarnings(e,t,n,r,o){for(const[n,i]of Object.entries(e||{})){if("number"!=typeof i)continue;const[e,s]=w(+n,t),l=r[e],c=r[s];null!=l&&null!=c&&(l+c!==i&&(o[e]=!0,o[s]=!0))}},meta:{description:"Cells separated by a roman numeral must sum to that number.",tags:["roman numeral","roman number","sum"],category:["local","adj"]}},littleKiller:{getInputHandler:(e,t,n)=>qn(e,t,n,{svgCoord2idx:$,max:100}),order:160,inGlobalMenu:!1,menu:{type:"select",name:"Little Killer",icon:"little-killer"},getWarnings(e,t,n,r,o){for(const[n,i]of Object.entries(e||{})){if("number"!=typeof i)continue;H(r,A(+n,t).map((e=>h(e,t))),o,i)}},meta:{description:"Digits along a diagonal must sum to the given total; digits may repeat.",tags:["diagonal","sum","repeat","outside"],category:["local","cell"]}},sandwich:{getInputHandler:(e,t,n)=>qn(e,t,n,{svgCoord2idx:k,max:100}),order:150,inGlobalMenu:!1,menu:{type:"select",name:"Sandwich",icon:"sandwich"},getWarnings(e,t,n,r,o){for(const[n,i]of Object.entries(e||{})){if("number"!=typeof i)continue;const e=x(+n,t).map((e=>h(e,t))),s=e.map((e=>r[e])),l=s.indexOf(1),c=s.indexOf(t.width);if(l<0||c<0)continue;const a=Math.min(l,c),u=Math.max(l,c);H(r,e.slice(a+1,u),o,i)&&(o[e[l]]=!0,o[e[c]]=!0)}},meta:{description:"Sandwich clues outside the grid indicate the sum of the digits between the 1 and the 9 (or min and max) in the indicated row or column.",tags:["outside","series","sum","crust","filling"],category:["local","outside"]}},skyscraper:{getInputHandler:(e,t,n)=>qn(e,t,n,{svgCoord2idx:k,max:Math.max(t.width,t.height)}),order:151,inGlobalMenu:!1,menu:{type:"select",name:"Skyscraper",icon:"skyscraper"},getWarnings(e,t,n,r,o){for(const[n,i]of Object.entries(e||{})){if("number"!=typeof i)continue;const e=x(+n,t).map((e=>h(e,t)));let s=0,l=Number.NEGATIVE_INFINITY,c=0;for(;c<e.length;c++){const t=r[e[c]];if(null==t)break;if(l<t&&(l=t,s++,i<s))break}const a=c===e.length;(i<s||a&&i!==s)&&e.map((e=>o[e]=!0))}},meta:{description:"Skyscraper clues outside the grid indicate the number of digits greater than all previous digits in that direction.",tags:["outside","series","tower","see"],category:["local","outside"]}},xsum:{getInputHandler:(e,t,n)=>qn(e,t,n,{svgCoord2idx:k,max:100}),order:152,inGlobalMenu:!1,menu:{type:"select",name:"X-Sum",icon:"xsum"},getWarnings(e,t,n,r,o){for(const[n,i]of Object.entries(e||{})){if("number"!=typeof i)continue;const e=x(+n,t).map((e=>h(e,t))),s=r[e[0]];null!=s&&H(r,e.slice(0,s),o,i)}},meta:{description:"The first x digits (including the first cell) must sum to the number clued outside of the grid, where x is the first cell in the row or column.",tags:["outside","series"],category:["local","outside"]}},diagonal:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Diagonals",checkbox:[{name:"Positive Diagonal",icon:"positive-diagonal",refPath:"positive"},{name:"Negative Diagonal",icon:"negative-diagonal",refPath:"negative"}],icon:"positive-diagonal"},getWarnings(e,t,n,r,o){if(e){if(e.positive){O(r,S(!0,t).map((e=>h(e,t))),o)}if(e.negative){O(r,S(!1,t).map((e=>h(e,t))),o)}}},meta:{description:"Digits along the marked diagonal(s) may not repeat.",tags:["x"],category:["global"]}},knight:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Antiknight",checkbox:{name:"Antiknight",icon:"knight"},icon:"knight"},getWarnings(e,t,n,r,o){if(e)for(const e of function*({width:e,height:t}){for(const[n,r,o,i]of K(t,e,t,e)){if(n>=o)continue;const e=Math.abs(n-o),t=Math.abs(r-i);3===e+t&&1===Math.abs(e-t)&&(yield[[r,n],[i,o]])}}(t)){O(r,e.map((e=>h(e,t))),o)}},meta:{description:"Digits a chess knight's move apart may not repeat.",tags:["chess","move"],category:["global"]}},king:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Antiking",checkbox:{name:"Antiking",icon:"king"},icon:"king"},getWarnings(e,t,n,r,o){if(e)for(const e of X(t)){O(r,e.map((e=>h(e,t))),o)}},meta:{description:"Digits a chess king's move apart may not repeat.",tags:["chess","move"],category:["global"]}},disjointGroups:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Disjoint Groups",checkbox:{name:"Disjoint Groups",icon:"disjoint"},icon:"disjoint"},getWarnings(e,t,n,r,o){if(e)for(const[e]of K(t.width)){const n=[];for(const[r]of K(t.width))n.push(h([3*Math.floor(r/3)+Math.floor(e/3),r%3*3+e%3],t));O(r,n,o)}},meta:{description:"Digits in the same relative position to their box may not repeat.",tags:["subset","house"],category:["global"]}},consecutive:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Nonconsecutive",checkbox:[{name:"Nonconsecutive Orthogonal Neighbors",icon:"consec-orth",refPath:"orth"},{name:"Nonconsecutive Diagonal Neighbors",icon:"consec-diag",refPath:"diag"}],icon:"consec-orth"},getWarnings(e,t,n,r,o){e&&(e.diag&&Bn(X(t),t,r,o),e.orth&&Bn(J(t),t,r,o))},meta:{description:"[Edge- | Corner-] adjacent digits may not be consecutive.",tags:[],category:["global"]}},antiX:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Anti-X",checkbox:{name:"Anti-X",icon:"anti-x"},icon:"anti-x"},getWarnings(e,t,n,r,o){e&&Vn(t,r,o,10)},meta:{description:"Adjacent digits may not sum to 10.",tags:[],category:["global"]}},antiV:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Anti-V",checkbox:{name:"Anti-V",icon:"anti-v"},icon:"anti-v"},getWarnings(e,t,n,r,o){e&&Vn(t,r,o,5)},meta:{description:"Adjacent digits may not sum to 5.",tags:[],category:["global"]}},selfTaxicab:{inGlobalMenu:!0,order:0,menu:{type:"checkbox",name:"Self-Taxicab",checkbox:{name:"Self-Taxicab",icon:"cityblock"},icon:"cityblock"}}};function Jn(e,t){if(!(e in Xn))throw Error(`Cannot add unknown element type: ${e}.`);const n=Xn[e];if(null==n)throw Error(`Cannot add unimplmeneted element type: ${e}.`);return{type:e,order:n.order,value:t}}function Zn(e,t){const n=function(e){return Object.entries(Xn).filter((([t,n])=>null!=n.menu&&e(t,n))).map((([e,t])=>({key:e,info:t})))}(t);return e?function(e){return new Mn(e,{keys:[{name:"info.menu.name",weight:1},{name:"info.meta.tags",weight:1}],ignoreLocation:!0,threshold:.2})}(n).search(e):n.map(((e,t)=>({item:e,refIndex:t})))}const Qn=Symbol("Comlink.proxy"),er=Symbol("Comlink.endpoint"),tr=Symbol("Comlink.releaseProxy"),nr=Symbol("Comlink.thrown"),rr=e=>"object"==typeof e&&null!==e||"function"==typeof e,or=new Map([["proxy",{canHandle:e=>rr(e)&&e[Qn],serialize(e){const{port1:t,port2:n}=new MessageChannel;return ir(e,t),[n,[n]]},deserialize:e=>(e.start(),lr(e))}],["throw",{canHandle:e=>rr(e)&&nr in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function ir(e,t=self){t.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:o,type:i,path:s}=Object.assign({path:[]},r.data),l=(r.data.argumentList||[]).map(pr);let c;try{const t=s.slice(0,-1).reduce(((e,t)=>e[t]),e),n=s.reduce(((e,t)=>e[t]),e);switch(i){case"GET":c=n;break;case"SET":t[s.slice(-1)[0]]=pr(r.data.value),c=!0;break;case"APPLY":c=n.apply(t,l);break;case"CONSTRUCT":c=hr(new n(...l));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;ir(e,n),c=function(e,t){return dr.set(e,t),e}(t,[t])}break;case"RELEASE":c=void 0;break;default:return}}catch(e){c={value:e,[nr]:0}}Promise.resolve(c).catch((e=>({value:e,[nr]:0}))).then((e=>{const[r,s]=fr(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),s),"RELEASE"===i&&(t.removeEventListener("message",n),sr(t))}))})),t.start&&t.start()}function sr(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function lr(e,t){return ar(e,[],t)}function cr(e){if(e)throw new Error("Proxy has been released and is not useable")}function ar(e,t=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(n,i){if(cr(r),i===tr)return()=>gr(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{sr(e),r=!0}));if("then"===i){if(0===t.length)return{then:()=>o};const n=gr(e,{type:"GET",path:t.map((e=>e.toString()))}).then(pr);return n.then.bind(n)}return ar(e,[...t,i])},set(n,o,i){cr(r);const[s,l]=fr(i);return gr(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:s},l).then(pr)},apply(n,o,i){cr(r);const s=t[t.length-1];if(s===er)return gr(e,{type:"ENDPOINT"}).then(pr);if("bind"===s)return ar(e,t.slice(0,-1));const[l,c]=ur(i);return gr(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:l},c).then(pr)},construct(n,o){cr(r);const[i,s]=ur(o);return gr(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:i},s).then(pr)}});return o}function ur(e){const t=e.map(fr);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const dr=new WeakMap;function hr(e){return Object.assign(e,{[Qn]:!0})}function fr(e){for(const[t,n]of or)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},o]}return[{type:"RAW",value:e},dr.get(e)||[]]}function pr(e){switch(e.type){case"HANDLER":return or.get(e.name).deserialize(e.value);case"RAW":return e.value}}function gr(e,t,n){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)}))}const mr=(()=>{let e=null;return function(){return null==e&&(e=lr(new Worker("build/satSolverWorker.js"))),e}})(),vr={cantAttempt:e=>mr().cantAttempt(e),solve(e,t,n){const r=mr().solveAsync(e,t,hr(n));return()=>r.then(mr().cancel)},solveTrueCandidates(e,t){const n=mr().solveTrueCandidatesAsync(e,hr(t));return()=>n.then(mr().cancel)}};window.solve=async function(e=10,t=1e4){const n=Date.now(),r=gt.get(),o=await vr.cantAttempt(r);if(o)throw Error("Solver cannot attempt this puzzle: "+o);console.log(`SOLVING: maxSolutions=${e} maxTimeMillis=${t}`);let i=0,s=-1;const c=vr.solve(r,e,(t=>{null==t?(clearTimeout(s),console.log(`DONE. Found ${i<e?"ALL ":""}${i} solutions in ${Date.now()-n} ms.`)):(i++,console.log(`FOUND ${i} in ${Date.now()-n} ms:\n${l(t,r.grid)}`))}));async function a(e){clearTimeout(s),await c()&&console.log(`${e}. Found ${i} solutions in ${Date.now()-n} ms.`)}return isFinite(t)&&(s=window.setTimeout(a,t,"TIMED OUT")),()=>a("CANCELLED")};const yr="https://github.com/SudokuStudio/SudokuStudio/issues/new",br=yr+"?labels=%F0%9F%90%9E%20bug&template=bug_report.yml&title=%F0%9F%90%9E+Bug%3A+";function wr(e,t,n){const r=e.slice();return r[5]=t[n].cloneAbId,r[6]=t[n].label,r[7]=t[n].labelPos,r[8]=t[n].d,r[9]=t[n].color,r}function kr(e,t){let n,r,o,i,s,l,c,a,u,d=t[6]+"";return{key:e,first:null,c(){n=we("path"),s=we("text"),l=ke(d),Ae(n,"d",r=t[8]),Ae(n,"fill","none"),Ae(n,"stroke",o=t[9]),Ae(n,"stroke-width",Mr),Ae(n,"mask",i="url(#clone-"+t[0]+"-mask)"),Ae(s,"x",c=t[7].x),Ae(s,"y",a=t[7].y),Ae(s,"text-anchor","end"),Ae(s,"dominant-baseline","auto"),Ae(s,"fill",u=t[9]),Ae(s,"font-size",_r),Ae(s,"font-weight","800"),this.first=n},m(e,t){me(e,n,t),me(e,s,t),ge(s,l)},p(e,h){t=e,4&h&&r!==(r=t[8])&&Ae(n,"d",r),4&h&&o!==(o=t[9])&&Ae(n,"stroke",o),1&h&&i!==(i="url(#clone-"+t[0]+"-mask)")&&Ae(n,"mask",i),4&h&&d!==(d=t[6]+"")&&Ce(l,d),4&h&&c!==(c=t[7].x)&&Ae(s,"x",c),4&h&&a!==(a=t[7].y)&&Ae(s,"y",a),4&h&&u!==(u=t[9])&&Ae(s,"fill",u)},d(e){e&&ve(n),e&&ve(s)}}}function xr(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let s=wr(e,o,t),l=i(s);r.set(l,n[t]=kr(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0])},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){13&s&&(o=e[3](e[2]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,kr,null,wr)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}const $r=.05,_r=.2,Mr=.03;function Tr(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(4,c=e.grid)},[s,l,r,function(e){const t=[];for(const[n,{label:r,color:o,a:i,b:s}]of Object.entries(e||{}))for(let e=0;e<2;e++){const l=[i,s][e];if(null==l)continue;const a=u(l);if(a.sort(((e,t)=>e-t)),0>=a.length)continue;const h=a[a.length-1],f=G(a,c,$r,!0);if(null==f)continue;const p=d(h,c),g={x:p[0]+1-$r-Mr,y:p[1]+1-$r-Mr},m=`${n}_${e}`;t.push({cloneAbId:m,labelPos:g,d:f,label:r||"",color:o||"#222"})}return t},c]}function Ar(e,t,n){let{id:r}=t,{ref:o}=t,{grid:i}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"ref"in e&&n(1,o=e.ref),"grid"in e&&n(2,i=e.grid)},[r,o,i]}class Cr extends ct{constructor(e){super(),lt(this,e,Ar,null,oe,{id:0,ref:1,grid:2})}}function Sr(e,t,n){const r=e.slice();return r[7]=t[n].idx,r[8]=t[n].x,r[9]=t[n].y,r[10]=t[n].text,r[11]=t[n].d,r}function Er(e,t){let n,r,o,i,s,l,c,a,u=t[10]+"";return{key:e,first:null,c(){n=we("path"),i=we("text"),s=ke(u),Ae(n,"d",r=t[11]),Ae(n,"stroke",Or),Ae(n,"stroke-width",Dr),Ae(n,"marker-end",o="url(#lk-arrow-"+t[0]+")"),Ae(i,"x",l=t[8]),Ae(i,"y",c=t[9]),Ae(i,"text-anchor","middle"),Ae(i,"dominant-baseline","central"),Ae(i,"fill",Or),Ae(i,"font-size",Hr),Ae(i,"font-weight",Lr),Ae(i,"textLength",a=t[10].length>2?1.2*Hr:void 0),Ae(i,"lengthAdjust","spacingAndGlyphs"),this.first=n},m(e,t){me(e,n,t),me(e,i,t),ge(i,s)},p(e,d){t=e,4&d&&r!==(r=t[11])&&Ae(n,"d",r),1&d&&o!==(o="url(#lk-arrow-"+t[0]+")")&&Ae(n,"marker-end",o),4&d&&u!==(u=t[10]+"")&&Ce(s,u),4&d&&l!==(l=t[8])&&Ae(i,"x",l),4&d&&c!==(c=t[9])&&Ae(i,"y",c),4&d&&a!==(a=t[10].length>2?1.2*Hr:void 0)&&Ae(i,"textLength",a)},d(e){e&&ve(n),e&&ve(i)}}}function Ir(e){let t,n,r,o,i,s=[],l=new Map,c=e[3](e[2]||{});const a=e=>e[7];for(let t=0;t<c.length;t+=1){let n=Sr(e,c,t),r=a(n);l.set(r,s[t]=Er(r,n))}return{c(){t=we("marker"),n=we("path"),o=xe(),i=we("g");for(let e=0;e<s.length;e+=1)s[e].c();Ae(n,"d","M 0.4,0.425 L 0.5,0.5 L 0.4,0.575"),Ae(n,"fill","none"),Ae(n,"stroke",Or),Ae(n,"stroke-width",Dr),Ae(t,"id",r="lk-arrow-"+e[0]),Ae(t,"viewBox","0 0 1 1"),Ae(t,"refX","0.5"),Ae(t,"refY","0.5"),Ae(t,"markerUnits","userSpaceOnUse"),Ae(t,"markerWidth","1"),Ae(t,"markerHeight","1"),Ae(t,"orient","auto"),Ae(i,"id",e[0])},m(e,r){me(e,t,r),ge(t,n),me(e,o,r),me(e,i,r);for(let e=0;e<s.length;e+=1)s[e].m(i,null)},p(e,[n]){1&n&&r!==(r="lk-arrow-"+e[0])&&Ae(t,"id",r),13&n&&(c=e[3](e[2]||{}),s=tt(s,n,a,1,e,c,l,i,Qe,Er,null,Sr)),1&n&&Ae(i,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(o),e&&ve(i);for(let e=0;e<s.length;e+=1)s[e].d()}}}const Or="#000",Hr=.4,Lr=800,Dr=.025;function jr(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;const a=.48*Hr,u=a+.15;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(4,c=e.grid)},[s,l,r,function(e){const t=[];for(const[n,r]of Object.entries(e||{})){const e=!0!==r?`${r}`:"_",[o,i]=_(+n,c,-.9),s=M(+n);t.push({idx:+n,x:o,y:i,text:e,d:`M${o+a*s[0]},${i+a*s[1]}L${o+u*s[0]},${i+u*s[1]}`})}return t},c]}function Nr(e,t,n){const r=e.slice();return r[14]=t[n].idx,r[15]=t[n].x,r[16]=t[n].y,r[17]=t[n].text,r}function Rr(e){let t,n,r;return{c(){t=we("circle"),Ae(t,"cx",n=e[15]),Ae(t,"cy",r=e[16]),Ae(t,"r",e[5]),Ae(t,"fill",e[3]),Ae(t,"stroke",e[2]),Ae(t,"stroke-width",e[6])},m(e,n){me(e,t,n)},p(e,o){512&o&&n!==(n=e[15])&&Ae(t,"cx",n),512&o&&r!==(r=e[16])&&Ae(t,"cy",r),32&o&&Ae(t,"r",e[5]),8&o&&Ae(t,"fill",e[3]),4&o&&Ae(t,"stroke",e[2]),64&o&&Ae(t,"stroke-width",e[6])},d(e){e&&ve(t)}}}function Ur(e,t){let n,r,o,i,s,l=t[17]+"",c=0<t[5]&&Rr(t);return{key:e,first:null,c(){n=$e(),c&&c.c(),r=we("text"),o=ke(l),Ae(r,"x",i=t[15]),Ae(r,"y",s=t[16]),Ae(r,"text-anchor","middle"),Ae(r,"dominant-baseline","central"),Ae(r,"fill",t[4]),Ae(r,"font-size",t[7]),Ae(r,"font-weight",t[8]),this.first=n},m(e,t){me(e,n,t),c&&c.m(e,t),me(e,r,t),ge(r,o)},p(e,n){0<(t=e)[5]?c?c.p(t,n):(c=Rr(t),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null),512&n&&l!==(l=t[17]+"")&&Ce(o,l),512&n&&i!==(i=t[15])&&Ae(r,"x",i),512&n&&s!==(s=t[16])&&Ae(r,"y",s),16&n&&Ae(r,"fill",t[4]),128&n&&Ae(r,"font-size",t[7]),256&n&&Ae(r,"font-weight",t[8])},d(e){e&&ve(n),c&&c.d(e),e&&ve(r)}}}function Pr(e){let t,n=[],r=new Map,o=e[10](e[9]||{});const i=e=>e[14];for(let t=0;t<o.length;t+=1){let s=Nr(e,o,t),l=i(s);r.set(l,n[t]=Ur(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0])},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){2044&s&&(o=e[10](e[9]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,Ur,null,Nr)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Gr(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(9,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t,{idx2coord:a}=t,{stroke:u="#242424"}=t,{fill:d="#fff"}=t,{textColor:h="#000"}=t,{radius:f=.15}=t,{strokeWidth:p=.02}=t,{fontSize:g=.25}=t,{fontWeight:m=600}=t,{mapDigits:v=(e=>!0!==e?`${e}`:"")}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(11,c=e.grid),"idx2coord"in e&&n(12,a=e.idx2coord),"stroke"in e&&n(2,u=e.stroke),"fill"in e&&n(3,d=e.fill),"textColor"in e&&n(4,h=e.textColor),"radius"in e&&n(5,f=e.radius),"strokeWidth"in e&&n(6,p=e.strokeWidth),"fontSize"in e&&n(7,g=e.fontSize),"fontWeight"in e&&n(8,m=e.fontWeight),"mapDigits"in e&&n(13,v=e.mapDigits)},[s,l,u,d,h,f,p,g,m,r,function(e){const t=[];for(const[n,r]of Object.entries(e||{})){const e=v(r),[o,i]=a(+n,c);t.push({idx:+n,x:o,y:i,text:e})}return t},c,a,v]}class Fr extends ct{constructor(e){super(),lt(this,e,Gr,Pr,oe,{id:0,ref:1,grid:11,idx2coord:12,stroke:2,fill:3,textColor:4,radius:5,strokeWidth:6,fontSize:7,fontWeight:8,mapDigits:13})}}function zr(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].slices,r}function Br(e,t,n){const r=e.slice();return r[9]=t[n].d,r[10]=t[n].fill,r}function Vr(e){let t,n,r;return{c(){t=we("path"),Ae(t,"d",n=e[9]),Ae(t,"fill",r=e[10]),Ae(t,"fill-opacity","0.6"),Ae(t,"stroke","none")},m(e,n){me(e,t,n)},p(e,o){4&o&&n!==(n=e[9])&&Ae(t,"d",n),4&o&&r!==(r=e[10])&&Ae(t,"fill",r)},d(e){e&&ve(t)}}}function Wr(e,t){let n,r,o=t[6],i=[];for(let e=0;e<o.length;e+=1)i[e]=Vr(Br(t,o,e));return{key:e,first:null,c(){n=we("g");for(let e=0;e<i.length;e+=1)i[e].c();Ae(n,"id",r="colors-"+t[0]+"-"+t[5]),this.first=n},m(e,t){me(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,s){if(t=e,12&s){let e;for(o=t[6],e=0;e<o.length;e+=1){const r=Br(t,o,e);i[e]?i[e].p(r,s):(i[e]=Vr(r),i[e].c(),i[e].m(n,null))}for(;e<i.length;e+=1)i[e].d(1);i.length=o.length}5&s&&r!==(r="colors-"+t[0]+"-"+t[5])&&Ae(n,"id",r)},d(e){e&&ve(n),ye(i,e)}}}function Yr(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let s=zr(e,o,t),l=i(s);r.set(l,n[t]=Wr(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0])},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){13&s&&(o=e[3](e[2]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,Wr,null,zr)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function qr(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(4,c=e.grid)},[s,l,r,function(e){const t=[];for(const[n,r]of Object.entries(e)){const e=Object.keys(r||{});e.sort(((e,t)=>{const n=Ht.hexToHsluv(e),r=Ht.hexToHsluv(t);return Math.round(.06*(n[0]-r[0]))||n[2]-r[2]}));const o=e.map(((e,t,r)=>({fill:e,d:V(+n,c,t,r.length)})));t.push({idx:+n,slices:o})}return t},c]}function Kr(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].x,r[7]=t[n].y,r[8]=t[n].keys,r[9]=t[n].nums,r}function Xr(e,t,n){const r=e.slice();return r[12]=t[n],r}function Jr(e){let t,n,r,o=e[12]+"";return{c(){t=we("tspan"),n=ke(o),Ae(t,"fill",r=eo(e[9][e[12]]))},m(e,r){me(e,t,r),ge(t,n)},p(e,i){4&i&&o!==(o=e[12]+"")&&Ce(n,o),4&i&&r!==(r=eo(e[9][e[12]]))&&Ae(t,"fill",r)},d(e){e&&ve(t)}}}function Zr(e,t){let n,r,o,i,s=t[8],l=[];for(let e=0;e<s.length;e+=1)l[e]=Jr(Xr(t,s,e));return{key:e,first:null,c(){n=we("text");for(let e=0;e<l.length;e+=1)l[e].c();Ae(n,"x",r=t[6]),Ae(n,"y",o=t[7]),Ae(n,"text-anchor","middle"),Ae(n,"dominant-baseline","central"),Ae(n,"font-size","0.3"),Ae(n,"font-weight","600"),Ae(n,"textLength",i=t[8].length>5?"0.9":void 0),Ae(n,"lengthAdjust","spacingAndGlyphs"),this.first=n},m(e,t){me(e,n,t);for(let e=0;e<l.length;e+=1)l[e].m(n,null)},p(e,c){if(t=e,12&c){let e;for(s=t[8],e=0;e<s.length;e+=1){const r=Xr(t,s,e);l[e]?l[e].p(r,c):(l[e]=Jr(r),l[e].c(),l[e].m(n,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=s.length}4&c&&r!==(r=t[6])&&Ae(n,"x",r),4&c&&o!==(o=t[7])&&Ae(n,"y",o),4&c&&i!==(i=t[8].length>5?"0.9":void 0)&&Ae(n,"textLength",i)},d(e){e&&ve(n),ye(l,e)}}}function Qr(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let s=Kr(e,o,t),l=i(s);r.set(l,n[t]=Zr(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0]),Ae(t,"mask","url(#SUDOKU_MASK_GIVENS_FILLED)")},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){12&s&&(o=e[3](e[2]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,Zr,null,Kr)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function eo(e){return!0===e||e>8?"#4e72b0":1===e?"#299b20":e<=3?"#c4d0e4":"#89a1ca"}function to(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(4,c=e.grid)},[s,l,r,function(e){const t=[];for(const[n,r]of Object.entries(e)){const[e,o]=d(+n,c).map((e=>e+.5));t.push({idx:+n,x:e,y:o,keys:C(r),nums:r||{}})}return t},c]}function no(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].nums,r}function ro(e,t,n){const r=e.slice();return r[9]=t[n].x,r[10]=t[n].y,r[11]=t[n].num,r}function oo(e){let t,n,r,o,i=e[11]+"";return{c(){t=we("text"),n=ke(i),Ae(t,"x",r=e[9]),Ae(t,"y",o=e[10]),Ae(t,"fill","#4e72b0"),Ae(t,"text-anchor","middle"),Ae(t,"dominant-baseline","central"),Ae(t,"font-size","0.3"),Ae(t,"font-weight","600")},m(e,r){me(e,t,r),ge(t,n)},p(e,s){4&s&&i!==(i=e[11]+"")&&Ce(n,i),4&s&&r!==(r=e[9])&&Ae(t,"x",r),4&s&&o!==(o=e[10])&&Ae(t,"y",o)},d(e){e&&ve(t)}}}function io(e,t){let n,r,o=t[6],i=[];for(let e=0;e<o.length;e+=1)i[e]=oo(ro(t,o,e));return{key:e,first:null,c(){n=$e();for(let e=0;e<i.length;e+=1)i[e].c();r=$e(),this.first=n},m(e,t){me(e,n,t);for(let n=0;n<i.length;n+=1)i[n].m(e,t);me(e,r,t)},p(e,n){if(t=e,12&n){let e;for(o=t[6],e=0;e<o.length;e+=1){const s=ro(t,o,e);i[e]?i[e].p(s,n):(i[e]=oo(s),i[e].c(),i[e].m(r.parentNode,r))}for(;e<i.length;e+=1)i[e].d(1);i.length=o.length}},d(e){e&&ve(n),ye(i,e),e&&ve(r)}}}function so(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let s=no(e,o,t),l=i(s);r.set(l,n[t]=io(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0]),Ae(t,"mask","url(#SUDOKU_MASK_GIVENS_FILLED)")},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){12&s&&(o=e[3](e[2]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,io,null,no)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function lo(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(4,c=e.grid)},[s,l,r,function(e){const t=[];for(const[n,r]of Object.entries(e)){const e=d(+n,c)[0]+.5,o=d(+n,c)[1]+.5,i=!0===r?[]:C(r).map(((t,n,r)=>{const[i,s]=z(n,r.length);return{x:e+i,y:o+s,num:t}}));t.push({idx:+n,nums:i})}return t},c]}function co(e){let t,n,r,o,i,s,l;return{c(){t=we("g"),n=we("line"),i=we("line"),Ae(n,"x1","0"),Ae(n,"y1",r=e[1].height),Ae(n,"x2",o=e[1].width),Ae(n,"y2","0"),Ae(n,"class","svelte-1qd4hgf"),Ie(n,"hide",!e[2]),Ae(i,"x1","0"),Ae(i,"y1","0"),Ae(i,"x2",s=e[1].width),Ae(i,"y2",l=e[1].height),Ae(i,"class","svelte-1qd4hgf"),Ie(i,"hide",!e[3]),Ae(t,"id",e[0])},m(e,r){me(e,t,r),ge(t,n),ge(t,i)},p(e,[c]){2&c&&r!==(r=e[1].height)&&Ae(n,"y1",r),2&c&&o!==(o=e[1].width)&&Ae(n,"x2",o),4&c&&Ie(n,"hide",!e[2]),2&c&&s!==(s=e[1].width)&&Ae(i,"x2",s),2&c&&l!==(l=e[1].height)&&Ae(i,"y2",l),8&c&&Ie(i,"hide",!e[3]),1&c&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t)}}}function ao(e,t,n){let r,o,{id:i}=t,{ref:s}=t,{grid:l}=t;const c=s.ref("positive");se(e,c,(e=>n(2,r=e)));const a=s.ref("negative");return se(e,a,(e=>n(3,o=e))),e.$$set=e=>{"id"in e&&n(0,i=e.id),"ref"in e&&n(6,s=e.ref),"grid"in e&&n(1,l=e.grid)},[i,l,r,o,c,a,s]}function uo(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].x,r[7]=t[n].y,r[8]=t[n].lines,r}function ho(e,t,n){const r=e.slice();return r[11]=t[n].lx,r[12]=t[n].ly,r[13]=t[n].line,r[14]=t[n].textAnchor,r[15]=t[n].domBaseline,r}function fo(e){let t,n,r,o,i,s,l=e[13]+"";return{c(){t=we("text"),n=ke(l),Ae(t,"x",r=e[11]),Ae(t,"y",o=e[12]),Ae(t,"text-anchor",i=e[14]),Ae(t,"dominant-baseline",s=e[15]),Ae(t,"font-size",yo),Ae(t,"font-weight","600")},m(e,r){me(e,t,r),ge(t,n)},p(e,c){8&c&&l!==(l=e[13]+"")&&Ce(n,l),8&c&&r!==(r=e[11])&&Ae(t,"x",r),8&c&&o!==(o=e[12])&&Ae(t,"y",o),8&c&&i!==(i=e[14])&&Ae(t,"text-anchor",i),8&c&&s!==(s=e[15])&&Ae(t,"dominant-baseline",s)},d(e){e&&ve(t)}}}function po(e,t){let n,r,o,i,s,l=t[8],c=[];for(let e=0;e<l.length;e+=1)c[e]=fo(ho(t,l,e));return{key:e,first:null,c(){n=we("circle");for(let e=0;e<c.length;e+=1)c[e].c();s=$e(),Ae(n,"cx",r=t[6]),Ae(n,"cy",o=t[7]),Ae(n,"r",mo),Ae(n,"fill","#fff"),Ae(n,"stroke","#000"),Ae(n,"stroke-width",vo),Ae(n,"clip-path",i="url(#quadruple-"+t[0]+"-mask)"),this.first=n},m(e,t){me(e,n,t);for(let n=0;n<c.length;n+=1)c[n].m(e,t);me(e,s,t)},p(e,a){if(t=e,8&a&&r!==(r=t[6])&&Ae(n,"cx",r),8&a&&o!==(o=t[7])&&Ae(n,"cy",o),1&a&&i!==(i="url(#quadruple-"+t[0]+"-mask)")&&Ae(n,"clip-path",i),24&a){let e;for(l=t[8],e=0;e<l.length;e+=1){const n=ho(t,l,e);c[e]?c[e].p(n,a):(c[e]=fo(n),c[e].c(),c[e].m(s.parentNode,s))}for(;e<c.length;e+=1)c[e].d(1);c.length=l.length}},d(e){e&&ve(n),ye(c,e),e&&ve(s)}}}function go(e){let t,n,r,o,i,s,l,c=[],a=new Map,u=e[4](e[3]||{});const d=e=>e[5];for(let t=0;t<u.length;t+=1){let n=uo(e,u,t),r=d(n);a.set(r,c[t]=po(r,n))}return{c(){t=we("clipPath"),n=we("rect"),s=xe(),l=we("g");for(let e=0;e<c.length;e+=1)c[e].c();Ae(n,"x","0"),Ae(n,"y","0"),Ae(n,"width",r=e[2].width),Ae(n,"height",o=e[2].height),Ae(n,"fill","#fff"),Ae(t,"id",i="quadruple-"+e[0]+"-mask"),Ae(l,"id",e[0])},m(e,r){me(e,t,r),ge(t,n),me(e,s,r),me(e,l,r);for(let e=0;e<c.length;e+=1)c[e].m(l,null)},p(e,[s]){4&s&&r!==(r=e[2].width)&&Ae(n,"width",r),4&s&&o!==(o=e[2].height)&&Ae(n,"height",o),1&s&&i!==(i="quadruple-"+e[0]+"-mask")&&Ae(t,"id",i),25&s&&(u=e[4](e[3]||{}),c=tt(c,s,d,1,e,u,a,l,Qe,po,null,uo)),1&s&&Ae(l,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(s),e&&ve(l);for(let e=0;e<c.length;e+=1)c[e].d()}}}const mo=.2125,vo=.02,yo=.2,bo=/.{1,2}/g,wo=/./g;function ko(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(3,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(2,c=e.grid)},[s,l,c,r,function(e){const t=[];for(const[n,r]of Object.entries(e||{})){const[e,o]=g(+n,c),i=u(r).join(""),s=e<=0?-1:c.width<=e?1:0,l=o<=0?-1:c.height<=o?1:0,a=(i.match(s?wo:bo)||[]).map(((t,n,r)=>({lx:e,ly:o+.9*yo*(n-.5*(l+1)*(r.length-1)),line:t,textAnchor:["start","middle","end"][s+1],domBaseline:["hanging","central","text-bottom"][l+1]})));t.push({idx:+n,x:e,y:o,lines:a})}return t}]}function xo(e,t,n){const r=e.slice();return r[5]=t[n].cageId,r[6]=t[n].text,r[7]=t[n].labelPos,r[8]=t[n].d,r}function $o(e,t,n){const r=e.slice();return r[5]=t[n].cageId,r[6]=t[n].text,r[7]=t[n].labelPos,r}function _o(e,t){let n,r,o,i;return{key:e,first:null,c(){n=we("rect"),Ae(n,"x",r=t[7].x),Ae(n,"y",o=t[7].y),Ae(n,"width",i=.7*`${t[6]}`.length*Co),Ae(n,"height",1.1*Co),Ae(n,"fill","#000"),this.first=n},m(e,t){me(e,n,t)},p(e,s){t=e,8&s&&r!==(r=t[7].x)&&Ae(n,"x",r),8&s&&o!==(o=t[7].y)&&Ae(n,"y",o),8&s&&i!==(i=.7*`${t[6]}`.length*Co)&&Ae(n,"width",i)},d(e){e&&ve(n)}}}function Mo(e,t){let n,r,o,i,s,l,c,a=t[6]+"";return{key:e,first:null,c(){n=we("text"),r=ke(a),s=we("path"),Ae(n,"x",o=t[7].x),Ae(n,"y",i=t[7].y),Ae(n,"text-anchor","start"),Ae(n,"dominant-baseline","hanging"),Ae(n,"font-size",Co),Ae(n,"font-weight","600"),Ae(s,"d",l=t[8]),Ae(s,"fill","none"),Ae(s,"stroke","#000"),Ae(s,"stroke-width",So),Ae(s,"stroke-dasharray","0.075 0.04"),Ae(s,"mask",c="url(#killer-"+t[0]+"-mask)"),this.first=n},m(e,t){me(e,n,t),ge(n,r),me(e,s,t)},p(e,u){t=e,8&u&&a!==(a=t[6]+"")&&Ce(r,a),8&u&&o!==(o=t[7].x)&&Ae(n,"x",o),8&u&&i!==(i=t[7].y)&&Ae(n,"y",i),8&u&&l!==(l=t[8])&&Ae(s,"d",l),1&u&&c!==(c="url(#killer-"+t[0]+"-mask)")&&Ae(s,"mask",c)},d(e){e&&ve(n),e&&ve(s)}}}function To(e){let t,n,r,o,i,s,l,c,a,u=[],d=new Map,h=[],f=new Map,p=e[4](e[3]||{});const g=e=>e[5];for(let t=0;t<p.length;t+=1){let n=$o(e,p,t),r=g(n);d.set(r,u[t]=_o(r,n))}let m=e[4](e[3]||{});const v=e=>e[5];for(let t=0;t<m.length;t+=1){let n=xo(e,m,t),r=v(n);f.set(r,h[t]=Mo(r,n))}return{c(){t=we("mask"),n=we("rect");for(let e=0;e<u.length;e+=1)u[e].c();c=xe(),a=we("g");for(let e=0;e<h.length;e+=1)h[e].c();Ae(n,"x","0"),Ae(n,"y","0"),Ae(n,"width",r=e[2].width),Ae(n,"height",o=e[2].height),Ae(n,"fill","#fff"),Ae(t,"id",i="killer-"+e[0]+"-mask"),Ae(t,"maskUnits","userSpaceOnUse"),Ae(t,"maskContentUnits","userSpaceOnUse"),Ae(t,"x","0"),Ae(t,"y","0"),Ae(t,"width",s=e[2].width),Ae(t,"height",l=e[2].height),Ae(a,"id",e[0])},m(e,r){me(e,t,r),ge(t,n);for(let e=0;e<u.length;e+=1)u[e].m(t,null);me(e,c,r),me(e,a,r);for(let e=0;e<h.length;e+=1)h[e].m(a,null)},p(e,[c]){4&c&&r!==(r=e[2].width)&&Ae(n,"width",r),4&c&&o!==(o=e[2].height)&&Ae(n,"height",o),24&c&&(p=e[4](e[3]||{}),u=tt(u,c,g,1,e,p,d,t,Qe,_o,null,$o)),1&c&&i!==(i="killer-"+e[0]+"-mask")&&Ae(t,"id",i),4&c&&s!==(s=e[2].width)&&Ae(t,"width",s),4&c&&l!==(l=e[2].height)&&Ae(t,"height",l),25&c&&(m=e[4](e[3]||{}),h=tt(h,c,v,1,e,m,f,a,Qe,Mo,null,xo)),1&c&&Ae(a,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<u.length;e+=1)u[e].d();e&&ve(c),e&&ve(a);for(let e=0;e<h.length;e+=1)h[e].d()}}}const Ao=.075,Co=.2,So=.015;function Eo(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(3,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(2,c=e.grid)},[s,l,c,r,function(e){const t=[];for(const[n,{sum:r,cells:o}]of Object.entries(e||{})){const e=C(o);if(0>=e.length)continue;const i=e[0],s=G(e,c,Ao,!0);if(null==s)continue;const l=d(i,c),a={x:l[0]+Ao-So,y:l[1]+Ao-So},u=null!=r?`${r}`:"";t.push({cageId:n,text:u,labelPos:a,d:s})}return t}]}function Io(e,t,n){const r=e.slice();return r[8]=t[n].idx,r[9]=t[n].x,r[10]=t[n].y,r}function Oo(e,t){let n,r,o;return{key:e,first:null,c(){n=we("rect"),Ae(n,"x",r=t[9]),Ae(n,"y",o=t[10]),Ae(n,"width",t[5]),Ae(n,"height",t[5]),Ae(n,"stroke",t[2]),Ae(n,"stroke-width",t[4]),Ae(n,"fill",t[2]),Ae(n,"fill-opacity","0.167"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,8&i&&r!==(r=t[9])&&Ae(n,"x",r),8&i&&o!==(o=t[10])&&Ae(n,"y",o),4&i&&Ae(n,"stroke",t[2]),4&i&&Ae(n,"fill",t[2])},d(e){e&&ve(n)}}}function Ho(e){let t,n=[],r=new Map,o=e[6](e[3]||{});const i=e=>e[8];for(let t=0;t<o.length;t+=1){let s=Io(e,o,t),l=i(s);r.set(l,n[t]=Oo(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0])},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){124&s&&(o=e[6](e[3]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,Oo,null,Io)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}const Lo=.025;function Do(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(3,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t,{color:a}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(7,c=e.grid),"color"in e&&n(2,a=e.color)},[s,l,a,r,.05,.95,function(e){const t=[];for(const n of C(e)){const[e,r]=d(n,c);t.push({idx:+n,x:e+Lo,y:r+Lo})}return t},c]}class jo extends ct{constructor(e){super(),lt(this,e,Do,Ho,oe,{id:0,ref:1,grid:7,color:2})}}function No(e,t,n){const r=e.slice();return r[6]=t[n].idx,r[7]=t[n].x,r[8]=t[n].y,r}function Ro(e,t){let n,r,o;return{key:e,first:null,c(){n=we("rect"),Ae(n,"x",r=t[7]),Ae(n,"y",o=t[8]),Ae(n,"width",t[3]),Ae(n,"height",t[3]),Ae(n,"fill","#666"),Ae(n,"fill-opacity","0.267"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,4&i&&r!==(r=t[7])&&Ae(n,"x",r),4&i&&o!==(o=t[8])&&Ae(n,"y",o)},d(e){e&&ve(n)}}}function Uo(e){let t,n=[],r=new Map,o=e[4](e[2]||{});const i=e=>e[6];for(let t=0;t<o.length;t+=1){let s=No(e,o,t),l=i(s);r.set(l,n[t]=Ro(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0])},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){28&s&&(o=e[4](e[2]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,Ro,null,No)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}const Po=.125;function Go(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(5,c=e.grid)},[s,l,r,.75,function(e){const t=[];for(const n of C(e)){const[e,r]=d(n,c);t.push({idx:+n,x:e+Po,y:r+Po})}return t},c]}function Fo(e,t,n){const r=e.slice();return r[5]=t[n].idx,r[6]=t[n].cx,r[7]=t[n].cy,r}function zo(e,t){let n,r,o;return{key:e,first:null,c(){n=we("circle"),Ae(n,"cx",r=t[6]),Ae(n,"cy",o=t[7]),Ae(n,"r","0.425"),Ae(n,"fill","#666"),Ae(n,"fill-opacity","0.267"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,4&i&&r!==(r=t[6])&&Ae(n,"cx",r),4&i&&o!==(o=t[7])&&Ae(n,"cy",o)},d(e){e&&ve(n)}}}function Bo(e){let t,n=[],r=new Map,o=e[3](e[2]||{});const i=e=>e[5];for(let t=0;t<o.length;t+=1){let s=Fo(e,o,t),l=i(s);r.set(l,n[t]=zo(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0])},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){12&s&&(o=e[3](e[2]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,zo,null,Fo)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Vo(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(4,c=e.grid)},[s,l,r,function(e){const t=[];for(const n of C(e)){const[e,r]=d(n,c);t.push({idx:+n,cx:e+.5,cy:r+.5})}return t},c]}function Wo(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function Yo(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function qo(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function Ko(e,t){let n,r,o;return{key:e,first:null,c(){n=we("use"),Ae(n,"href",r="#max-"+t[0]+"-maskitem"),Ae(n,"transform",o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")"),Ae(n,"fill","#000"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,1&i&&r!==(r="#max-"+t[0]+"-maskitem")&&Ae(n,"href",r),12&i&&o!==(o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")")&&Ae(n,"transform",o)},d(e){e&&ve(n)}}}function Xo(e,t){let n,r,o;return{key:e,first:null,c(){n=we("rect"),Ae(n,"x",r=d(+t[4],t[2])[0]),Ae(n,"y",o=d(+t[4],t[2])[1]),Ae(n,"width","1"),Ae(n,"height","1"),Ae(n,"fill","#7d3737"),Ae(n,"fill-opacity","0.1"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,12&i&&r!==(r=d(+t[4],t[2])[0])&&Ae(n,"x",r),12&i&&o!==(o=d(+t[4],t[2])[1])&&Ae(n,"y",o)},d(e){e&&ve(n)}}}function Jo(e,t){let n,r,o;return{key:e,first:null,c(){n=we("use"),Ae(n,"href",r="#max-"+t[0]),Ae(n,"transform",o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,1&i&&r!==(r="#max-"+t[0])&&Ae(n,"href",r),12&i&&o!==(o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")")&&Ae(n,"transform",o)},d(e){e&&ve(n)}}}function Zo(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v,y,b,w,k,x=[],$=new Map,_=[],M=new Map,T=[],A=new Map,C=Object.entries(e[3]||{});const S=e=>e[4];for(let t=0;t<C.length;t+=1){let n=qo(e,C,t),r=S(n);$.set(r,x[t]=Ko(r,n))}let E=Object.entries(e[3]||{});const I=e=>e[4];for(let t=0;t<E.length;t+=1){let n=Yo(e,E,t),r=I(n);M.set(r,_[t]=Xo(r,n))}let O=Object.entries(e[3]||{});const H=e=>e[4];for(let t=0;t<O.length;t+=1){let n=Wo(e,O,t),r=H(n);A.set(r,T[t]=Jo(r,n))}return{c(){t=we("path"),r=xe(),o=we("path"),s=xe(),l=we("mask"),c=we("rect");for(let e=0;e<x.length;e+=1)x[e].c();p=xe(),g=we("rect"),y=xe(),b=we("g");for(let e=0;e<_.length;e+=1)_[e].c();w=we("g");for(let e=0;e<T.length;e+=1)T[e].c();Ae(t,"id",n="max-"+e[0]),Ae(t,"d","M 0.12,0.38 L 0.08,0.50 L 0.12,0.62 M 0.38,0.12 L 0.50,0.08 L 0.62,0.12 M 0.88,0.62 L 0.92,0.50 L 0.88,0.38 M 0.62,0.88 L 0.50,0.92 L 0.38,0.88"),Ae(t,"fill","none"),Ae(t,"stroke","#000"),Ae(t,"stroke-width","0.025"),Ae(t,"stroke-miterlimit","1.5"),Ae(o,"id",i="max-"+e[0]+"-maskitem"),Ae(o,"d","M -0.5,0.5 L 0.5,-0.5 L 1.5,0.5 L 0.5,1.5 M 0,0 L 0,1 L 1,1 L 1,0"),Ae(o,"fill","#000"),Ae(c,"x","0.25"),Ae(c,"y","0.25"),Ae(c,"width",a=e[2].width-.5),Ae(c,"height",u=e[2].height-.5),Ae(c,"fill","#fff"),Ae(l,"id",d="max-"+e[0]+"-mask"),Ae(l,"maskUnits","userSpaceOnUse"),Ae(l,"maskContentUnits","userSpaceOnUse"),Ae(l,"x","0"),Ae(l,"y","0"),Ae(l,"width",h=e[2].width),Ae(l,"height",f=e[2].height),Ae(g,"width",m=e[2].width),Ae(g,"height",v=e[2].height),Ae(g,"fill","#fff"),Ae(w,"mask",k="url(#max-"+e[0]+"-mask)"),Ae(b,"id",e[0])},m(e,n){me(e,t,n),me(e,r,n),me(e,o,n),me(e,s,n),me(e,l,n),ge(l,c);for(let e=0;e<x.length;e+=1)x[e].m(l,null);me(e,p,n),me(e,g,n),me(e,y,n),me(e,b,n);for(let e=0;e<_.length;e+=1)_[e].m(b,null);ge(b,w);for(let e=0;e<T.length;e+=1)T[e].m(w,null)},p(e,[r]){1&r&&n!==(n="max-"+e[0])&&Ae(t,"id",n),1&r&&i!==(i="max-"+e[0]+"-maskitem")&&Ae(o,"id",i),4&r&&a!==(a=e[2].width-.5)&&Ae(c,"width",a),4&r&&u!==(u=e[2].height-.5)&&Ae(c,"height",u),13&r&&(C=Object.entries(e[3]||{}),x=tt(x,r,S,1,e,C,$,l,Qe,Ko,null,qo)),1&r&&d!==(d="max-"+e[0]+"-mask")&&Ae(l,"id",d),4&r&&h!==(h=e[2].width)&&Ae(l,"width",h),4&r&&f!==(f=e[2].height)&&Ae(l,"height",f),4&r&&m!==(m=e[2].width)&&Ae(g,"width",m),4&r&&v!==(v=e[2].height)&&Ae(g,"height",v),12&r&&(E=Object.entries(e[3]||{}),_=tt(_,r,I,1,e,E,M,b,Qe,Xo,w,Yo)),13&r&&(O=Object.entries(e[3]||{}),T=tt(T,r,H,1,e,O,A,w,Qe,Jo,null,Wo)),1&r&&k!==(k="url(#max-"+e[0]+"-mask)")&&Ae(w,"mask",k),1&r&&Ae(b,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(r),e&&ve(o),e&&ve(s),e&&ve(l);for(let e=0;e<x.length;e+=1)x[e].d();e&&ve(p),e&&ve(g),e&&ve(y),e&&ve(b);for(let e=0;e<_.length;e+=1)_[e].d();for(let e=0;e<T.length;e+=1)T[e].d()}}}function Qo(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(3,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(2,c=e.grid)},[s,l,c,r]}function ei(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function ti(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function ni(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function ri(e,t){let n,r,o;return{key:e,first:null,c(){n=we("use"),Ae(n,"href",r="#min-"+t[0]+"-maskitem"),Ae(n,"transform",o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")"),Ae(n,"fill","#000"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,1&i&&r!==(r="#min-"+t[0]+"-maskitem")&&Ae(n,"href",r),12&i&&o!==(o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")")&&Ae(n,"transform",o)},d(e){e&&ve(n)}}}function oi(e,t){let n,r,o;return{key:e,first:null,c(){n=we("rect"),Ae(n,"x",r=d(+t[4],t[2])[0]),Ae(n,"y",o=d(+t[4],t[2])[1]),Ae(n,"width","1"),Ae(n,"height","1"),Ae(n,"fill","#694b7d"),Ae(n,"fill-opacity","0.1"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,12&i&&r!==(r=d(+t[4],t[2])[0])&&Ae(n,"x",r),12&i&&o!==(o=d(+t[4],t[2])[1])&&Ae(n,"y",o)},d(e){e&&ve(n)}}}function ii(e,t){let n,r,o;return{key:e,first:null,c(){n=we("use"),Ae(n,"href",r="#min-"+t[0]),Ae(n,"transform",o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")"),this.first=n},m(e,t){me(e,n,t)},p(e,i){t=e,1&i&&r!==(r="#min-"+t[0])&&Ae(n,"href",r),12&i&&o!==(o="translate("+d(+t[4],t[2])[0]+","+d(+t[4],t[2])[1]+")")&&Ae(n,"transform",o)},d(e){e&&ve(n)}}}function si(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v,y,b,w,k,x=[],$=new Map,_=[],M=new Map,T=[],A=new Map,C=Object.entries(e[3]||{});const S=e=>e[4];for(let t=0;t<C.length;t+=1){let n=ni(e,C,t),r=S(n);$.set(r,x[t]=ri(r,n))}let E=Object.entries(e[3]||{});const I=e=>e[4];for(let t=0;t<E.length;t+=1){let n=ti(e,E,t),r=I(n);M.set(r,_[t]=oi(r,n))}let O=Object.entries(e[3]||{});const H=e=>e[4];for(let t=0;t<O.length;t+=1){let n=ei(e,O,t),r=H(n);A.set(r,T[t]=ii(r,n))}return{c(){t=we("path"),r=xe(),o=we("path"),s=xe(),l=we("mask"),c=we("rect");for(let e=0;e<x.length;e+=1)x[e].c();p=xe(),g=we("rect"),y=xe(),b=we("g");for(let e=0;e<_.length;e+=1)_[e].c();w=we("g");for(let e=0;e<T.length;e+=1)T[e].c();Ae(t,"id",n="min-"+e[0]),Ae(t,"d","M 0.08,0.38 L 0.12,0.50 L 0.08,0.62 M 0.38,0.08 L 0.50,0.12 L 0.62,0.08 M 0.92,0.62 L 0.88,0.50 L 0.92,0.38 M 0.62,0.92 L 0.50,0.88 L 0.38,0.92"),Ae(t,"fill","none"),Ae(t,"stroke","#000"),Ae(t,"stroke-width","0.025"),Ae(t,"stroke-miterlimit","1.5"),Ae(o,"id",i="min-"+e[0]+"-maskitem"),Ae(o,"d","M -0.5,0.5 L 0.5,-0.5 L 1.5,0.5 L 0.5,1.5 M 0,0 L 0,1 L 1,1 L 1,0"),Ae(o,"fill","#000"),Ae(c,"x","0.25"),Ae(c,"y","0.25"),Ae(c,"width",a=e[2].width-.5),Ae(c,"height",u=e[2].height-.5),Ae(c,"fill","#fff"),Ae(l,"id",d="min-"+e[0]+"-mask"),Ae(l,"maskUnits","userSpaceOnUse"),Ae(l,"maskContentUnits","userSpaceOnUse"),Ae(l,"x","0"),Ae(l,"y","0"),Ae(l,"width",h=e[2].width),Ae(l,"height",f=e[2].height),Ae(g,"width",m=e[2].width),Ae(g,"height",v=e[2].height),Ae(g,"fill","#fff"),Ae(w,"mask",k="url(#min-"+e[0]+"-mask)"),Ae(b,"id",e[0])},m(e,n){me(e,t,n),me(e,r,n),me(e,o,n),me(e,s,n),me(e,l,n),ge(l,c);for(let e=0;e<x.length;e+=1)x[e].m(l,null);me(e,p,n),me(e,g,n),me(e,y,n),me(e,b,n);for(let e=0;e<_.length;e+=1)_[e].m(b,null);ge(b,w);for(let e=0;e<T.length;e+=1)T[e].m(w,null)},p(e,[r]){1&r&&n!==(n="min-"+e[0])&&Ae(t,"id",n),1&r&&i!==(i="min-"+e[0]+"-maskitem")&&Ae(o,"id",i),4&r&&a!==(a=e[2].width-.5)&&Ae(c,"width",a),4&r&&u!==(u=e[2].height-.5)&&Ae(c,"height",u),13&r&&(C=Object.entries(e[3]||{}),x=tt(x,r,S,1,e,C,$,l,Qe,ri,null,ni)),1&r&&d!==(d="min-"+e[0]+"-mask")&&Ae(l,"id",d),4&r&&h!==(h=e[2].width)&&Ae(l,"width",h),4&r&&f!==(f=e[2].height)&&Ae(l,"height",f),4&r&&m!==(m=e[2].width)&&Ae(g,"width",m),4&r&&v!==(v=e[2].height)&&Ae(g,"height",v),12&r&&(E=Object.entries(e[3]||{}),_=tt(_,r,I,1,e,E,M,b,Qe,oi,w,ti)),13&r&&(O=Object.entries(e[3]||{}),T=tt(T,r,H,1,e,O,A,w,Qe,ii,null,ei)),1&r&&k!==(k="url(#min-"+e[0]+"-mask)")&&Ae(w,"mask",k),1&r&&Ae(b,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(r),e&&ve(o),e&&ve(s),e&&ve(l);for(let e=0;e<x.length;e+=1)x[e].d();e&&ve(p),e&&ve(g),e&&ve(y),e&&ve(b);for(let e=0;e<_.length;e+=1)_[e].d();for(let e=0;e<T.length;e+=1)T[e].d()}}}function li(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(3,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(2,c=e.grid)},[s,l,c,r]}function ci(e,t,n){const r=e.slice();return r[8]=t[n].itemId,r[9]=t[n].d,r}function ai(e,t){let n,r;return{key:e,first:null,c(){n=we("path"),Ae(n,"d",r=t[9]),Ae(n,"fill","none"),Ae(n,"stroke-linejoin","round"),Ae(n,"stroke-linecap","round"),Ae(n,"stroke",t[2]),Ae(n,"stroke-width",t[3]),Ae(n,"stroke-opacity","0.9"),this.first=n},m(e,t){me(e,n,t)},p(e,o){t=e,16&o&&r!==(r=t[9])&&Ae(n,"d",r),4&o&&Ae(n,"stroke",t[2]),8&o&&Ae(n,"stroke-width",t[3])},d(e){e&&ve(n)}}}function ui(e){let t,n=[],r=new Map,o=e[5](e[4]);const i=e=>e[8];for(let t=0;t<o.length;t+=1){let s=ci(e,o,t),l=i(s);r.set(l,n[t]=ai(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0])},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){60&s&&(o=e[5](e[4]),n=tt(n,s,i,1,e,o,r,t,Qe,ai,null,ci)),1&s&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function di(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(4,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t,{stroke:a="#c7855c"}=t,{strokeWidth:d=.125}=t,{pathOptions:h={shortenHead:.2,shortenTail:.2,bezierRounding:.2,closeLoops:!1}}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(6,c=e.grid),"stroke"in e&&n(2,a=e.stroke),"strokeWidth"in e&&n(3,d=e.strokeWidth),"pathOptions"in e&&n(7,h=e.pathOptions)},[s,l,a,d,r,function(e){if(null==e)return[];const t=[];for(const[n,r]of Object.entries(e)){const e=u(r);t.push({itemId:n,d:j(e,c,h)})}return t},c,h]}class hi extends ct{constructor(e){super(),lt(this,e,di,ui,oe,{id:0,ref:1,grid:6,stroke:2,strokeWidth:3,pathOptions:7})}}function fi(e,t,n){const r=e.slice();return r[5]=t[n].arrowId,r[6]=t[n].dBulb,r[7]=t[n].dBody,r}function pi(e,t){let n,r,o,i,s,l,c,a,u,d,h,f,p;return{key:e,first:null,c(){n=we("mask"),r=we("rect"),s=we("path"),a=we("path"),h=we("path"),Ae(r,"width",o=t[2].width),Ae(r,"height",i=t[2].height),Ae(r,"fill","#fff"),Ae(s,"d",l=t[6]),Ae(s,"fill","none"),Ae(s,"stroke","#000"),Ae(s,"stroke-width",2*mi-vi),Ae(s,"stroke-linejoin","round"),Ae(s,"stroke-linecap","round"),Ae(n,"id",c="arrow-"+t[0]+"-mask-"+t[5]),Ae(n,"maskUnits","userSpaceOnUse"),Ae(a,"d",u=t[6]),Ae(a,"fill","none"),Ae(a,"stroke",bi),Ae(a,"stroke-width",2*mi+vi),Ae(a,"mask",d="url(#arrow-"+t[0]+"-mask-"+t[5]+")"),Ae(a,"stroke-linejoin","round"),Ae(a,"stroke-linecap","round"),Ae(h,"d",f=t[7]),Ae(h,"fill","none"),Ae(h,"stroke",bi),Ae(h,"stroke-width",yi),Ae(h,"stroke-miterlimit","1.5"),Ae(h,"marker-end",p="url(#arrow-point-"+t[0]+")"),this.first=n},m(e,t){me(e,n,t),ge(n,r),ge(n,s),me(e,a,t),me(e,h,t)},p(e,g){t=e,4&g&&o!==(o=t[2].width)&&Ae(r,"width",o),4&g&&i!==(i=t[2].height)&&Ae(r,"height",i),8&g&&l!==(l=t[6])&&Ae(s,"d",l),9&g&&c!==(c="arrow-"+t[0]+"-mask-"+t[5])&&Ae(n,"id",c),8&g&&u!==(u=t[6])&&Ae(a,"d",u),9&g&&d!==(d="url(#arrow-"+t[0]+"-mask-"+t[5]+")")&&Ae(a,"mask",d),8&g&&f!==(f=t[7])&&Ae(h,"d",f),1&g&&p!==(p="url(#arrow-point-"+t[0]+")")&&Ae(h,"marker-end",p)},d(e){e&&ve(n),e&&ve(a),e&&ve(h)}}}function gi(e){let t,n,r,o,i,s=[],l=new Map,c=e[4](e[3]||{});const a=e=>e[5];for(let t=0;t<c.length;t+=1){let n=fi(e,c,t),r=a(n);l.set(r,s[t]=pi(r,n))}return{c(){t=we("marker"),n=we("path"),o=xe(),i=we("g");for(let e=0;e<s.length;e+=1)s[e].c();Ae(n,"d","M 0.4,0.425 L 0.5,0.5 L 0.4,0.575"),Ae(n,"fill","none"),Ae(n,"stroke",bi),Ae(n,"stroke-width",yi),Ae(t,"id",r="arrow-point-"+e[0]),Ae(t,"viewBox","0 0 1 1"),Ae(t,"refX","0.5"),Ae(t,"refY","0.5"),Ae(t,"markerUnits","userSpaceOnUse"),Ae(t,"markerWidth","1"),Ae(t,"markerHeight","1"),Ae(t,"orient","auto"),Ae(i,"id",e[0])},m(e,r){me(e,t,r),ge(t,n),me(e,o,r),me(e,i,r);for(let e=0;e<s.length;e+=1)s[e].m(i,null)},p(e,[n]){1&n&&r!==(r="arrow-point-"+e[0])&&Ae(t,"id",r),29&n&&(c=e[4](e[3]||{}),s=tt(s,n,a,1,e,c,l,i,Qe,pi,null,fi)),1&n&&Ae(i,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(o),e&&ve(i);for(let e=0;e<s.length;e+=1)s[e].d()}}}const mi=.375,vi=.025,yi=.025,bi="#222";function wi(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(3,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(2,c=e.grid)},[s,l,c,r,function(e){const t=[];for(const[n,{bulb:r,body:o}]of Object.entries(e||{})){const e=j(u(r||{}),c),i=j(u(o||{}),c,{shortenHead:mi,shortenTail:.2});t.push({arrowId:n,dBulb:e,dBody:i})}return t}]}function ki(e,t,n){const r=e.slice();return r[7]=t[n].itemId,r[8]=t[n].d,r[9]=t[n].head,r[10]=t[n].tail,r}function xi(e,t){let n,r,o,i,s,l,c,a,u;return{key:e,first:null,c(){n=we("path"),i=we("rect"),c=we("rect"),Ae(n,"d",r=t[8]),Ae(n,"fill","none"),Ae(n,"stroke",Si),Ae(n,"stroke-opacity","0.95"),Ae(n,"stroke-linejoin","round"),Ae(n,"stroke-linecap","butt"),Ae(n,"stroke-width",Ti),Ae(n,"mask",o="url(#lockout-"+t[0]+"-mask)"),Ae(i,"x",s=t[9][0]+t[3]),Ae(i,"y",l=t[9][1]+t[3]),Ae(i,"width",_i),Ae(i,"height",_i),Ae(i,"transform","rotate(45)"),Ae(i,"fill",Ci),Ae(i,"stroke",Ai),Ae(i,"stroke-width",Mi),Ae(i,"class","lockout-diamond svelte-1d24fge"),Ae(c,"x",a=t[10][0]+t[3]),Ae(c,"y",u=t[10][1]+t[3]),Ae(c,"width",_i),Ae(c,"height",_i),Ae(c,"transform","rotate(45)"),Ae(c,"fill",Ci),Ae(c,"stroke",Ai),Ae(c,"stroke-width",Mi),Ae(c,"class","lockout-diamond svelte-1d24fge"),this.first=n},m(e,t){me(e,n,t),me(e,i,t),me(e,c,t)},p(e,d){t=e,4&d&&r!==(r=t[8])&&Ae(n,"d",r),1&d&&o!==(o="url(#lockout-"+t[0]+"-mask)")&&Ae(n,"mask",o),4&d&&s!==(s=t[9][0]+t[3])&&Ae(i,"x",s),4&d&&l!==(l=t[9][1]+t[3])&&Ae(i,"y",l),4&d&&a!==(a=t[10][0]+t[3])&&Ae(c,"x",a),4&d&&u!==(u=t[10][1]+t[3])&&Ae(c,"y",u)},d(e){e&&ve(n),e&&ve(i),e&&ve(c)}}}function $i(e){let t,n,r,o,i,s,l,c,a,u=[],d=new Map,h=e[2];const f=e=>e[7];for(let t=0;t<h.length;t+=1){let n=ki(e,h,t),r=f(n);d.set(r,u[t]=xi(r,n))}return{c(){t=we("mask"),n=we("rect"),c=xe(),a=we("g");for(let e=0;e<u.length;e+=1)u[e].c();Ae(n,"width",r=e[1].width),Ae(n,"height",o=e[1].height),Ae(n,"fill","#fff"),Ae(t,"id",i="lockout-"+e[0]+"-mask"),Ae(t,"maskUnits","userSpaceOnUse"),Ae(t,"x","0"),Ae(t,"y","0"),Ae(t,"width",s=e[1].width),Ae(t,"height",l=e[1].height),Ae(a,"id",e[0])},m(e,r){me(e,t,r),ge(t,n),me(e,c,r),me(e,a,r);for(let e=0;e<u.length;e+=1)u[e].m(a,null)},p(e,[c]){2&c&&r!==(r=e[1].width)&&Ae(n,"width",r),2&c&&o!==(o=e[1].height)&&Ae(n,"height",o),1&c&&i!==(i="lockout-"+e[0]+"-mask")&&Ae(t,"id",i),2&c&&s!==(s=e[1].width)&&Ae(t,"width",s),2&c&&l!==(l=e[1].height)&&Ae(t,"height",l),13&c&&(h=e[2],u=tt(u,c,f,1,e,h,d,a,Qe,xi,null,ki)),1&c&&Ae(a,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(c),e&&ve(a);for(let e=0;e<u.length;e+=1)u[e].d()}}}const _i=.65,Mi=.025,Ti=.15,Ai="#0000ff",Ci="#e7e6ff",Si="#aabeef";function Ei(e,t,n){let r,{id:o}=t,{ref:i}=t,{grid:s}=t;const l=(1-_i)/2;const c=ht(i,(function(e){if(null==e)return[];const t=[];for(const[n,r]of Object.entries(e)){const e=u(r);t.push({head:d(e[0],s),tail:d(e[e.length-1],s),itemId:n,d:j(e,s,{shortenHead:_i/2,shortenTail:_i/2,bezierRounding:.2})})}return t}));return se(e,c,(e=>n(2,r=e))),e.$$set=e=>{"id"in e&&n(0,o=e.id),"ref"in e&&n(5,i=e.ref),"grid"in e&&n(1,s=e.grid)},[o,s,r,l,c,i]}function Ii(e,t,n){const r=e.slice();return r[6]=t[n].itemId,r[7]=t[n].d,r[8]=t[n].head,r[9]=t[n].tail,r}function Oi(e,t){let n,r,o,i,s,l,c,a,u;return{key:e,first:null,c(){n=we("path"),i=we("circle"),c=we("circle"),Ae(n,"d",r=t[7]),Ae(n,"fill","none"),Ae(n,"stroke","#b5b5b5"),Ae(n,"stroke-opacity","0.95"),Ae(n,"stroke-linejoin","round"),Ae(n,"stroke-linecap","butt"),Ae(n,"stroke-width",ji),Ae(n,"mask",o="url(#double-arrow-"+t[0]+"-mask)"),Ae(i,"cx",s=t[8][0]+.5),Ae(i,"cy",l=t[8][1]+.5),Ae(i,"r",Li),Ae(i,"fill","none"),Ae(i,"stroke","#000"),Ae(i,"stroke-width",Di),Ae(c,"cx",a=t[9][0]+.5),Ae(c,"cy",u=t[9][1]+.5),Ae(c,"r",Li),Ae(c,"fill","none"),Ae(c,"stroke","#000"),Ae(c,"stroke-width",Di),this.first=n},m(e,t){me(e,n,t),me(e,i,t),me(e,c,t)},p(e,d){t=e,4&d&&r!==(r=t[7])&&Ae(n,"d",r),1&d&&o!==(o="url(#double-arrow-"+t[0]+"-mask)")&&Ae(n,"mask",o),4&d&&s!==(s=t[8][0]+.5)&&Ae(i,"cx",s),4&d&&l!==(l=t[8][1]+.5)&&Ae(i,"cy",l),4&d&&a!==(a=t[9][0]+.5)&&Ae(c,"cx",a),4&d&&u!==(u=t[9][1]+.5)&&Ae(c,"cy",u)},d(e){e&&ve(n),e&&ve(i),e&&ve(c)}}}function Hi(e){let t,n,r,o,i,s,l,c,a,u=[],d=new Map,h=e[2];const f=e=>e[6];for(let t=0;t<h.length;t+=1){let n=Ii(e,h,t),r=f(n);d.set(r,u[t]=Oi(r,n))}return{c(){t=we("mask"),n=we("rect"),c=xe(),a=we("g");for(let e=0;e<u.length;e+=1)u[e].c();Ae(n,"width",r=e[1].width),Ae(n,"height",o=e[1].height),Ae(n,"fill","#fff"),Ae(t,"id",i="double-arrow-"+e[0]+"-mask"),Ae(t,"maskUnits","userSpaceOnUse"),Ae(t,"x","0"),Ae(t,"y","0"),Ae(t,"width",s=e[1].width),Ae(t,"height",l=e[1].height),Ae(a,"id",e[0])},m(e,r){me(e,t,r),ge(t,n),me(e,c,r),me(e,a,r);for(let e=0;e<u.length;e+=1)u[e].m(a,null)},p(e,[c]){2&c&&r!==(r=e[1].width)&&Ae(n,"width",r),2&c&&o!==(o=e[1].height)&&Ae(n,"height",o),1&c&&i!==(i="double-arrow-"+e[0]+"-mask")&&Ae(t,"id",i),2&c&&s!==(s=e[1].width)&&Ae(t,"width",s),2&c&&l!==(l=e[1].height)&&Ae(t,"height",l),5&c&&(h=e[2],u=tt(u,c,f,1,e,h,d,a,Qe,Oi,null,Ii)),1&c&&Ae(a,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(c),e&&ve(a);for(let e=0;e<u.length;e+=1)u[e].d()}}}const Li=.375,Di=.025,ji=.15;function Ni(e,t,n){let r,{id:o}=t,{ref:i}=t,{grid:s}=t;const l=ht(i,(function(e){if(null==e)return[];const t=[];for(const[n,r]of Object.entries(e)){const e=u(r);t.push({head:d(e[0],s),tail:d(e[e.length-1],s),itemId:n,d:j(e,s,{shortenHead:Li,shortenTail:Li,bezierRounding:.2})})}return t}));return se(e,l,(e=>n(2,r=e))),e.$$set=e=>{"id"in e&&n(0,o=e.id),"ref"in e&&n(4,i=e.ref),"grid"in e&&n(1,s=e.grid)},[o,s,r,l,i]}function Ri(e,t,n){const r=e.slice();return r[6]=t[n].itemId,r[7]=t[n].d,r[8]=t[n].head,r[9]=t[n].tail,r}function Ui(e,t){let n,r,o,i,s,l,c,a,u;return{key:e,first:null,c(){n=we("path"),i=we("circle"),c=we("circle"),Ae(n,"d",r=t[7]),Ae(n,"fill","none"),Ae(n,"stroke","#c18bb7"),Ae(n,"stroke-opacity","0.95"),Ae(n,"stroke-linejoin","round"),Ae(n,"stroke-linecap","butt"),Ae(n,"stroke-width",zi),Ae(n,"mask",o="url(#between-"+t[0]+"-mask)"),Ae(i,"cx",s=t[8][0]+.5),Ae(i,"cy",l=t[8][1]+.5),Ae(i,"r",Gi),Ae(i,"fill","none"),Ae(i,"stroke","#000"),Ae(i,"stroke-width",Fi),Ae(c,"cx",a=t[9][0]+.5),Ae(c,"cy",u=t[9][1]+.5),Ae(c,"r",Gi),Ae(c,"fill","none"),Ae(c,"stroke","#000"),Ae(c,"stroke-width",Fi),this.first=n},m(e,t){me(e,n,t),me(e,i,t),me(e,c,t)},p(e,d){t=e,4&d&&r!==(r=t[7])&&Ae(n,"d",r),1&d&&o!==(o="url(#between-"+t[0]+"-mask)")&&Ae(n,"mask",o),4&d&&s!==(s=t[8][0]+.5)&&Ae(i,"cx",s),4&d&&l!==(l=t[8][1]+.5)&&Ae(i,"cy",l),4&d&&a!==(a=t[9][0]+.5)&&Ae(c,"cx",a),4&d&&u!==(u=t[9][1]+.5)&&Ae(c,"cy",u)},d(e){e&&ve(n),e&&ve(i),e&&ve(c)}}}function Pi(e){let t,n,r,o,i,s,l,c,a,u=[],d=new Map,h=e[2];const f=e=>e[6];for(let t=0;t<h.length;t+=1){let n=Ri(e,h,t),r=f(n);d.set(r,u[t]=Ui(r,n))}return{c(){t=we("mask"),n=we("rect"),c=xe(),a=we("g");for(let e=0;e<u.length;e+=1)u[e].c();Ae(n,"width",r=e[1].width),Ae(n,"height",o=e[1].height),Ae(n,"fill","#fff"),Ae(t,"id",i="between-"+e[0]+"-mask"),Ae(t,"maskUnits","userSpaceOnUse"),Ae(t,"x","0"),Ae(t,"y","0"),Ae(t,"width",s=e[1].width),Ae(t,"height",l=e[1].height),Ae(a,"id",e[0])},m(e,r){me(e,t,r),ge(t,n),me(e,c,r),me(e,a,r);for(let e=0;e<u.length;e+=1)u[e].m(a,null)},p(e,[c]){2&c&&r!==(r=e[1].width)&&Ae(n,"width",r),2&c&&o!==(o=e[1].height)&&Ae(n,"height",o),1&c&&i!==(i="between-"+e[0]+"-mask")&&Ae(t,"id",i),2&c&&s!==(s=e[1].width)&&Ae(t,"width",s),2&c&&l!==(l=e[1].height)&&Ae(t,"height",l),5&c&&(h=e[2],u=tt(u,c,f,1,e,h,d,a,Qe,Ui,null,Ri)),1&c&&Ae(a,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(c),e&&ve(a);for(let e=0;e<u.length;e+=1)u[e].d()}}}const Gi=.375,Fi=.025,zi=.15;function Bi(e,t,n){let r,{id:o}=t,{ref:i}=t,{grid:s}=t;const l=ht(i,(function(e){if(null==e)return[];const t=[];for(const[n,r]of Object.entries(e)){const e=u(r);t.push({head:d(e[0],s),tail:d(e[e.length-1],s),itemId:n,d:j(e,s,{shortenHead:Gi,shortenTail:Gi,bezierRounding:.2})})}return t}));return se(e,l,(e=>n(2,r=e))),e.$$set=e=>{"id"in e&&n(0,o=e.id),"ref"in e&&n(4,i=e.ref),"grid"in e&&n(1,s=e.grid)},[o,s,r,l,i]}function Vi(e,t,n){const r=e.slice();return r[6]=t[n].thermoId,r[7]=t[n].d,r[8]=t[n].invalid,r}function Wi(e){let t,n,r,o;return{c(){t=we("path"),Ae(t,"d",n=e[7]),Ae(t,"fill","none"),Ae(t,"stroke",r=e[8]&&!e[3]?"#fff":"#444"),Ae(t,"stroke-width","0.2"),Ae(t,"marker-start",o="url(#thermo-bulb-"+e[0]+")"),Ae(t,"stroke-linejoin","round"),Ae(t,"stroke-linecap","round")},m(e,n){me(e,t,n)},p(e,i){32&i&&n!==(n=e[7])&&Ae(t,"d",n),40&i&&r!==(r=e[8]&&!e[3]?"#fff":"#444")&&Ae(t,"stroke",r),1&i&&o!==(o="url(#thermo-bulb-"+e[0]+")")&&Ae(t,"marker-start",o)},d(e){e&&ve(t)}}}function Yi(e){let t,n,r,o,i,s;return{c(){t=we("path"),r=we("path"),Ae(t,"d",n=e[7]),Ae(t,"fill","none"),Ae(t,"stroke","#111"),Ae(t,"stroke-width","0.2"),Ae(t,"stroke-linejoin","round"),Ae(r,"d",o=e[7]),Ae(r,"fill","none"),Ae(r,"stroke","#444"),Ae(r,"stroke-width","0.2"),Ae(r,"marker-start",i="url(#slow-thermo-bulb-"+e[0]+")"),Ae(r,"marker-end",s="url(#slow-thermo-endcap-"+e[0]+")"),Ae(r,"stroke-linejoin","round"),Ae(r,"stroke-dasharray","0.4 0.1"),Ae(r,"stroke-dashoffset","0.2")},m(e,n){me(e,t,n),me(e,r,n)},p(e,l){32&l&&n!==(n=e[7])&&Ae(t,"d",n),32&l&&o!==(o=e[7])&&Ae(r,"d",o),1&l&&i!==(i="url(#slow-thermo-bulb-"+e[0]+")")&&Ae(r,"marker-start",i),1&l&&s!==(s="url(#slow-thermo-endcap-"+e[0]+")")&&Ae(r,"marker-end",s)},d(e){e&&ve(t),e&&ve(r)}}}function qi(e,t){let n,r;function o(e,t){return e[3]?Yi:Wi}let i=o(t),s=i(t);return{key:e,first:null,c(){n=$e(),s.c(),r=$e(),this.first=n},m(e,t){me(e,n,t),s.m(e,t),me(e,r,t)},p(e,n){i===(i=o(t=e))&&s?s.p(t,n):(s.d(1),s=i(t),s&&(s.c(),s.m(r.parentNode,r)))},d(e){e&&ve(n),s.d(e),e&&ve(r)}}}function Ki(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v,y,b,w,k,x,$=[],_=new Map,M=e[4](e[5]||{});const T=e=>e[6];for(let t=0;t<M.length;t+=1){let n=Vi(e,M,t),r=T(n);_.set(r,$[t]=qi(r,n))}return{c(){t=we("marker"),n=we("circle"),o=xe(),i=we("marker"),s=we("path"),c=xe(),a=we("marker"),u=we("circle"),h=xe(),f=we("mask");for(let e=0;e<$.length;e+=1)$[e].c();v=xe(),y=we("g"),b=we("rect"),Ae(n,"cx","0.5"),Ae(n,"cy","0.5"),Ae(n,"r",Xi),Ae(n,"fill","#444"),Ae(t,"id",r="thermo-bulb-"+e[0]),Ae(t,"viewBox","0 0 1 1"),Ae(t,"refX","0.5"),Ae(t,"refY","0.5"),Ae(t,"markerUnits","userSpaceOnUse"),Ae(t,"markerWidth","1"),Ae(t,"markerHeight","1"),Ae(t,"orient","auto"),Ae(s,"d","M0.35, 0.13 L0.65, 0.13 L0.86, 0.34 L0.86, 0.64 L0.64, 0.86 L0.35, 0.86 L0.13, 0.65 L0.13, 0.35 Z"),Ae(s,"stroke","#444"),Ae(s,"stroke-width","0.1"),Ae(s,"stroke-alignment","inner"),Ae(s,"fill","#222"),Ae(i,"id",l="slow-thermo-bulb-"+e[0]),Ae(i,"viewBox","0 0 1 1"),Ae(i,"refX","0.5"),Ae(i,"refY","0.5"),Ae(i,"markerUnits","userSpaceOnUse"),Ae(i,"markerWidth","1"),Ae(i,"markerHeight","1"),Ae(i,"orient","auto"),Ae(u,"cx","0.5"),Ae(u,"cy","0.5"),Ae(u,"r","0.1"),Ae(u,"fill","#444"),Ae(a,"id",d="slow-thermo-endcap-"+e[0]),Ae(a,"viewBox","0 0 1 1"),Ae(a,"refX","0.5"),Ae(a,"refY","0.5"),Ae(a,"markerUnits","userSpaceOnUse"),Ae(a,"markerWidth","1"),Ae(a,"markerHeight","1"),Ae(f,"id",p="thermo-"+e[0]+"-mask"),Ae(f,"maskUnits","userSpaceOnUse"),Ae(f,"x","0"),Ae(f,"y","0"),Ae(f,"width",g=e[2].width),Ae(f,"height",m=e[2].height),Ae(b,"x","0"),Ae(b,"y","0"),Ae(b,"width",w=e[2].width),Ae(b,"height",k=e[2].height),Ae(b,"fill","#888"),Ae(b,"stroke","none"),Ae(b,"mask",x="url(#thermo-"+e[0]+"-mask)"),Ae(y,"id",e[0])},m(e,r){me(e,t,r),ge(t,n),me(e,o,r),me(e,i,r),ge(i,s),me(e,c,r),me(e,a,r),ge(a,u),me(e,h,r),me(e,f,r);for(let e=0;e<$.length;e+=1)$[e].m(f,null);me(e,v,r),me(e,y,r),ge(y,b)},p(e,[n]){1&n&&r!==(r="thermo-bulb-"+e[0])&&Ae(t,"id",r),1&n&&l!==(l="slow-thermo-bulb-"+e[0])&&Ae(i,"id",l),1&n&&d!==(d="slow-thermo-endcap-"+e[0])&&Ae(a,"id",d),57&n&&(M=e[4](e[5]||{}),$=tt($,n,T,1,e,M,_,f,Qe,qi,null,Vi)),1&n&&p!==(p="thermo-"+e[0]+"-mask")&&Ae(f,"id",p),4&n&&g!==(g=e[2].width)&&Ae(f,"width",g),4&n&&m!==(m=e[2].height)&&Ae(f,"height",m),4&n&&w!==(w=e[2].width)&&Ae(b,"width",w),4&n&&k!==(k=e[2].height)&&Ae(b,"height",k),1&n&&x!==(x="url(#thermo-"+e[0]+"-mask)")&&Ae(b,"mask",x),1&n&&Ae(y,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),e&&ve(o),e&&ve(i),e&&ve(c),e&&ve(a),e&&ve(h),e&&ve(f);for(let e=0;e<$.length;e+=1)$[e].d();e&&ve(v),e&&ve(y)}}}const Xi=.375;function Ji(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(5,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t,{isSlow:a=!1}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(2,c=e.grid),"isSlow"in e&&n(3,a=e.isSlow)},[s,l,c,a,function(e){const t=[];for(const[n,r]of Object.entries(e)){const e=u(r);t.push({thermoId:n,d:j(e,c,{shortenTail:.25,bezierRounding:.2}),invalid:e.length>c.width})}return t},r]}class Zi extends ct{constructor(e){super(),lt(this,e,Ji,Ki,oe,{id:0,ref:1,grid:2,isSlow:3,getThermos:4})}get getThermos(){return this.$$.ctx[4]}}function Qi(e,t,n){const r=e.slice();return r[6]=t[n][0],r[7]=t[n][1],r}function es(e,t){let n,r,o,i,s=t[7]+"";return{key:e,first:null,c(){n=we("text"),r=ke(s),Ae(n,"x",o=d(+t[6],t[2])[0]+.5),Ae(n,"y",i=d(+t[6],t[2])[1]+.5),Ae(n,"fill",t[3]),Ae(n,"text-anchor","middle"),Ae(n,"dominant-baseline","central"),Ae(n,"font-size","0.775"),Ae(n,"font-weight","600"),this.first=n},m(e,t){me(e,n,t),ge(n,r)},p(e,l){t=e,32&l&&s!==(s=t[7]+"")&&Ce(r,s),36&l&&o!==(o=d(+t[6],t[2])[0]+.5)&&Ae(n,"x",o),36&l&&i!==(i=d(+t[6],t[2])[1]+.5)&&Ae(n,"y",i),8&l&&Ae(n,"fill",t[3])},d(e){e&&ve(n)}}}function ts(e){let t,n=[],r=new Map,o=Object.entries(e[5]||{});const i=e=>e[6];for(let t=0;t<o.length;t+=1){let s=Qi(e,o,t),l=i(s);r.set(l,n[t]=es(l,s))}return{c(){t=we("g");for(let e=0;e<n.length;e+=1)n[e].c();Ae(t,"id",e[0]),Ae(t,"mask",e[4])},m(e,r){me(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,[s]){44&s&&(o=Object.entries(e[5]||{}),n=tt(n,s,i,1,e,o,r,t,Qe,es,null,Qi)),1&s&&Ae(t,"id",e[0]),16&s&&Ae(t,"mask",e[4])},i:Q,o:Q,d(e){e&&ve(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function ns(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(5,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t,{color:a="#000"}=t,{mask:u}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(2,c=e.grid),"color"in e&&n(3,a=e.color),"mask"in e&&n(4,u=e.mask)},[s,l,c,a,u,r]}class rs extends ct{constructor(e){super(),lt(this,e,ns,ts,oe,{id:0,ref:1,grid:2,color:3,mask:4})}}function os(e,t,n){const r=e.slice();return r[5]=t[n],r}function is(e){let t,n;return{c(){t=we("path"),Ae(t,"d",n=e[5]),Ae(t,"fill","none"),Ae(t,"stroke","#000"),Ae(t,"stroke-width",.04)},m(e,n){me(e,t,n)},p(e,r){4&r&&n!==(n=e[5])&&Ae(t,"d",n)},d(e){e&&ve(t)}}}function ss(e){let t,n=e[3](e[2]),r=[];for(let t=0;t<n.length;t+=1)r[t]=is(os(e,n,t));return{c(){t=we("g");for(let e=0;e<r.length;e+=1)r[e].c();Ae(t,"id",e[0])},m(e,n){me(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,[o]){if(12&o){let i;for(n=e[3](e[2]),i=0;i<n.length;i+=1){const s=os(e,n,i);r[i]?r[i].p(s,o):(r[i]=is(s),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}1&o&&Ae(t,"id",e[0])},i:Q,o:Q,d(e){e&&ve(t),ye(r,e)}}}function ls(e,t,n){let r,o=Q,i=()=>(o(),o=ie(l,(e=>n(2,r=e))),l);e.$$.on_destroy.push((()=>o()));let{id:s}=t,{ref:l}=t;i();let{grid:c}=t;return e.$$set=e=>{"id"in e&&n(0,s=e.id),"ref"in e&&i(n(1,l=e.ref)),"grid"in e&&n(4,c=e.grid)},[s,l,r,function(e){return u(e).map((e=>G(C(e),c,0,!1))).filter((e=>e))},c]}function cs(e){let t,n,r,o,i,s,l,u;return{c(){t=we("pattern"),n=we("rect"),o=xe(),i=we("rect"),Ae(n,"width","1"),Ae(n,"height","1"),Ae(n,"stroke","#000"),Ae(n,"fill","none"),Ae(n,"stroke-width",c),Ae(t,"id",r="grid-"+e[0]),Ae(t,"width","1"),Ae(t,"height","1"),Ae(t,"patternUnits","userSpaceOnUse"),Ae(i,"id",e[0]),Ae(i,"x",-.005),Ae(i,"y",-.005),Ae(i,"width",s=e[1].width+a),Ae(i,"height",l=e[1].height+a),Ae(i,"fill",u="url(#grid-"+e[0]+")"),Ae(i,"stroke","none")},m(e,r){me(e,t,r),ge(t,n),me(e,o,r),me(e,i,r)},p(e,[n]){1&n&&r!==(r="grid-"+e[0])&&Ae(t,"id",r),1&n&&Ae(i,"id",e[0]),2&n&&s!==(s=e[1].width+a)&&Ae(i,"width",s),2&n&&l!==(l=e[1].height+a)&&Ae(i,"height",l),1&n&&u!==(u="url(#grid-"+e[0]+")")&&Ae(i,"fill",u)},i:Q,o:Q,d(e){e&&ve(t),e&&ve(o),e&&ve(i)}}}function as(e,t,n){let{id:r}=t,{ref:o}=t,{grid:i}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"ref"in e&&n(2,o=e.ref),"grid"in e&&n(1,i=e.grid)},[r,i,o]}function us(e){let t;return{c(){t=we("path"),Ae(t,"id",e[0]),Ae(t,"d",e[1]),Ae(t,"fill",ds),Ae(t,"stroke","none")},m(e,n){me(e,t,n)},p(e,[n]){1&n&&Ae(t,"id",e[0]),2&n&&Ae(t,"d",e[1])},i:Q,o:Q,d(e){e&&ve(t)}}}const ds="#08f";function hs(e,t,n){let r,{id:o}=t,{ref:i}=t,{grid:s}=t;const l=ht(i,(e=>{const{index:t,isShown:n}=e;if(!n)return"";const[r,o]=d(t,s);return`M${r},${o}L${r+.2},${o}L${r},${o+.2}Z`}));return se(e,l,(e=>n(1,r=e))),e.$$set=e=>{"id"in e&&n(0,o=e.id),"ref"in e&&n(3,i=e.ref),"grid"in e&&n(4,s=e.grid)},[o,r,l,i,s]}class fs extends ct{constructor(e){super(),lt(this,e,hs,us,oe,{id:0,ref:3,grid:4})}}function ps(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v,y,b,w,k;return{c(){t=we("filter"),n=we("feGaussianBlur"),r=we("feComponentTransfer"),o=we("feFuncR"),i=we("feFuncG"),s=we("feFuncB"),l=we("feFuncA"),a=xe(),u=we("mask"),d=we("rect"),p=we("path"),b=xe(),w=we("path"),Ae(n,"in","SourceGraphic"),Ae(n,"stdDeviation",gs),Ae(o,"type","identity"),Ae(i,"type","identity"),Ae(s,"type","identity"),Ae(l,"type","linear"),Ae(l,"slope","20"),Ae(l,"intercept","-9.5"),Ae(t,"id",c="select-"+e[0]+"-blur"),Ae(d,"x","0"),Ae(d,"y","0"),Ae(d,"width",h=e[1].width),Ae(d,"height",f=e[1].height),Ae(d,"fill",e[3]),Ae(p,"d",e[5]),Ae(p,"fill",e[4]),Ae(p,"stroke","none"),Ae(p,"filter",g="url(#select-"+e[0]+"-blur)"),Ae(u,"id",m="select-"+e[0]+"-mask"),Ae(u,"maskUnits","userSpaceOnUse"),Ae(u,"x","0"),Ae(u,"y","0"),Ae(u,"width",v=e[1].width),Ae(u,"height",y=e[1].height),Ae(w,"id",e[0]),Ae(w,"d",e[6]),Ae(w,"fill",e[2]),Ae(w,"stroke","none"),Ae(w,"mask",k="url(#select-"+e[0]+"-mask)")},m(e,c){me(e,t,c),ge(t,n),ge(t,r),ge(r,o),ge(r,i),ge(r,s),ge(r,l),me(e,a,c),me(e,u,c),ge(u,d),ge(u,p),me(e,b,c),me(e,w,c)},p(e,[n]){1&n&&c!==(c="select-"+e[0]+"-blur")&&Ae(t,"id",c),2&n&&h!==(h=e[1].width)&&Ae(d,"width",h),2&n&&f!==(f=e[1].height)&&Ae(d,"height",f),8&n&&Ae(d,"fill",e[3]),32&n&&Ae(p,"d",e[5]),16&n&&Ae(p,"fill",e[4]),1&n&&g!==(g="url(#select-"+e[0]+"-blur)")&&Ae(p,"filter",g),1&n&&m!==(m="select-"+e[0]+"-mask")&&Ae(u,"id",m),2&n&&v!==(v=e[1].width)&&Ae(u,"width",v),2&n&&y!==(y=e[1].height)&&Ae(u,"height",y),1&n&&Ae(w,"id",e[0]),64&n&&Ae(w,"d",e[6]),4&n&&Ae(w,"fill",e[2]),1&n&&k!==(k="url(#select-"+e[0]+"-mask)")&&Ae(w,"mask",k)},i:Q,o:Q,d(e){e&&ve(t),e&&ve(a),e&&ve(u),e&&ve(b),e&&ve(w)}}}const gs=.05;function ms(e,t,n){let r,o,{id:i}=t,{ref:s}=t,{grid:l}=t,{fill:c="#08f"}=t,{outlineOpacity:a="#b2b2b2"}=t,{innerOpacity:u="#080808"}=t;const d=ht(s,(e=>G(C(e),l,.075)||void 0));se(e,d,(e=>n(5,r=e)));const h=ht(s,(e=>G(C(e),l,0)||void 0));return se(e,h,(e=>n(6,o=e))),e.$$set=e=>{"id"in e&&n(0,i=e.id),"ref"in e&&n(9,s=e.ref),"grid"in e&&n(1,l=e.grid),"fill"in e&&n(2,c=e.fill),"outlineOpacity"in e&&n(3,a=e.outlineOpacity),"innerOpacity"in e&&n(4,u=e.innerOpacity)},[i,l,c,a,u,r,o,d,h,s]}class vs extends ct{constructor(e){super(),lt(this,e,ms,ps,oe,{id:0,ref:9,grid:1,fill:2,outlineOpacity:3,innerOpacity:4})}}function ys(e,t,n){const r=e.slice();return r[16]=t[n].id,r}function bs(e,t,n){const r=e.slice();return r[16]=t[n].id,r[19]=t[n].ref,r[20]=t[n].element,r}function ws(e,t){let n,r,o,i;var s=t[20];function l(e){return{props:{id:e[16],ref:e[19],grid:e[2]}}}return s&&(r=new s(l(t))),{key:e,first:null,c(){n=$e(),r&&rt(r.$$.fragment),o=$e(),this.first=n},m(e,t){me(e,n,t),r&&ot(r,e,t),me(e,o,t),i=!0},p(e,n){t=e;const i={};if(32&n&&(i.id=t[16]),32&n&&(i.ref=t[19]),4&n&&(i.grid=t[2]),s!==(s=t[20])){if(r){Ke();const e=r;Ze(e.$$.fragment,1,0,(()=>{it(e,1)})),Xe()}s?(r=new s(l(t)),rt(r.$$.fragment),Je(r.$$.fragment,1),ot(r,o.parentNode,o)):r=null}else s&&r.$set(i)},i(e){i||(r&&Je(r.$$.fragment,e),i=!0)},o(e){r&&Ze(r.$$.fragment,e),i=!1},d(e){e&&ve(n),e&&ve(o),r&&it(r,e)}}}function ks(e,t){let n,r;return{key:e,first:null,c(){n=we("use"),Ae(n,"href",r="#"+t[16]),this.first=n},m(e,t){me(e,n,t)},p(e,o){t=e,32&o&&r!==(r="#"+t[16])&&Ae(n,"href",r)},d(e){e&&ve(n)}}}function xs(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v=[],y=new Map,b=[],w=new Map,k=e[5];const x=e=>e[16];for(let t=0;t<k.length;t+=1){let n=bs(e,k,t),r=x(n);y.set(r,v[t]=ws(r,n))}let $=e[5];const _=e=>e[16];for(let t=0;t<$.length;t+=1){let n=ys(e,$,t),r=_(n);w.set(r,b[t]=ks(r,n))}return{c(){t=we("svg"),n=we("style"),r=ke('svg {\n            font-family: "Mulish", "Muli", sans-serif;\n        }\n        text {\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }\n        text::selection {\n            background: none;\n        }\n        svg * {\n            pointer-events: none;\n        }\n        .hide {\n            display: none;\n        }\n    '),o=we("defs"),i=we("mask"),s=we("rect"),a=we("path"),u=we("mask"),d=we("rect"),p=we("path");for(let e=0;e<v.length;e+=1)v[e].c();for(let e=0;e<b.length;e+=1)b[e].c();Ae(s,"x","0"),Ae(s,"y","0"),Ae(s,"width",l=e[2].width),Ae(s,"height",c=e[2].height),Ae(s,"fill","#fff"),Ae(a,"d",e[3]),Ae(a,"fill","#000"),Ae(a,"stroke","none"),Ae(i,"id","SUDOKU_MASK_GIVENS"),Ae(i,"maskUnits","userSpaceOnUse"),Ae(d,"x","0"),Ae(d,"y","0"),Ae(d,"width",h=e[2].width),Ae(d,"height",f=e[2].height),Ae(d,"fill","#fff"),Ae(p,"d",e[4]),Ae(p,"fill","#000"),Ae(p,"stroke","none"),Ae(u,"id","SUDOKU_MASK_GIVENS_FILLED"),Ae(u,"maskUnits","userSpaceOnUse"),Ae(t,"viewBox",g=e[1].x+" "+e[1].y+" "+e[1].width+" "+e[1].height),Ae(t,"xmlns","http://www.w3.org/2000/svg")},m(l,c){me(l,t,c),ge(t,n),ge(n,r),ge(t,o),ge(o,i),ge(i,s),ge(i,a),ge(o,u),ge(u,d),ge(u,p);for(let e=0;e<v.length;e+=1)v[e].m(o,null);for(let e=0;e<b.length;e+=1)b[e].m(t,null);e[14](t),m=!0},p(e,[n]){(!m||4&n&&l!==(l=e[2].width))&&Ae(s,"width",l),(!m||4&n&&c!==(c=e[2].height))&&Ae(s,"height",c),(!m||8&n)&&Ae(a,"d",e[3]),(!m||4&n&&h!==(h=e[2].width))&&Ae(d,"width",h),(!m||4&n&&f!==(f=e[2].height))&&Ae(d,"height",f),(!m||16&n)&&Ae(p,"d",e[4]),36&n&&(k=e[5],Ke(),v=tt(v,n,x,1,e,k,y,o,et,ws,null,bs),Xe()),32&n&&($=e[5],b=tt(b,n,_,1,e,$,w,t,Qe,ks,null,ys)),(!m||2&n&&g!==(g=e[1].x+" "+e[1].y+" "+e[1].width+" "+e[1].height))&&Ae(t,"viewBox",g)},i(e){if(!m){for(let e=0;e<k.length;e+=1)Je(v[e]);m=!0}},o(e){for(let e=0;e<v.length;e+=1)Ze(v[e]);m=!1},d(n){n&&ve(t);for(let e=0;e<v.length;e+=1)v[e].d();for(let e=0;e<b.length;e+=1)b[e].d();e[14](null)}}}function $s(e){return Object.assign(e.props,{fill:"#f33",outlineOpacity:"#eee",innerOpacity:"#333"}),new vs(e)}function _s(e){return Object.assign(e.props,{idx2coord:(e,t)=>{const[n,r]=function(e,{width:t,height:n}){const r=e>>2,o=1&e;return 2&e?[o*(1+t)-1,r]:[r,o*(1+n)-1]}(e,t);return[n+.5,r+.5]},radius:0,textColor:"#000",fontSize:.5,mapDigits:e=>!0!==e?e:"_"}),new Fr(e)}const Ms={select:vs,cursor:fs,warning:$s,grid:class extends ct{constructor(e){super(),lt(this,e,as,cs,oe,{id:0,ref:2,grid:1})}},gridRegion:class extends ct{constructor(e){super(),lt(this,e,ls,ss,oe,{id:0,ref:1,grid:4})}},givens:rs,filled:function(e){return e.props.color="#4e72b0",e.props.mask="url(#SUDOKU_MASK_GIVENS)",new rs(e)},corner:class extends ct{constructor(e){super(),lt(this,e,lo,so,oe,{id:0,ref:1,grid:4})}},center:class extends ct{constructor(e){super(),lt(this,e,to,Qr,oe,{id:0,ref:1,grid:4})}},colors:class extends ct{constructor(e){super(),lt(this,e,qr,Yr,oe,{id:0,ref:1,grid:4})}},thermo:Zi,slowThermo:function(e){return Object.assign(e.props,{isSlow:!0}),new Zi(e)},between:class extends ct{constructor(e){super(),lt(this,e,Bi,Pi,oe,{id:0,ref:4,grid:1})}},lockout:class extends ct{constructor(e){super(),lt(this,e,Ei,$i,oe,{id:0,ref:5,grid:1})}},doubleArrow:class extends ct{constructor(e){super(),lt(this,e,Ni,Hi,oe,{id:0,ref:4,grid:1})}},palindrome:function(e){return Object.assign(e.props,{stroke:"#ed8",strokeWidth:.125}),new hi(e)},whisper:function(e){return Object.assign(e.props,{stroke:"#8c8",strokeWidth:.1,pathOptions:{shortenHead:.15,shortenTail:.15,bezierRounding:.15,closeLoops:!0}}),new hi(e)},dutchWhisper:function(e){return Object.assign(e.props,{stroke:"#ff8c00",strokeWidth:.1,pathOptions:{shortenHead:.15,shortenTail:.15,bezierRounding:.15,closeLoops:!0}}),new hi(e)},renban:function(e){return Object.assign(e.props,{stroke:"#c8c",strokeWidth:.075,pathOptions:{shortenHead:.15,shortenTail:.15,bezierRounding:.15,closeLoops:!0}}),new hi(e)},regionSum:function(e){return Object.assign(e.props,{stroke:"#2ECBFF",strokeWidth:.125,pathOptions:{shortenHead:.15,shortenTail:.15,bezierRounding:.15,closeLoops:!0}}),new hi(e)},arrow:class extends ct{constructor(e){super(),lt(this,e,wi,gi,oe,{id:0,ref:1,grid:2})}},min:class extends ct{constructor(e){super(),lt(this,e,li,si,oe,{id:0,ref:1,grid:2})}},max:class extends ct{constructor(e){super(),lt(this,e,Qo,Zo,oe,{id:0,ref:1,grid:2})}},odd:class extends ct{constructor(e){super(),lt(this,e,Vo,Bo,oe,{id:0,ref:1,grid:4})}},even:class extends ct{constructor(e){super(),lt(this,e,Go,Uo,oe,{id:0,ref:1,grid:5})}},columnIndexer:function(e){return Object.assign(e.props,{color:"#C77C7C"}),new jo(e)},rowIndexer:function(e){return Object.assign(e.props,{color:"#7CC77C"}),new jo(e)},killer:class extends ct{constructor(e){super(),lt(this,e,Eo,To,oe,{id:0,ref:1,grid:2})}},clone:class extends ct{constructor(e){super(),lt(this,e,Tr,xr,oe,{id:0,ref:1,grid:4})}},quadruple:class extends ct{constructor(e){super(),lt(this,e,ko,go,oe,{id:0,ref:1,grid:2})}},difference:function(e){return Object.assign(e.props,{idx2coord:b,stroke:"#242424",fill:"#fff",textColor:"#000",strokeWidth:.02}),new Fr(e)},ratio:function(e){return Object.assign(e.props,{idx2coord:b,stroke:"none",fill:"#000",textColor:"#fff"}),new Fr(e)},xv:function(e){return Object.assign(e.props,{idx2coord:b,stroke:"none",fill:"#fff",textColor:"#000",radius:.17,fontSize:.3,fontWeight:800,mapDigits:e=>!0!==e?Y(e):"_"}),new Fr(e)},littleKiller:class extends ct{constructor(e){super(),lt(this,e,jr,Ir,oe,{id:0,ref:1,grid:4})}},sandwich:_s,xsum:_s,skyscraper:_s,diagonal:class extends ct{constructor(e){super(),lt(this,e,ao,co,oe,{id:0,ref:6,grid:1})}},knight:Cr,king:Cr,disjointGroups:Cr,consecutive:Cr,antiX:Cr,antiV:Cr,selfTaxicab:Cr},Ts={grid:a,gridRegion:.02,sandwich:1,xsum:1,skyscraper:1,littleKiller:.9};function As(e,t,n){let r,o,i,s,l,{userState:c}=t,{warningState:a}=t,{boardState:u}=t,{svg:d=null}=t;const h=u.ref("grid");se(e,h,(e=>n(2,o=e)));const f=u.ref("elements"),p=ht([f,h],(([e,t])=>G(C(W(e||{},!0,!1)),t,0)||void 0));se(e,p,(e=>n(3,i=e)));const g=ht([f,h],(([e,t])=>G(C(W(e||{},!0,!0)),t,0)||void 0));se(e,g,(e=>n(4,s=e)));const m=ut([],(e=>{const t=[];null!=c&&t.push({id:"select_192839012",type:"select",order:95,ref:c.ref("select"),element:vs},{id:"cursor_192839012",type:"cursor",order:94,ref:c.ref("cursor"),element:fs}),null!=a&&t.push({id:"warning_19282093",type:"warning",order:94,ref:a.ref("cells"),element:$s}),u.ref("elements/*").watch((([n,r],o,i)=>{const s=(null==o?void 0:o.type)||(null==i?void 0:i.type);if(null==s)return;let l=-1;if(null!=o&&(l=t.findIndex((({id:e})=>r===e)),0>l))console.error(`Failed to find renderer for constraint with id ${r}.`);else{if(null==i||null==i.type)t.splice(l,1);else{const e=Ms[s];if(null==e)return void console.warn(`Cannot render unknown constraint type: ${s}.`);const c={id:r,type:s,order:i.order,ref:u.ref(n,r,"value"),element:e};null==o?t.push(c):(o.type!==i.type&&console.error("Cannot change type of constraint!"),t[l]=c)}t.sort(((e,t)=>e.order-t.order)),e(t)}}),!0)}));se(e,m,(e=>n(5,l=e)));const v=ht([h,m],(([e,t])=>{const n=t.map((({type:e})=>Ts[e])).filter((e=>null!=e)).reduce(((e,t)=>e>t?e:t),0);return{x:-n,y:-n,width:e.width+2*n,height:e.height+2*n}}));return se(e,v,(e=>n(1,r=e))),e.$$set=e=>{"userState"in e&&n(11,c=e.userState),"warningState"in e&&n(12,a=e.warningState),"boardState"in e&&n(13,u=e.boardState),"svg"in e&&n(0,d=e.svg)},[d,r,o,i,s,l,h,p,g,m,v,c,a,u,function(e){je[e?"unshift":"push"]((()=>{d=e,n(0,d)}))}]}class Cs extends ct{constructor(e){super(),lt(this,e,As,xs,oe,{userState:11,warningState:12,boardState:13,svg:0})}}function Ss(e){if(Tn(gt.update({[`elements/${e}`]:null})),e===St.get()){const e=$t.get("marks","filled");St.replace(e),Ct.replace(e)}}const Es=ut([],(e=>{const t=[];gt.ref("elements/*").watch((([n,r],o,i)=>{const s=(null==o?void 0:o.type)||(null==i?void 0:i.type);if(null==s)return;const l=Xn[s];if(null==l)return void console.warn(`Unknown constraint type: ${s}.`);let c=-1;if(null!=o&&(c=t.findIndex((({id:e})=>r===e)),0>c))console.error(`Failed to find constraint with id ${r}.`);else{if(null==i||null==i.type)t.splice(c,1);else if(null==o){const e=gt.ref(n,r);t.push({id:r,elementRef:e,info:l,type:s})}else o.type!==i.type&&console.error(`Cannot change type of constraint! ${o.type} -> ${i.type}`);t.sort(((e,t)=>+(t.info.permanent||0)-+(e.info.permanent||0)||e.info.order-t.info.order)),e(t)}}),!0)}));gt.ref("elements").watch(((e,t,n)=>{if(null==n)return;const r=W(n),o={},i=mt.get(),s=function(e){const t={},n=u((e=>{for(const t of Object.values(e))if("gridRegion"===t.type)return t;return{}})(e).value||{});for(let e=0;e<n.length;e++){const r=C(n[e]);for(const n of r)t[n]=e}return t}(n);for(const{type:e,value:t}of Object.values(n)){const n=Xn[e];null!=n&&null!=n.getWarnings&&n.getWarnings(t,i,s,r,o)}kt.update({cells:o})}),!0);const Is=ht([ut(null,(e=>{let t=[];Es.subscribe((e=>t=e)),St.watch(((n,r,o)=>{const i=o,s=t.find((({id:e})=>i===e))||null;e(s)}),!0)})),ft,mt],(([e,t,n])=>{if(null==e)return null;const{info:r,elementRef:o}=e,i=o.ref("value");if(null==r||null==r.getInputHandler)return null;const s=r.getInputHandler(i,n,t);return s.load(),s}));function Os(e){let t,n,r,o,i,s,l;function c(t){e[9](t)}let a={boardState:e[0],userState:$t,warningState:kt};return void 0!==e[3]&&(a.svg=e[3]),r=new Cs({props:a}),je.push((()=>nt(r,"svg",c))),{c(){t=be("div"),n=xe(),rt(r.$$.fragment),Ae(t,"class","overlay svelte-f3k5y2"),Ae(t,"tabindex","0")},m(o,c){me(o,t,c),e[6](t),me(o,n,c),ot(r,o,c),i=!0,s||(l=[_e(window,"blur",(function(){re(e[4](e[2],"blur"))&&e[4](e[2],"blur").apply(this,arguments)})),_e(window,"click",e[5]),_e(window,"mouseup",(function(){re(e[4](e[2],"mouseUp"))&&e[4](e[2],"mouseUp").apply(this,arguments)})),_e(window,"touchend",(function(){re(e[4](e[2],"touchUp"))&&e[4](e[2],"touchUp").apply(this,arguments)})),_e(window,"keydown",(function(){re(e[4](e[2],"keydown"))&&e[4](e[2],"keydown").apply(this,arguments)})),_e(window,"keyup",(function(){re(e[4](e[2],"keyup"))&&e[4](e[2],"keyup").apply(this,arguments)})),_e(t,"mousedown",Te(Me(e[7])),!0),_e(t,"touchstart",Te(Me(e[8])),!0),_e(t,"mousemove",Te(Me((function(){re(e[4](e[2],"mouseMove"))&&e[4](e[2],"mouseMove").apply(this,arguments)}))),!0),_e(t,"touchmove",Te(Me((function(){re(e[4](e[2],"touchMove"))&&e[4](e[2],"touchMove").apply(this,arguments)}))),!0),_e(t,"click",Te(Me((function(){re(e[4](e[2],"click"))&&e[4](e[2],"click").apply(this,arguments)}))),!0),_e(t,"contextmenu",Te(Me((function(){re(e[4](e[2],"click"))&&e[4](e[2],"click").apply(this,arguments)}))),!0),_e(t,"mouseleave",Te(Me((function(){re(e[4](e[2],"leave"))&&e[4](e[2],"leave").apply(this,arguments)}))),!0)],s=!0)},p(t,[n]){e=t;const i={};1&n&&(i.boardState=e[0]),!o&&8&n&&(o=!0,i.svg=e[3],Fe((()=>o=!1))),r.$set(i)},i(e){i||(Je(r.$$.fragment,e),i=!0)},o(e){Ze(r.$$.fragment,e),i=!1},d(o){o&&ve(t),e[6](null),o&&ve(n),it(r,o),s=!1,ne(l)}}}function Hs(e,t,n){let r,o,i;se(e,pt,(e=>n(1,r=e))),se(e,Is,(e=>n(2,o=e))),se(e,ft,(e=>n(3,i=e)));let{boardState:s}=t;return e.$$set=e=>{"boardState"in e&&n(0,s=e.boardState)},[s,r,o,i,function(e,t){return n=>{null==e||document.activeElement!==r&&document.activeElement!==document.body||e[t](n)}},e=>{null!=o&&document.activeElement!==r&&o.blur(e)},function(e){je[e?"unshift":"push"]((()=>{r=e,pt.set(r)}))},e=>(e.currentTarget.focus(),o&&o.mouseDown(e)),e=>(e.currentTarget.focus(),o&&o.touchDown(e)),function(e){i=e,ft.set(i)}]}class Ls extends ct{constructor(e){super(),lt(this,e,Hs,Os,oe,{boardState:0})}}function Ds(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v,y,b;const w=e[6].default,k=le(w,e,e[5],null);return{c(){t=be("div"),n=be("div"),r=be("button"),o=be("span"),s=xe(),l=be("span"),c=be("span"),u=xe(),d=ke(e[2]),h=xe(),f=be("span"),f.innerHTML='<span class="tree-menu icon icon-inline icon-c-clickable icon-tree-menu svelte-v1vuhq"></span>',p=xe(),g=be("div"),m=be("div"),k&&k.c(),Ae(o,"class","icon hoverable-icon icon-inline icon-c-clickable icon-add"),Ae(r,"class",i=ue(`add-button nobutton hoverable ${e[3]??"hide-button"}`)+" svelte-v1vuhq"),Ae(c,"class",a="icon hoverable-icon icon-inline icon-c-text icon-"+e[1]+" svelte-v1vuhq"),Ae(f,"class","tree-menu-wrapper svelte-v1vuhq"),Ae(n,"role","button"),Ae(n,"tabindex","0"),Ae(n,"class","section-title svelte-v1vuhq"),Ae(m,"class","panel svelte-v1vuhq"),Ae(g,"class","panel-wrapper svelte-v1vuhq"),Ae(t,"class","container svelte-v1vuhq"),Ie(t,"closed",e[0])},m(i,a){me(i,t,a),ge(t,n),ge(n,r),ge(r,o),ge(n,s),ge(n,l),ge(l,c),ge(l,u),ge(l,d),ge(n,h),ge(n,f),ge(t,p),ge(t,g),ge(g,m),k&&k.m(m,null),v=!0,y||(b=[_e(r,"click",Te((function(){re(e[3])&&e[3].apply(this,arguments)}))),_e(n,"click",e[4])],y=!0)},p(n,[o]){e=n,(!v||8&o&&i!==(i=ue(`add-button nobutton hoverable ${e[3]??"hide-button"}`)+" svelte-v1vuhq"))&&Ae(r,"class",i),(!v||2&o&&a!==(a="icon hoverable-icon icon-inline icon-c-text icon-"+e[1]+" svelte-v1vuhq"))&&Ae(c,"class",a),(!v||4&o)&&Ce(d,e[2]),k&&k.p&&(!v||32&o)&&ae(k,w,e,e[5],v?o:-1,null,null),1&o&&Ie(t,"closed",e[0])},i(e){v||(Je(k,e),v=!0)},o(e){Ze(k,e),v=!1},d(e){e&&ve(t),k&&k.d(e),y=!1,ne(b)}}}function js(e,t,n){let{$$slots:r={},$$scope:o}=t,{icon:i}=t,{title:s}=t,{closed:l=!1}=t,{onAdd:c}=t;return e.$$set=e=>{"icon"in e&&n(1,i=e.icon),"title"in e&&n(2,s=e.title),"closed"in e&&n(0,l=e.closed),"onAdd"in e&&n(3,c=e.onAdd),"$$scope"in e&&n(5,o=e.$$scope)},[l,i,s,c,function(){n(0,l=!l)},o,r]}class Ns extends ct{constructor(e){super(),lt(this,e,js,Ds,oe,{icon:1,title:2,closed:0,onAdd:3})}}function Rs(e){let t,n,r,o,i,s;return{c(){t=be("input"),r=xe(),o=be("button"),o.textContent="Jump To Board",Ae(t,"class","radio-select-button svelte-1yj5trp"),Ae(t,"type","radio"),Ae(t,"id",n="local-radio-"+ ++zs),t.__value=e[0],t.value=t.__value,Ae(t,"name",Et),e[12][0].push(t),Ae(o,"class","nobutton focus-skip")},m(n,l){me(n,t,l),t.checked=t.__value===e[7],me(n,r,l),me(n,o,l),i||(s=[_e(t,"change",e[11]),_e(o,"click",e[13])],i=!0)},p(e,n){1&n&&(t.__value=e[0],t.value=t.__value),128&n&&(t.checked=t.__value===e[7])},d(n){n&&ve(t),e[12][0].splice(e[12][0].indexOf(t),1),n&&ve(r),n&&ve(o),i=!1,ne(s)}}}function Us(e){let t,n,r;return{c(){t=be("button"),t.innerHTML='<span class="icon hoverable-icon icon-inline icon-c-clickable icon-trash"></span> \n                ',Ae(t,"class","delete-button nobutton hoverable svelte-1yj5trp")},m(o,i){me(o,t,i),n||(r=_e(t,"click",Te((function(){re(e[6])&&e[6].apply(this,arguments)}))),n=!0)},p(t,n){e=t},d(e){e&&ve(t),n=!1,r()}}}function Ps(e){let t,n;return{c(){t=be("span"),n=ke(e[1]),Ae(t,"class","name svelte-1yj5trp"),Ie(t,"unused",e[2])},m(e,r){me(e,t,r),ge(t,n)},p(e,r){2&r&&Ce(n,e[1]),4&r&&Ie(t,"unused",e[2])},d(e){e&&ve(t)}}}function Gs(e){let t,n;return{c(){t=be("label"),n=ke(e[1]),Ae(t,"class","name clickable svelte-1yj5trp"),Ae(t,"for","local-radio-"+zs),Ae(t,"id","label-"+zs),Ie(t,"unused",e[2])},m(e,r){me(e,t,r),ge(t,n)},p(e,r){2&r&&Ce(n,e[1]),4&r&&Ie(t,"unused",e[2])},d(e){e&&ve(t)}}}function Fs(e){let t,n,r,o,i,s,l,c,a,u,d,h=e[4]&&Rs(e),f=e[3]&&Us(e);function p(e,t){return e[4]?Gs:Ps}let g=p(e),m=g(e);const v=e[10].default,y=le(v,e,e[9],null);return{c(){t=be("div"),h&&h.c(),n=xe(),r=be("div"),o=be("div"),f&&f.c(),i=$e(),m.c(),s=xe(),l=be("div"),y&&y.c(),Ae(o,"class","constraint-row-left svelte-1yj5trp"),Ae(l,"class","constraint-row-right svelte-1yj5trp"),Ae(r,"class","constraint-row svelte-1yj5trp"),Ae(r,"role","button"),Ae(r,"title",c=e[4]?`${e[1]} Tool`:void 0),Ae(r,"aria-labelledby","label-"+zs),Ae(t,"class","constraint-row-container svelte-1yj5trp")},m(c,p){me(c,t,p),h&&h.m(t,null),ge(t,n),ge(t,r),ge(r,o),f&&f.m(o,null),ge(o,i),m.m(o,null),ge(r,s),ge(r,l),y&&y.m(l,null),a=!0,u||(d=_e(r,"click",Te((function(){re(e[5])&&e[5].apply(this,arguments)}))),u=!0)},p(s,[l]){(e=s)[4]?h?h.p(e,l):(h=Rs(e),h.c(),h.m(t,n)):h&&(h.d(1),h=null),e[3]?f?f.p(e,l):(f=Us(e),f.c(),f.m(o,i)):f&&(f.d(1),f=null),g===(g=p(e))&&m?m.p(e,l):(m.d(1),m=g(e),m&&(m.c(),m.m(o,null))),y&&y.p&&(!a||512&l)&&ae(y,v,e,e[9],a?l:-1,null,null),(!a||18&l&&c!==(c=e[4]?`${e[1]} Tool`:void 0))&&Ae(r,"title",c)},i(e){a||(Je(y,e),a=!0)},o(e){Ze(y,e),a=!1},d(e){e&&ve(t),h&&h.d(),f&&f.d(),m.d(),y&&y.d(e),u=!1,d()}}}let zs=0;function Bs(e,t,n){let r,o,i;se(e,Ct,(e=>n(14,r=e))),se(e,St,(e=>n(7,o=e))),se(e,pt,(e=>n(8,i=e)));let{$$slots:s={},$$scope:l}=t,{id:c}=t,{name:a}=t,{unused:u}=t,{deletable:d}=t,{isLocal:h=!1}=t,{onClick:f=(h?()=>de(Ct,r=de(St,o=c,o),r):void 0)}=t,{onTrash:p}=t;return e.$$set=e=>{"id"in e&&n(0,c=e.id),"name"in e&&n(1,a=e.name),"unused"in e&&n(2,u=e.unused),"deletable"in e&&n(3,d=e.deletable),"isLocal"in e&&n(4,h=e.isLocal),"onClick"in e&&n(5,f=e.onClick),"onTrash"in e&&n(6,p=e.onTrash),"$$scope"in e&&n(9,l=e.$$scope)},[c,a,u,d,h,f,p,o,i,l,s,function(){o=this.__value,St.set(o)},[[]],()=>i&&i.focus()]}class Vs extends ct{constructor(e){super(),lt(this,e,Bs,Fs,oe,{id:0,name:1,unused:2,deletable:3,isLocal:4,onClick:5,onTrash:6})}}function Ws(e){let t,n;return{c(){t=be("span"),Ae(t,"class",n="icon icon-inline icon-c-clickable icon-"+e[1].icon)},m(e,n){me(e,t,n)},p(e,r){2&r&&n!==(n="icon icon-inline icon-c-clickable icon-"+e[1].icon)&&Ae(t,"class",n)},d(e){e&&ve(t)}}}function Ys(e){let t,n;return t=new Vs({props:{id:e[0],deletable:e[2],name:e[1].name,unused:!1,isLocal:!0,onTrash:e[4],$$slots:{default:[Ws]},$$scope:{ctx:e}}}),{c(){rt(t.$$.fragment)},m(e,r){ot(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.id=e[0]),4&n&&(r.deletable=e[2]),2&n&&(r.name=e[1].name),1&n&&(r.onTrash=e[4]),66&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Je(t.$$.fragment,e),n=!0)},o(e){Ze(t.$$.fragment,e),n=!1},d(e){it(t,e)}}}function qs(e,t,n){let{id:r}=t,{elementRef:o}=t,{info:i}=t,{deletable:s}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"elementRef"in e&&n(3,o=e.elementRef),"info"in e&&n(1,i=e.info),"deletable"in e&&n(2,s=e.deletable)},[r,i,s,o,()=>Ss(r)]}class Ks extends ct{constructor(e){super(),lt(this,e,qs,Ys,oe,{id:0,elementRef:3,info:1,deletable:2})}}function Xs(e){let t,n,r,o,i,s,l,c,a,u,d;return{c(){t=be("div"),n=be("label"),r=be("span"),i=xe(),s=be("span"),l=ke(e[0]),c=xe(),a=be("input"),Ae(r,"class",o="icon icon-inline icon-c-text icon-"+e[1]+" svelte-1ns67sk"),Ae(s,"class","sr-only"),Ae(n,"for","checkbox-"+ ++Js),Ae(n,"title",e[0]),Ae(n,"class","clickable"),Ae(a,"id","checkbox-"+Js),Ae(a,"type","checkbox"),a.checked=e[3],Ae(t,"class","constraint-checkbox svelte-1ns67sk")},m(o,h){me(o,t,h),ge(t,n),ge(n,r),ge(n,i),ge(n,s),ge(s,l),ge(t,c),ge(t,a),u||(d=[_e(a,"change",e[4]),_e(t,"click",Te(e[5]))],u=!0)},p(e,[t]){2&t&&o!==(o="icon icon-inline icon-c-text icon-"+e[1]+" svelte-1ns67sk")&&Ae(r,"class",o),1&t&&Ce(l,e[0]),1&t&&Ae(n,"title",e[0]),8&t&&(a.checked=e[3])},i:Q,o:Q,d(e){e&&ve(t),u=!1,ne(d)}}}let Js=0;function Zs(e,t,n){let r,o=Q,i=()=>(o(),o=ie(c,(e=>n(3,r=e))),c);e.$$.on_destroy.push((()=>o()));let{name:s}=t,{icon:l}=t,{checked:c}=t;return i(),e.$$set=e=>{"name"in e&&n(0,s=e.name),"icon"in e&&n(1,l=e.icon),"checked"in e&&i(n(2,c=e.checked))},[s,l,c,r,function(){Tn(c.replace(!c.get()))},function(t){Le.call(this,e,t)}]}class Qs extends ct{constructor(e){super(),lt(this,e,Zs,Xs,oe,{name:0,icon:1,checked:2})}}function el(e,t,n){const r=e.slice();return r[9]=t[n].name,r[10]=t[n].icon,r[11]=t[n].refPath,r}function tl(e){let t,n;return t=new Qs({props:{name:e[9],icon:e[10],checked:e[11]?e[4].ref(e[11]):e[4]}}),{c(){rt(t.$$.fragment)},m(e,r){ot(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.name=e[9]),2&n&&(r.icon=e[10]),2&n&&(r.checked=e[11]?e[4].ref(e[11]):e[4]),t.$set(r)},i(e){n||(Je(t.$$.fragment,e),n=!0)},o(e){Ze(t.$$.fragment,e),n=!1},d(e){it(t,e)}}}function nl(e){let t,n,r=Array.isArray(e[1].checkbox)?e[1].checkbox:[e[1].checkbox],o=[];for(let t=0;t<r.length;t+=1)o[t]=tl(el(e,r,t));const i=e=>Ze(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=$e()},m(e,r){for(let t=0;t<o.length;t+=1)o[t].m(e,r);me(e,t,r),n=!0},p(e,n){if(18&n){let s;for(r=Array.isArray(e[1].checkbox)?e[1].checkbox:[e[1].checkbox],s=0;s<r.length;s+=1){const i=el(e,r,s);o[s]?(o[s].p(i,n),Je(o[s],1)):(o[s]=tl(i),o[s].c(),Je(o[s],1),o[s].m(t.parentNode,t))}for(Ke(),s=r.length;s<o.length;s+=1)i(s);Xe()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Je(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Ze(o[e]);n=!1},d(e){ye(o,e),e&&ve(t)}}}function rl(e){let t,n;return t=new Vs({props:{id:e[0],deletable:e[2],name:e[1].name,unused:e[6](e[3]),onClick:e[5],onTrash:e[8],$$slots:{default:[nl]},$$scope:{ctx:e}}}),{c(){rt(t.$$.fragment)},m(e,r){ot(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.id=e[0]),4&n&&(r.deletable=e[2]),2&n&&(r.name=e[1].name),8&n&&(r.unused=e[6](e[3])),1&n&&(r.onTrash=e[8]),16386&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Je(t.$$.fragment,e),n=!0)},o(e){Ze(t.$$.fragment,e),n=!1},d(e){it(t,e)}}}function ol(e,t,n){let r,{id:o}=t,{elementRef:i}=t,{info:s}=t,{deletable:l}=t;const c=i.ref("value");se(e,c,(e=>n(3,r=e)));return e.$$set=e=>{"id"in e&&n(0,o=e.id),"elementRef"in e&&n(7,i=e.elementRef),"info"in e&&n(1,s=e.info),"deletable"in e&&n(2,l=e.deletable)},[o,s,l,r,c,function(){if(Array.isArray(s.checkbox)){const e=s.checkbox.some((({refPath:e})=>!c.ref(e).get())),t={};for(const{refPath:n}of s.checkbox)t[n]=e;Tn(c.replace(t))}else{Tn(c.replace(!c.get()))}},function(e){return Array.isArray(s.checkbox)?s.checkbox.every((({refPath:e})=>!c.ref(e).get())):!e},i,()=>Ss(o)]}class il extends ct{constructor(e){super(),lt(this,e,ol,rl,oe,{id:0,elementRef:7,info:1,deletable:2})}}function sl(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v,y,b,w,k,x=e[1]||e[3]?"Running...":"Idle",$=e[1]?"Stop":"Run";return{c(){t=be("div"),n=be("div"),r=ke(x),o=xe(),i=be("div"),s=be("input"),l=xe(),c=be("label"),c.textContent="True Candidates",a=xe(),u=be("div"),d=be("input"),h=xe(),f=be("label"),f.textContent="Auto",p=xe(),g=be("button"),m=ke($),v=xe(),y=be("div"),b=ke(e[4]),Ae(n,"class","solver-row svelte-6cak3z"),Ae(s,"id","sat-solver-truecandidates"),Ae(s,"type","checkbox"),Ae(s,"name","truecandidates"),Ae(c,"for","sat-solver-truecandidates"),Ae(i,"class","solver-row svelte-6cak3z"),Ae(d,"id","sat-solver-autorun"),Ae(d,"type","checkbox"),Ae(d,"name","autorun"),Ae(f,"for","sat-solver-autorun"),Ee(g,"margin-left","2em"),Ae(u,"class","solver-row svelte-6cak3z"),Ae(y,"class","solver-row svelte-6cak3z"),Ae(t,"class","solver-row-container svelte-6cak3z")},m(x,$){me(x,t,$),ge(t,n),ge(n,r),ge(t,o),ge(t,i),ge(i,s),s.checked=e[2],ge(i,l),ge(i,c),ge(t,a),ge(t,u),ge(u,d),d.checked=e[0],ge(u,h),ge(u,f),ge(u,p),ge(u,g),ge(g,m),ge(t,v),ge(t,y),ge(y,b),w||(k=[_e(s,"change",e[6]),_e(s,"change",e[7]),_e(d,"change",e[8]),_e(g,"click",e[5])],w=!0)},p(e,[t]){10&t&&x!==(x=e[1]||e[3]?"Running...":"Idle")&&Ce(r,x),4&t&&(s.checked=e[2]),1&t&&(d.checked=e[0]),2&t&&$!==($=e[1]?"Stop":"Run")&&Ce(m,$),16&t&&Ce(b,e[4])},i:Q,o:Q,d(e){e&&ve(t),w=!1,ne(k)}}}function ll(e,n,r){var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function l(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}c((r=r.apply(e,t||[])).next())}))};let i=!1,s=null,c=!1,a=null,u=!1,d={},h=!1,f=null,p="Solutions: ?";function g(){return o(this,void 0,void 0,(function*(){if(c)return;const e=gt.get(),t=yield vr.cantAttempt(e);if(t)return r(4,p="Cannot solve: "+t),void r(1,c=!1);const n=Date.now();r(1,c=!0),s=0,r(4,p="Solutions: ?"),a=vr.solve(e,10,(t=>{if(null==s)return void console.warn("solutions null");const o=Date.now()-n+" ms";null==t?(r(4,p=`Solutions: ${s<10?"":"≥"}${s} (${o})`),r(1,c=!1),a=null):(s++,r(4,p=`Solutions: ≥${s} (${o})`),console.log(`Solution ${s}:\n${l(t,e.grid)}`))}))}))}function m(){return o(this,void 0,void 0,(function*(){if(!h||null==f)return!0;const e=yield f();return e&&(r(3,h=!1),f=null),e}))}function v(){return o(this,void 0,void 0,(function*(){if(h)return;const e=gt.get(),t=yield vr.cantAttempt(e);if(t)return r(4,p="Cannot solve: "+t),void r(3,h=!1);r(3,h=!0),f=vr.solveTrueCandidates(e,(e=>{if(null!=d){if(null!=e){let t=[];for(const[n,r]of Object.entries(e)){if(null==r)continue;const e=Number(n);if(1===r.size){const n=r.keys().next().value;t.push(wt("filled",e,n)),t.push(wt("center",e,null))}else{const n=[...r.keys()].reduce(((e,t)=>{const n=r.get(t)||0;return n>0&&(e[t]=n),e}),{});t.push(wt("center",e,n)),t.push(wt("filled",e,null))}}!function(e){const t={undo:{},redo:{}};for(const n of e)null!=n&&(Object.assign(t.undo,n.undo),Object.assign(t.redo,n.redo));Tn(t)}(t)}r(3,h=!1),f=null}else console.warn("candidates null")}))}))}return gt.watch(t.debounce(((e,t,n)=>o(void 0,void 0,void 0,(function*(){const t=(n=e[1],null===(s=vt()[n])||void 0===s?void 0:s.type);var n,s;if(!xt.some((e=>t===e))){if(i){(yield function(){return o(this,void 0,void 0,(function*(){if(!c||null==a)return!0;const e=yield a();return e&&(r(1,c=!1),a=null),e}))}())&&(yield g())}if(u){(yield m())&&(yield v())}}}))),500),!0,"elements/*"),[i,c,u,h,p,function(){return o(this,void 0,void 0,(function*(){c&&a?(yield a())&&(r(1,c=!1),a=null):g()}))},function(e){return o(this,void 0,void 0,(function*(){const t=(null==e?void 0:e.target).checked,n=yield m();t&&n&&(yield v())}))},function(){u=this.checked,r(2,u)},function(){i=this.checked,r(0,i)}]}class cl extends ct{constructor(e){super(),lt(this,e,ll,sl,oe,{})}}function al(e){let t,n,r,o,i,s;const l=e[4].default,c=le(l,e,e[3],null),a=c||function(e){let t;return{c(){t=ke("This modal is blank.")},m(e,n){me(e,t,n)},d(e){e&&ve(t)}}}();return{c(){t=be("div"),n=be("div"),a&&a.c(),Ae(n,"class","modal svelte-1npa9vw"),Ae(t,"class","modal-container svelte-1npa9vw"),t.hidden=r=!e[0]},m(r,l){me(r,t,l),ge(t,n),a&&a.m(n,null),o=!0,i||(s=[_e(n,"keydown",e[2]),_e(t,"click",e[1])],i=!0)},p(e,[n]){c&&c.p&&(!o||8&n)&&ae(c,l,e,e[3],o?n:-1,null,null),(!o||1&n&&r!==(r=!e[0]))&&(t.hidden=r)},i(e){o||(Je(a,e),o=!0)},o(e){Ze(a,e),o=!1},d(e){e&&ve(t),a&&a.d(e),i=!1,ne(s)}}}function ul(e,t,n){let{$$slots:r={},$$scope:o}=t,{visible:i}=t;return e.$$set=e=>{"visible"in e&&n(0,i=e.visible),"$$scope"in e&&n(3,o=e.$$scope)},[i,function(e){this===e.target&&n(0,i=!1)},function(e){"Escape"===e.code&&n(0,i=!1)},o,r]}class dl extends ct{constructor(e){super(),lt(this,e,ul,al,oe,{visible:0})}}function hl(e,t,n){const r=e.slice();return r[9]=t[n].item,r}function fl(e){let t,n,r,o,i,s,l,c,a,u,d=e[9].info.menu?.name+"";function h(){return e[7](e[9])}return{c(){t=be("li"),n=be("button"),r=be("span"),i=xe(),s=ke(d),c=xe(),Ae(r,"class",o="icon hoverable-icon icon-inline icon-c-clickable icon-"+e[9].info.menu?.icon+" svelte-13xysja"),Ae(n,"class","result-item nobutton hoverable svelte-13xysja"),Ae(n,"title",l=e[9].info.meta?.description)},m(e,o){me(e,t,o),ge(t,n),ge(n,r),ge(n,i),ge(n,s),ge(t,c),a||(u=_e(n,"click",h),a=!0)},p(t,i){e=t,6&i&&o!==(o="icon hoverable-icon icon-inline icon-c-clickable icon-"+e[9].info.menu?.icon+" svelte-13xysja")&&Ae(r,"class",o),6&i&&d!==(d=e[9].info.menu?.name+"")&&Ce(s,d),6&i&&l!==(l=e[9].info.meta?.description)&&Ae(n,"title",l)},d(e){e&&ve(t),a=!1,u()}}}function pl(e){let t,n,r,o,i,s,l,c,a,u=Zn(e[1],e[2]),d=[];for(let t=0;t<u.length;t+=1)d[t]=fl(hl(e,u,t));return{c(){t=be("div"),n=be("span"),r=xe(),o=be("input"),i=xe(),s=be("div"),l=be("ol");for(let e=0;e<d.length;e+=1)d[e].c();Ae(n,"class","icon hoverable-icon icon-inline icon-c-clickable icon-search"),Ae(o,"class","search-input svelte-13xysja"),Ae(o,"type","text"),Ae(t,"class","search-input-container svelte-13xysja"),Ae(l,"class","nolist"),Ae(s,"class","search-results svelte-13xysja")},m(u,h){me(u,t,h),ge(t,n),ge(t,r),ge(t,o),e[5](o),Se(o,e[1]),me(u,i,h),me(u,s,h),ge(s,l);for(let e=0;e<d.length;e+=1)d[e].m(l,null);c||(a=_e(o,"input",e[6]),c=!0)},p(e,t){if(2&t&&o.value!==e[1]&&Se(o,e[1]),22&t){let n;for(u=Zn(e[1],e[2]),n=0;n<u.length;n+=1){const r=hl(e,u,n);d[n]?d[n].p(r,t):(d[n]=fl(r),d[n].c(),d[n].m(l,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},d(n){n&&ve(t),e[5](null),n&&ve(i),n&&ve(s),ye(d,n),c=!1,a()}}}function gl(e){let t,n,r;function o(t){e[8](t)}let i={$$slots:{default:[pl]},$$scope:{ctx:e}};return void 0!==e[0]&&(i.visible=e[0]),t=new dl({props:i}),je.push((()=>nt(t,"visible",o))),{c(){rt(t.$$.fragment)},m(e,n){ot(t,e,n),r=!0},p(e,[r]){const o={};4110&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.visible=e[0],Fe((()=>n=!1))),t.$set(o)},i(e){r||(Je(t.$$.fragment,e),r=!0)},o(e){Ze(t.$$.fragment,e),r=!1},d(e){it(t,e)}}}function ml(e,t,n){let{visible:r=!1}=t,{filterFunction:o}=t,{searchPattern:s=""}=t,l=null;function c(e){!function(e,t){var n,r;if(!(e in Xn))throw Error(`Cannot add unknown element type: ${e}.`);const o=Xn[e];let s=t;if("checkbox"===(null===(n=o.menu)||void 0===n?void 0:n.type)&&null==s)if(Array.isArray(o.menu.checkbox)){const e={};for(const{refPath:t}of o.menu.checkbox)e[t]=!0;s=e}else s=!0;const l=Jn(e,s);if(null==o)throw Error(`Cannot add unimplmeneted element type: ${e}.`);const c=i();Tn(gt.update({[`elements/${c}`]:l})),"select"===(null===(r=o.menu)||void 0===r?void 0:r.type)&&(St.replace(c),Ct.replace(c))}(e),n(0,r=!1)}return e.$$set=e=>{"visible"in e&&n(0,r=e.visible),"filterFunction"in e&&n(2,o=e.filterFunction),"searchPattern"in e&&n(1,s=e.searchPattern)},e.$$.update=()=>{9&e.$$.dirty&&r&&setTimeout((()=>l.select()),0)},[r,s,o,l,c,function(e){je[e?"unshift":"push"]((()=>{l=e,n(3,l)}))},function(){s=this.value,n(1,s)},e=>c(e.key),function(e){r=e,n(0,r)}]}class vl extends ct{constructor(e){super(),lt(this,e,ml,gl,oe,{visible:0,filterFunction:2,searchPattern:1})}}function yl(e,t,n){const r=e.slice();return r[16]=t[n].id,r[17]=t[n].elementRef,r[18]=t[n].info,r}function bl(e,t,n){const r=e.slice();return r[16]=t[n].id,r[17]=t[n].elementRef,r[18]=t[n].info,r}function wl(e){let t,n,r,o;return r=new cl({}),{c(){t=be("ul"),n=be("li"),rt(r.$$.fragment),Ae(t,"class","nolist")},m(e,i){me(e,t,i),ge(t,n),ot(r,n,null),o=!0},i(e){o||(Je(r.$$.fragment,e),o=!0)},o(e){Ze(r.$$.fragment,e),o=!1},d(e){e&&ve(t),it(r)}}}function kl(e){let t;return{c(){t=be("li"),t.innerHTML='<div class="empty-placeholder svelte-1hnsx93">Nothing here!</div>'},m(e,n){me(e,t,n)},d(e){e&&ve(t)}}}function xl(e,t){let n,r,o,i;var s=t[9](t[18]);function l(e){return{props:{id:e[16],elementRef:e[17],deletable:!e[18].permanent}}}return s&&(r=new s(l(t))),{key:e,first:null,c(){n=be("li"),r&&rt(r.$$.fragment),o=xe(),this.first=n},m(e,t){me(e,n,t),r&&ot(r,n,null),ge(n,o),i=!0},p(e,i){t=e;const c={};if(8&i&&(c.id=t[16]),8&i&&(c.elementRef=t[17]),8&i&&(c.deletable=!t[18].permanent),s!==(s=t[9](t[18]))){if(r){Ke();const e=r;Ze(e.$$.fragment,1,0,(()=>{it(e,1)})),Xe()}s?(r=new s(l(t)),rt(r.$$.fragment),Je(r.$$.fragment,1),ot(r,n,o)):r=null}else s&&r.$set(c)},i(e){i||(r&&Je(r.$$.fragment,e),i=!0)},o(e){r&&Ze(r.$$.fragment,e),i=!1},d(e){e&&ve(n),r&&it(r)}}}function $l(e){let t,n,r=[],o=new Map,i=e[3];const s=e=>e[16];for(let t=0;t<i.length;t+=1){let n=bl(e,i,t),l=s(n);o.set(l,r[t]=xl(l,n))}let l=null;return i.length||(l=kl()),{c(){t=be("ul");for(let e=0;e<r.length;e+=1)r[e].c();l&&l.c(),Ae(t,"class","nolist")},m(e,o){me(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);l&&l.m(t,null),n=!0},p(e,n){520&n&&(i=e[3],Ke(),r=tt(r,n,s,1,e,i,o,t,et,xl,null,bl),Xe(),i.length?l&&(l.d(1),l=null):l||(l=kl(),l.c(),l.m(t,null)))},i(e){if(!n){for(let e=0;e<i.length;e+=1)Je(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)Ze(r[e]);n=!1},d(e){e&&ve(t);for(let e=0;e<r.length;e+=1)r[e].d();l&&l.d()}}}function _l(e){let t;return{c(){t=be("li"),t.innerHTML='<div class="empty-placeholder svelte-1hnsx93">Nothing here!</div>'},m(e,n){me(e,t,n)},d(e){e&&ve(t)}}}function Ml(e,t){let n,r,o,i;var s=t[9](t[18]);function l(e){return{props:{id:e[16],elementRef:e[17],deletable:!e[18].permanent}}}return s&&(r=new s(l(t))),{key:e,first:null,c(){n=be("li"),r&&rt(r.$$.fragment),o=xe(),this.first=n},m(e,t){me(e,n,t),r&&ot(r,n,null),ge(n,o),i=!0},p(e,i){t=e;const c={};if(16&i&&(c.id=t[16]),16&i&&(c.elementRef=t[17]),16&i&&(c.deletable=!t[18].permanent),s!==(s=t[9](t[18]))){if(r){Ke();const e=r;Ze(e.$$.fragment,1,0,(()=>{it(e,1)})),Xe()}s?(r=new s(l(t)),rt(r.$$.fragment),Je(r.$$.fragment,1),ot(r,n,o)):r=null}else s&&r.$set(c)},i(e){i||(r&&Je(r.$$.fragment,e),i=!0)},o(e){r&&Ze(r.$$.fragment,e),i=!1},d(e){e&&ve(n),r&&it(r)}}}function Tl(e){let t,n,r=[],o=new Map,i=e[4];const s=e=>e[16];for(let t=0;t<i.length;t+=1){let n=yl(e,i,t),l=s(n);o.set(l,r[t]=Ml(l,n))}let l=null;return i.length||(l=_l()),{c(){t=be("ul");for(let e=0;e<r.length;e+=1)r[e].c();l&&l.c(),Ae(t,"class","nolist")},m(e,o){me(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);l&&l.m(t,null),n=!0},p(e,n){528&n&&(i=e[4],Ke(),r=tt(r,n,s,1,e,i,o,t,et,Ml,null,yl),Xe(),i.length?l&&(l.d(1),l=null):l||(l=_l(),l.c(),l.m(t,null)))},i(e){if(!n){for(let e=0;e<i.length;e+=1)Je(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)Ze(r[e]);n=!1},d(e){e&&ve(t);for(let e=0;e<r.length;e+=1)r[e].d();l&&l.d()}}}function Al(e){let t;return{c(){t=be("div"),t.textContent="Nothing here!",Ae(t,"class","empty-placeholder svelte-1hnsx93")},m(e,n){me(e,t,n)},d(e){e&&ve(t)}}}function Cl(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v;function y(t){e[12](t)}function b(t){e[13](t)}r=new Ns({props:{icon:"computer",title:"Solver Panel",$$slots:{default:[wl]},$$scope:{ctx:e}}}),s=new Ns({props:{icon:"globe",title:"Global Constraints",onAdd:e[10],$$slots:{default:[$l]},$$scope:{ctx:e}}}),a=new Ns({props:{icon:"location",title:"Local Constraints",onAdd:e[11],$$slots:{default:[Tl]},$$scope:{ctx:e}}}),h=new Ns({props:{icon:"pencil",title:"Cosmetic Tools",$$slots:{default:[Al]},$$scope:{ctx:e}}});let w={filterFunction:e[2]};return void 0!==e[1]&&(w.visible=e[1]),void 0!==e[0]&&(w.searchPattern=e[0]),p=new vl({props:w}),je.push((()=>nt(p,"visible",y))),je.push((()=>nt(p,"searchPattern",b))),{c(){t=be("ul"),n=be("li"),rt(r.$$.fragment),o=xe(),i=be("li"),rt(s.$$.fragment),l=xe(),c=be("li"),rt(a.$$.fragment),u=xe(),d=be("li"),rt(h.$$.fragment),f=xe(),rt(p.$$.fragment),Ae(t,"class","nolist")},m(e,g){me(e,t,g),ge(t,n),ot(r,n,null),ge(t,o),ge(t,i),ot(s,i,null),ge(t,l),ge(t,c),ot(a,c,null),ge(t,u),ge(t,d),ot(h,d,null),me(e,f,g),ot(p,e,g),v=!0},p(e,[t]){const n={};8388608&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);const o={};7&t&&(o.onAdd=e[10]),8388616&t&&(o.$$scope={dirty:t,ctx:e}),s.$set(o);const i={};7&t&&(i.onAdd=e[11]),8388624&t&&(i.$$scope={dirty:t,ctx:e}),a.$set(i);const l={};8388608&t&&(l.$$scope={dirty:t,ctx:e}),h.$set(l);const c={};4&t&&(c.filterFunction=e[2]),!g&&2&t&&(g=!0,c.visible=e[1],Fe((()=>g=!1))),!m&&1&t&&(m=!0,c.searchPattern=e[0],Fe((()=>m=!1))),p.$set(c)},i(e){v||(Je(r.$$.fragment,e),Je(s.$$.fragment,e),Je(a.$$.fragment,e),Je(h.$$.fragment,e),Je(p.$$.fragment,e),v=!0)},o(e){Ze(r.$$.fragment,e),Ze(s.$$.fragment,e),Ze(a.$$.fragment,e),Ze(h.$$.fragment,e),Ze(p.$$.fragment,e),v=!1},d(e){e&&ve(t),it(r),it(s),it(a),it(h),e&&ve(f),it(p,e)}}}function Sl(e){return null!=e.menu&&!!e.inGlobalMenu}function El(e){return null!=e.menu&&!e.inGlobalMenu}function Il(e,t,n){let r,o,i;function s(e){return!r.some((({type:t})=>e===t))}se(e,Es,(e=>n(14,r=e)));const l=ht(Es,(e=>e.filter((({info:e})=>Sl(e)))));se(e,l,(e=>n(3,o=e)));const c=ht(Es,(e=>e.filter((({info:e})=>El(e)))));se(e,c,(e=>n(4,i=e)));const a=(e,t)=>s(e)&&Sl(t),u=(e,t)=>s(e)&&El(t);let d="",h=!1,f=(e,t)=>!0;return[d,h,f,o,i,l,c,a,u,function(e){const t=e.menu;return null==t?null:function(e){if("select"===t.type)return e.props.info=t,new Ks(e);if("checkbox"===t.type)return e.props.info=t,new il(e);throw Error(`Unknown menu type "${t.type}".`)}},()=>{n(1,h=!0),n(0,d=""),n(2,f=a)},()=>{n(1,h=!0),n(0,d=""),n(2,f=u)},function(e){h=e,n(1,h)},function(e){d=e,n(0,d)}]}class Ol extends ct{constructor(e){super(),lt(this,e,Il,Cl,oe,{})}}var Hl;
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var Ll=function(e,t){return(Ll=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Dl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ll(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var jl=function(){return(jl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Nl(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function Rl(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */var Ul=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),Pl=function(){function e(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.root=e,this.initialize.apply(this,Rl([],Nl(n))),this.foundation=void 0===t?this.getDefaultFoundation():t,this.foundation.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new Ul({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation.destroy()},e.prototype.listen=function(e,t,n){this.root.addEventListener(e,t,n)},e.prototype.unlisten=function(e,t,n){this.root.removeEventListener(e,t,n)},e.prototype.emit=function(e,t,n){var r;void 0===n&&(n=!1),"function"==typeof CustomEvent?r=new CustomEvent(e,{bubbles:n,detail:t}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,n,!1,t),this.root.dispatchEvent(r)},e}();
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
/**
   * @license
   * Copyright 2019 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
function Gl(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},r=function(){};e.document.addEventListener("test",r,n),e.document.removeEventListener("test",r,n)}catch(e){t=!1}return t}
/**
   * @license
   * Copyright 2018 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */(e)&&{passive:!0}}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
var Fl={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},zl={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Bl={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},Vl=["touchstart","pointerdown","mousedown","keydown"],Wl=["touchend","pointerup","mouseup","contextmenu"],Yl=[],ql=function(e){function t(n){var r=e.call(this,jl(jl({},t.defaultAdapter),n))||this;return r.activationAnimationHasEnded_=!1,r.activationTimer_=0,r.fgDeactivationRemovalTimer_=0,r.fgScale_="0",r.frame_={width:0,height:0},r.initialSize_=0,r.layoutFrame_=0,r.maxRadius_=0,r.unboundedCoords_={left:0,top:0},r.activationState_=r.defaultActivationState_(),r.activationTimerCallback_=function(){r.activationAnimationHasEnded_=!0,r.runDeactivationUXLogicIfReady_()},r.activateHandler_=function(e){return r.activate_(e)},r.deactivateHandler_=function(){return r.deactivate_()},r.focusHandler_=function(){return r.handleFocus()},r.blurHandler_=function(){return r.handleBlur()},r.resizeHandler_=function(){return r.layout()},r}return Dl(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Fl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return zl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Bl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var r=t.cssClasses,o=r.ROOT,i=r.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(o),e.adapter.isUnbounded()&&(e.adapter.addClass(i),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,r=n.ROOT,o=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(r),e.adapter.removeClass(o),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(Vl.forEach((function(e){t.adapter.registerInteractionHandler(e,t.activateHandler_)})),this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler_)),this.adapter.registerInteractionHandler("focus",this.focusHandler_),this.adapter.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter.registerInteractionHandler("keyup",this.deactivateHandler_):Wl.forEach((function(e){t.adapter.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;Vl.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler_),Wl.forEach((function(t){e.adapter.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var r=this.previousActivationEvent_;if(!(r&&void 0!==e&&r.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&Yl.length>0&&Yl.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(Yl.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){Yl=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,r=n.VAR_FG_TRANSLATE_START,o=n.VAR_FG_TRANSLATE_END,i=t.cssClasses,s=i.FG_DEACTIVATION,l=i.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var a="",u="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates_(),h=d.startPoint,f=d.endPoint;a=h.x+"px, "+h.y+"px",u=f.x+"px, "+f.y+"px"}this.adapter.updateCssVariable(r,a),this.adapter.updateCssVariable(o,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter.removeClass(s),this.adapter.computeBoundingRect(),this.adapter.addClass(l),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),c)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var r,o,i=t.x,s=t.y,l=i+n.left,c=s+n.top;if("touchstart"===e.type){var a=e;r=a.changedTouches[0].pageX-l,o=a.changedTouches[0].pageY-c}else{var u=e;r=u.pageX-l,o=u.pageY-c}return{x:r,y:o}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,r=this.activationState_,o=r.hasDeactivationUXRun,i=r.isActivated;(o||!i)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter.removeClass(n)}),Bl.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=jl({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var r=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&r%2!=0?this.initialSize_=r-1:this.initialSize_=r,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,r=e.VAR_LEFT,o=e.VAR_TOP,i=e.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize_+"px"),this.adapter.updateCssVariable(i,this.fgScale_),this.adapter.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter.updateCssVariable(r,this.unboundedCoords_.left+"px"),this.adapter.updateCssVariable(o,this.unboundedCoords_.top+"px"))},t}(Ul),Kl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return Dl(t,e),t.attachTo=function(e,n){void 0===n&&(n={isUnbounded:void 0});var r=new t(e);return void 0!==n.isUnbounded&&(r.unbounded=n.isUnbounded),r},t.createAdapter=function(e){return{addClass:function(t){return e.root.classList.add(t)},browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var n,r=e.CSS;if("boolean"==typeof Hl&&!t)return Hl;if(!r||"function"!=typeof r.supports)return!1;var o=r.supports("--css-vars","yes"),i=r.supports("(--css-vars: yes)")&&r.supports("color","#00000000");return n=o||i,t||(Hl=n),n}(window)},computeBoundingRect:function(){return e.root.getBoundingClientRect()},containsEventTarget:function(t){return e.root.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,Gl())},deregisterInteractionHandler:function(t,n){return e.root.removeEventListener(t,n,Gl())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return function(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}(e.root,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,Gl())},registerInteractionHandler:function(t,n){return e.root.addEventListener(t,n,Gl())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root.classList.remove(t)},updateCssVariable:function(t,n){return e.root.style.setProperty(t,n)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!1,configurable:!0}),t.prototype.activate=function(){this.foundation.activate()},t.prototype.deactivate=function(){this.foundation.deactivate()},t.prototype.layout=function(){this.foundation.layout()},t.prototype.getDefaultFoundation=function(){return new ql(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation.setUnbounded(Boolean(this.unbounded_))},t}(Pl);function Xl(e){let t,n,r,o,i,s,l,c,a,u,d;return{c(){t=be("button"),n=be("div"),r=ke(e[0]),o=xe(),i=be("div"),Ae(n,"class","pad-text svelte-14edasu"),Ae(i,"class","pad-color svelte-14edasu"),Ae(i,"style",s=`background-color: ${Pn[e[0]]}`),Ae(t,"class",l=ue(`mdc-ripple-surface padbutton digit-button-${e[0]} ${e[2]}`)+" svelte-14edasu"),Ae(t,"style",c=`grid-area: ${e[1]}`),t.value=e[0],Ae(t,"title",a=`[${e[0]}]`)},m(s,l){me(s,t,l),ge(t,n),ge(n,r),ge(t,o),ge(t,i),u||(d=_e(t,"click",(function(){re(e[3]&&e[3].padClick||void 0)&&(e[3]&&e[3].padClick||void 0).apply(this,arguments)})),u=!0)},p(n,[o]){e=n,1&o&&Ce(r,e[0]),1&o&&s!==(s=`background-color: ${Pn[e[0]]}`)&&Ae(i,"style",s),5&o&&l!==(l=ue(`mdc-ripple-surface padbutton digit-button-${e[0]} ${e[2]}`)+" svelte-14edasu")&&Ae(t,"class",l),2&o&&c!==(c=`grid-area: ${e[1]}`)&&Ae(t,"style",c),1&o&&(t.value=e[0]),1&o&&a!==(a=`[${e[0]}]`)&&Ae(t,"title",a)},i:Q,o:Q,d(e){e&&ve(t),u=!1,d()}}}function Jl(e,t,n){let r;se(e,Is,(e=>n(3,r=e)));let{digit:o}=t,{gridArea:i}=t,{toolName:s}=t;return e.$$set=e=>{"digit"in e&&n(0,o=e.digit),"gridArea"in e&&n(1,i=e.gridArea),"toolName"in e&&n(2,s=e.toolName)},e.$$.update=()=>{5&e.$$.dirty&&setTimeout((()=>{const e=document.getElementsByClassName(`digit-button-${o} ${s}`)[0];null!=e&&Kl.attachTo(e)}),0)},[o,i,s,r]}class Zl extends ct{constructor(e){super(),lt(this,e,Jl,Xl,oe,{digit:0,gridArea:1,toolName:2})}}var Ql=n((function(e,t){!function(){var e=t||this||window;e.default=e;var n="http://www.w3.org/2000/xmlns/",r="http://www.w3.org/2000/svg",o=/url\(["']?(.+?)["']?\)/,i={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},s=function(e){return e instanceof HTMLElement||e instanceof SVGElement},l=function(e){if(!s(e))throw new Error("an HTMLElement or SVGElement is required; got "+e)},c=function(e){return new Promise((function(t,n){s(e)?t(e):n(new Error("an HTMLElement or SVGElement is required; got "+e))}))},a=function(e,t,n){var r=e.viewBox&&e.viewBox.baseVal&&e.viewBox.baseVal[n]||null!==t.getAttribute(n)&&!t.getAttribute(n).match(/%$/)&&parseInt(t.getAttribute(n))||e.getBoundingClientRect()[n]||parseInt(t.style[n])||parseInt(window.getComputedStyle(e).getPropertyValue(n));return null==r||isNaN(parseFloat(r))?0:r},u=function(e){for(var t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([r],{type:n})},d=function(e){return Promise.all(Array.from(e.querySelectorAll("image")).map((function(e){var t,n=e.getAttributeNS("http://www.w3.org/1999/xlink","href")||e.getAttribute("href");return n?((t=n)&&0===t.lastIndexOf("http",0)&&-1===t.lastIndexOf(window.location.host)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+(new Date).valueOf()),new Promise((function(t,r){var o=document.createElement("canvas"),i=new Image;i.crossOrigin="anonymous",i.src=n,i.onerror=function(){return r(new Error("Could not load "+n))},i.onload=function(){o.width=i.width,o.height=i.height,o.getContext("2d").drawImage(i,0,0),e.setAttributeNS("http://www.w3.org/1999/xlink","href",o.toDataURL("image/png")),t(!0)}}))):Promise.resolve(null)})))},h={},f=function(e){return Promise.all(e.map((function(e){return new Promise((function(t,n){if(h[e.url])return t(h[e.url]);var r=new XMLHttpRequest;r.addEventListener("load",(function(){var n=function(e){for(var t="",n=new Uint8Array(e),r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)}(r.response),i=e.text.replace(o,'url("data:'+e.format+";base64,"+n+'")')+"\n";h[e.url]=i,t(i)})),r.addEventListener("error",(function(n){console.warn("Failed to load font from: "+e.url,n),h[e.url]=null,t(null)})),r.addEventListener("abort",(function(n){console.warn("Aborted loading font from: "+e.url,n),t(null)})),r.open("GET",e.url),r.responseType="arraybuffer",r.send()}))}))).then((function(e){return e.filter((function(e){return e})).join("")}))},p=null,g=function(e,t){var n=t||{},r=n.selectorRemap,s=n.modifyStyle,l=n.modifyCss,c=n.fonts,a=n.excludeUnusedCss,u=l||function(e,t){return(r?r(e):e)+"{"+(s?s(t):t)+"}\n"},d=[],h=void 0===c,g=c||[];return(p||(p=Array.from(document.styleSheets).map((function(e){try{return{rules:e.cssRules,href:e.href}}catch(t){return console.warn("Stylesheet could not be loaded: "+e.href,t),{}}})))).forEach((function(t){var n=t.rules,r=t.href;n&&Array.from(n).forEach((function(t){if(void 0!==t.style)if(function(e,t){if(t)try{return e.querySelector(t)||e.parentNode&&e.parentNode.querySelector(t)}catch(e){console.warn('Invalid CSS selector "'+t+'"',e)}}(e,t.selectorText))d.push(u(t.selectorText,t.style.cssText));else if(h&&t.cssText.match(/^@font-face/)){var n=function(e,t){var n=e.cssText.match(o),r=n&&n[1]||"";if(r&&!r.match(/^data:/)&&"about:blank"!==r){var s,l,c=r.startsWith("../")?t+"/../"+r:r.startsWith("./")?t+"/."+r:r;return{text:e.cssText,format:(s=c,l=Object.keys(i).filter((function(e){return s.indexOf("."+e)>0})).map((function(e){return i[e]})),l?l[0]:(console.error("Unknown font format for "+s+". Fonts may not be working correctly."),"application/octet-stream")),url:c}}}(t,r);n&&g.push(n)}else a||d.push(t.cssText)}))})),f(g).then((function(e){return d.join("\n")+e}))},m=function(){if(!navigator.msSaveOrOpenBlob&&!("download"in document.createElement("a")))return{popup:window.open()}};e.prepareSvg=function(e,t,o){l(e);var i=t||{},s=i.left,c=void 0===s?0:s,u=i.top,h=void 0===u?0:u,f=i.width,p=i.height,m=i.scale,v=void 0===m?1:m,y=i.responsive,b=void 0!==y&&y,w=i.excludeCss,k=void 0!==w&&w;return d(e).then((function(){var i=e.cloneNode(!0);i.style.backgroundColor=(t||{}).backgroundColor||e.style.backgroundColor;var s=function(e,t,n,r){if("svg"===e.tagName)return{width:n||a(e,t,"width"),height:r||a(e,t,"height")};if(e.getBBox){var o=e.getBBox(),i=o.x,s=o.y;return{width:i+o.width,height:s+o.height}}}(e,i,f,p),l=s.width,u=s.height;if("svg"!==e.tagName){if(!e.getBBox)return void console.error("Attempted to render non-SVG element",e);null!=i.getAttribute("transform")&&i.setAttribute("transform",i.getAttribute("transform").replace(/translate\(.*?\)/,""));var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.appendChild(i),i=d}if(i.setAttribute("version","1.1"),i.setAttribute("viewBox",[c,h,l,u].join(" ")),i.getAttribute("xmlns")||i.setAttributeNS(n,"xmlns",r),i.getAttribute("xmlns:xlink")||i.setAttributeNS(n,"xmlns:xlink","http://www.w3.org/1999/xlink"),b?(i.removeAttribute("width"),i.removeAttribute("height"),i.setAttribute("preserveAspectRatio","xMinYMin meet")):(i.setAttribute("width",l*v),i.setAttribute("height",u*v)),Array.from(i.querySelectorAll("foreignObject > *")).forEach((function(e){e.setAttributeNS(n,"xmlns","svg"===e.tagName?r:"http://www.w3.org/1999/xhtml")})),!k)return g(e,t).then((function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML="<![CDATA[\n"+e+"\n]]>";var n=document.createElement("defs");n.appendChild(t),i.insertBefore(n,i.firstChild);var r=document.createElement("div");r.appendChild(i);var s=r.innerHTML.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href');if("function"!=typeof o)return{src:s,width:l,height:u};o(s,l,u)}));var m=document.createElement("div");m.appendChild(i);var y=m.innerHTML;if("function"!=typeof o)return{src:y,width:l,height:u};o(y,l,u)}))},e.svgAsDataUri=function(t,n,r){return l(t),e.prepareSvg(t,n).then((function(e){var t=e.src,n=e.width,o=e.height,i="data:image/svg+xml;base64,"+window.btoa(decodeURIComponent(encodeURIComponent('<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+t).replace(/%([0-9A-F]{2})/g,(function(e,t){var n=String.fromCharCode("0x"+t);return"%"===n?"%25":n}))));return"function"==typeof r&&r(i,n,o),i}))},e.svgAsPngUri=function(t,n,r){l(t);var o=n||{},i=o.encoderType,s=void 0===i?"image/png":i,c=o.encoderOptions,a=void 0===c?.8:c,u=o.canvg,d=function(e){var t=e.src,n=e.width,o=e.height,i=document.createElement("canvas"),l=i.getContext("2d"),c=window.devicePixelRatio||1;i.width=n*c,i.height=o*c,i.style.width=i.width+"px",i.style.height=i.height+"px",l.setTransform(c,0,0,c,0,0),u?u(i,t):l.drawImage(t,0,0);var d=void 0;try{d=i.toDataURL(s,a)}catch(e){if("undefined"!=typeof SecurityError&&e instanceof SecurityError||"SecurityError"===e.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw e}return"function"==typeof r&&r(d,i.width,i.height),Promise.resolve(d)};return u?e.prepareSvg(t,n).then(d):e.svgAsDataUri(t,n).then((function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(d({src:r,width:r.width,height:r.height}))},r.onerror=function(){n("There was an error loading the data URI as an image on the following SVG\n"+window.atob(e.slice(26))+"Open the following link to see browser's diagnosis\n"+e)},r.src=e}))}))},e.download=function(e,t,n){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(u(t),e);else{var r=document.createElement("a");if("download"in r){r.download=e,r.style.display="none",document.body.appendChild(r);try{var o=u(t),i=URL.createObjectURL(o);r.href=i,r.onclick=function(){return requestAnimationFrame((function(){return URL.revokeObjectURL(i)}))}}catch(e){console.error(e),console.warn("Error while getting object URL. Falling back to string URL."),r.href=t}r.click(),document.body.removeChild(r)}else n&&n.popup&&(n.popup.document.title=e,n.popup.location.replace(t))}},e.saveSvg=function(t,n,r){var o=m();return c(t).then((function(t){return e.svgAsDataUri(t,r||{})})).then((function(t){return e.download(n,t,o)}))},e.saveSvgAsPng=function(t,n,r){var o=m();return c(t).then((function(t){return e.svgAsPngUri(t,r||{})})).then((function(t){return e.download(n,t,o)}))}}()}));function ec(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v,y,b,w,k,x,$,_,M,T,A,C,S,E,I,O,H,L,D,j,N,R,U,P,G,F,z,B,V,W,Y,q,K,X,J,Z,Q,ee,te,oe,ie;return A=new Zl({props:{digit:1,gridArea:"1 / 1 / 2 / 2",toolName:e[1]}}),S=new Zl({props:{digit:2,gridArea:"1 / 2 / 2 / 3",toolName:e[1]}}),I=new Zl({props:{digit:3,gridArea:"1 / 3 / 2 / 4",toolName:e[1]}}),H=new Zl({props:{digit:4,gridArea:"2 / 1 / 3 / 2",toolName:e[1]}}),D=new Zl({props:{digit:5,gridArea:"2 / 2 / 3 / 3",toolName:e[1]}}),N=new Zl({props:{digit:6,gridArea:"2 / 3 / 3 / 4",toolName:e[1]}}),U=new Zl({props:{digit:7,gridArea:"3 / 1 / 4 / 2",toolName:e[1]}}),G=new Zl({props:{digit:8,gridArea:"3 / 2 / 4 / 3",toolName:e[1]}}),z=new Zl({props:{digit:9,gridArea:"3 / 3 / 4 / 4",toolName:e[1]}}),V=new Zl({props:{digit:0,gridArea:"4 / 1 / 5 / 2",toolName:e[1]}}),{c(){t=be("div"),n=be("div"),r=be("div"),o=be("div"),i=be("input"),s=xe(),l=be("label"),l.innerHTML='<span aria-hidden="true">1</span> \n                    <span class="sr-only">Fill Digits tool</span>',c=xe(),a=be("div"),u=be("input"),d=xe(),h=be("label"),h.innerHTML='<span aria-hidden="true" style="font-size: 50%;"><span style="position: absolute; top:    12%; left:  20%;">1</span> \n                        <span style="position: absolute; top:    12%; right: 20%;">2</span> \n                        <span style="position: absolute; bottom: 12%; left:  20%;">3</span></span> \n                    <span class="sr-only">Corner Marks tool [shift]</span>',f=xe(),p=be("div"),g=be("input"),m=xe(),v=be("label"),v.innerHTML='<span aria-hidden="true" style="font-size: 50%;">123</span> \n                    <span class="sr-only">Center Marks tool [cmd or ctrl]</span>',y=xe(),b=be("div"),w=be("input"),k=xe(),x=be("label"),x.innerHTML='<span class="icon icon-inline icon-c-textinv icon-colors svelte-1hvlbtp"></span> \n                    <span class="sr-only">Colors tool [alt]</span>',$=xe(),_=be("div"),M=be("div"),T=be("div"),rt(A.$$.fragment),C=xe(),rt(S.$$.fragment),E=xe(),rt(I.$$.fragment),O=xe(),rt(H.$$.fragment),L=xe(),rt(D.$$.fragment),j=xe(),rt(N.$$.fragment),R=xe(),rt(U.$$.fragment),P=xe(),rt(G.$$.fragment),F=xe(),rt(z.$$.fragment),B=xe(),rt(V.$$.fragment),W=xe(),Y=be("button"),Y.innerHTML='<span class="icon icon-inline icon-c-textinv icon-delete"></span>',q=xe(),K=be("div"),X=be("button"),X.innerHTML='<span class="icon icon-inline icon-c-textinv icon-undo"></span>',J=xe(),Z=be("button"),Z.innerHTML='<span class="icon icon-inline icon-c-textinv icon-undo redo"></span>',Q=xe(),ee=be("button"),ee.innerHTML='<span class="icon icon-inline icon-c-textinv icon-screenshot"></span>',Ae(i,"class","radio-mode-button svelte-1hvlbtp"),Ae(i,"type","radio"),Ae(i,"name",Et),Ae(i,"id","mode-radio-digits"),i.__value=e[2],i.value=i.__value,e[15][0].push(i),Ae(l,"class","mdc-ripple-surface padbutton padbutton-mode svelte-1hvlbtp"),Ae(l,"role","button"),Ae(l,"for","mode-radio-digits"),Ae(l,"title","Fill digits"),Ae(o,"class","svelte-1hvlbtp"),Ae(u,"class","radio-mode-button svelte-1hvlbtp"),Ae(u,"type","radio"),Ae(u,"name",Et),Ae(u,"id","mode-radio-corner"),u.__value=e[3],u.value=u.__value,e[15][0].push(u),Ae(h,"class","mdc-ripple-surface padbutton padbutton-mode svelte-1hvlbtp"),Ae(h,"role","button"),Ae(h,"for","mode-radio-corner"),Ae(h,"title","Corner marks [shift]"),Ae(a,"class","svelte-1hvlbtp"),Ae(g,"class","radio-mode-button svelte-1hvlbtp"),Ae(g,"type","radio"),Ae(g,"name",Et),Ae(g,"id","mode-radio-center"),g.__value=e[4],g.value=g.__value,e[15][0].push(g),Ae(v,"class","mdc-ripple-surface padbutton padbutton-mode svelte-1hvlbtp"),Ae(v,"role","button"),Ae(v,"for","mode-radio-center"),Ae(v,"title","Center marks [cmd or ctrl]"),Ae(p,"class","svelte-1hvlbtp"),Ae(w,"class","radio-mode-button svelte-1hvlbtp"),Ae(w,"type","radio"),Ae(w,"name",Et),Ae(w,"id","mode-radio-colors"),w.__value=e[5],w.value=w.__value,e[15][0].push(w),Ae(x,"class","mdc-ripple-surface padbutton padbutton-mode svelte-1hvlbtp"),Ae(x,"role","button"),Ae(x,"for","mode-radio-colors"),Ae(x,"title","Color highlights [alt]"),Ae(b,"class","svelte-1hvlbtp"),Ae(r,"class","mode-pad svelte-1hvlbtp"),Ae(n,"class","mode-pad-container svelte-1hvlbtp"),Ae(Y,"class","mdc-ripple-surface padbutton svelte-1hvlbtp"),Ee(Y,"grid-area","4 / 2 / 5 / 4"),Y.value="Delete",Ae(Y,"title","Delete [del or backspace]"),Ae(Y,"aria-label","Delete"),Ae(T,"class","num-pad svelte-1hvlbtp"),Ae(X,"class","mdc-ripple-surface padbutton svelte-1hvlbtp"),Ae(X,"title","Undo [ctrl+z]"),Ae(X,"aria-label","Undo [ctrl+z]"),Ae(Z,"class","mdc-ripple-surface padbutton svelte-1hvlbtp"),Ae(Z,"title","Redo [ctrl+y]"),Ae(Z,"aria-label","Redo [ctrl+y]"),Ae(ee,"class","mdc-ripple-surface padbutton svelte-1hvlbtp"),Ae(ee,"title","Save Image"),Ae(ee,"aria-label","Save Image"),Ae(K,"class","ctrl-pad svelte-1hvlbtp"),Ae(M,"class","right svelte-1hvlbtp"),Ae(_,"class","right-container svelte-1hvlbtp"),Ae(t,"class","container svelte-1hvlbtp")},m(ne,se){me(ne,t,se),ge(t,n),ge(n,r),ge(r,o),ge(o,i),i.checked=i.__value===e[0],ge(o,s),ge(o,l),ge(r,c),ge(r,a),ge(a,u),u.checked=u.__value===e[0],ge(a,d),ge(a,h),ge(r,f),ge(r,p),ge(p,g),g.checked=g.__value===e[0],ge(p,m),ge(p,v),ge(r,y),ge(r,b),ge(b,w),w.checked=w.__value===e[0],ge(b,k),ge(b,x),ge(t,$),ge(t,_),ge(_,M),ge(M,T),ot(A,T,null),ge(T,C),ot(S,T,null),ge(T,E),ot(I,T,null),ge(T,O),ot(H,T,null),ge(T,L),ot(D,T,null),ge(T,j),ot(N,T,null),ge(T,R),ot(U,T,null),ge(T,P),ot(G,T,null),ge(T,F),ot(z,T,null),ge(T,B),ot(V,T,null),ge(T,W),ge(T,Y),ge(M,q),ge(M,K),ge(K,X),ge(K,J),ge(K,Z),ge(K,Q),ge(K,ee),te=!0,oe||(ie=[_e(i,"change",e[14]),_e(i,"change",e[7]),_e(u,"change",e[16]),_e(u,"change",e[7]),_e(g,"change",e[17]),_e(g,"change",e[7]),_e(w,"change",e[18]),_e(w,"change",e[7]),_e(Y,"click",(function(){re(e[6]&&e[6].padClick||void 0)&&(e[6]&&e[6].padClick||void 0).apply(this,arguments)})),_e(X,"click",e[19]),_e(Z,"click",e[20]),_e(ee,"click",e[13]),_e(t,"click",Te(e[12]))],oe=!0)},p(t,[n]){e=t,(!te||4&n)&&(i.__value=e[2],i.value=i.__value),1&n&&(i.checked=i.__value===e[0]),(!te||8&n)&&(u.__value=e[3],u.value=u.__value),1&n&&(u.checked=u.__value===e[0]),(!te||16&n)&&(g.__value=e[4],g.value=g.__value),1&n&&(g.checked=g.__value===e[0]),(!te||32&n)&&(w.__value=e[5],w.value=w.__value),1&n&&(w.checked=w.__value===e[0]);const r={};2&n&&(r.toolName=e[1]),A.$set(r);const o={};2&n&&(o.toolName=e[1]),S.$set(o);const s={};2&n&&(s.toolName=e[1]),I.$set(s);const l={};2&n&&(l.toolName=e[1]),H.$set(l);const c={};2&n&&(c.toolName=e[1]),D.$set(c);const a={};2&n&&(a.toolName=e[1]),N.$set(a);const d={};2&n&&(d.toolName=e[1]),U.$set(d);const h={};2&n&&(h.toolName=e[1]),G.$set(h);const f={};2&n&&(f.toolName=e[1]),z.$set(f);const p={};2&n&&(p.toolName=e[1]),V.$set(p)},i(e){te||(Je(A.$$.fragment,e),Je(S.$$.fragment,e),Je(I.$$.fragment,e),Je(H.$$.fragment,e),Je(D.$$.fragment,e),Je(N.$$.fragment,e),Je(U.$$.fragment,e),Je(G.$$.fragment,e),Je(z.$$.fragment,e),Je(V.$$.fragment,e),te=!0)},o(e){Ze(A.$$.fragment,e),Ze(S.$$.fragment,e),Ze(I.$$.fragment,e),Ze(H.$$.fragment,e),Ze(D.$$.fragment,e),Ze(N.$$.fragment,e),Ze(U.$$.fragment,e),Ze(G.$$.fragment,e),Ze(z.$$.fragment,e),Ze(V.$$.fragment,e),te=!1},d(n){n&&ve(t),e[15][0].splice(e[15][0].indexOf(i),1),e[15][0].splice(e[15][0].indexOf(u),1),e[15][0].splice(e[15][0].indexOf(g),1),e[15][0].splice(e[15][0].indexOf(w),1),it(A),it(S),it(I),it(H),it(D),it(N),it(U),it(G),it(z),it(V),oe=!1,ne(ie)}}}function tc(e,t,n){let r,o,i,s,l,c,a,u;var d;se(e,pt,(e=>n(21,o=e))),se(e,St,(e=>n(0,i=e))),se(e,Is,(e=>n(6,u=e))),d=()=>Array.prototype.forEach.call(document.getElementsByClassName("mdc-ripple-surface"),(e=>Kl.attachTo(e))),He().$$.on_mount.push(d);const h=$t.ref("marks","filled");se(e,h,(e=>n(2,s=e)));const f=$t.ref("marks","corner");se(e,f,(e=>n(3,l=e)));const p=$t.ref("marks","center");se(e,p,(e=>n(4,c=e)));const g=$t.ref("marks","colors");se(e,g,(e=>n(5,a=e)));return e.$$.update=()=>{1&e.$$.dirty&&n(1,r=_t(i)||"")},[i,r,s,l,c,a,u,function(){Ct.set(St.get())},h,f,p,g,function(e){0===e.screenX&&0===e.screenY||o.focus()},function(){Mt.replace(null),At.replace(!1);const e=`Sudoku Studio - ${gt.get("meta","title")||"Untitled"} by ${gt.get("meta","author")||"Anonymous"}.png`;ft.subscribe((t=>Ql.saveSvgAsPng(t,e,{scale:100,backgroundColor:"#fff",top:t.viewBox.baseVal.x,left:t.viewBox.baseVal.y})))()},function(){i=this.__value,St.set(i)},[[]],function(){i=this.__value,St.set(i)},function(){i=this.__value,St.set(i)},function(){i=this.__value,St.set(i)},()=>An(!1),()=>An(!0)]}class nc extends ct{constructor(e){super(),lt(this,e,tc,ec,oe,{})}}function rc(e){let t,n,r,o,i,s,l,c,a,u,d,h,f;return r=new nc({}),{c(){t=be("div"),n=be("div"),rt(r.$$.fragment),o=xe(),i=be("div"),s=be("input"),l=xe(),c=be("input"),a=xe(),u=be("textarea"),Ae(n,"class","entry-pad svelte-fcgi7u"),Ae(s,"class","info-input title svelte-fcgi7u"),Ae(s,"type","text"),Ae(s,"placeholder","Classic Sudoku"),Ae(c,"class","info-input setter svelte-fcgi7u"),Ae(c,"type","text"),Ae(c,"placeholder","Anonymous"),Ae(u,"class","rules-text svelte-fcgi7u"),Ae(u,"placeholder","Normal sudoku rules apply."),Ae(u,"spellcheck","false"),Ae(i,"class","entry-info svelte-fcgi7u"),Ae(t,"class","entry-column svelte-fcgi7u")},m(p,g){me(p,t,g),ge(t,n),ot(r,n,null),e[8](n),ge(t,o),ge(t,i),ge(i,s),Se(s,e[1]),ge(i,l),ge(i,c),Se(c,e[2]),ge(i,a),ge(i,u),Se(u,e[3]),d=!0,h||(f=[_e(s,"input",e[9]),_e(s,"change",e[4]),_e(c,"input",e[10]),_e(c,"change",e[4]),_e(u,"input",e[11]),_e(u,"focus",oc),_e(u,"blur",oc)],h=!0)},p(e,[t]){2&t&&s.value!==e[1]&&Se(s,e[1]),4&t&&c.value!==e[2]&&Se(c,e[2]),8&t&&Se(u,e[3])},i(e){d||(Je(r.$$.fragment,e),d=!0)},o(e){Ze(r.$$.fragment,e),d=!1},d(n){n&&ve(t),it(r),e[8](null),h=!1,ne(f)}}}function oc(e){e.currentTarget.setAttribute("spellcheck",`${document.activeElement===e.currentTarget}`)}function ic(e,t,n){let r,o,i,s;function l(){n(0,s.style.fontSize=.12*s.clientWidth+"px",s)}var c;function a(){const e=u.get(),t=d.get();let n;n=e&&t?`${e} by ${t}`:e||"Sudoku Studio",document.title=n}window.addEventListener("resize",l),c=()=>window.removeEventListener("resize",l),He().$$.on_destroy.push(c),requestAnimationFrame(l);const u=gt.ref("meta","title");se(e,u,(e=>n(1,r=e)));const d=gt.ref("meta","author");se(e,d,(e=>n(2,o=e)));const h=gt.ref("meta","description");return se(e,h,(e=>n(3,i=e))),a(),[s,r,o,i,a,u,d,h,function(e){je[e?"unshift":"push"]((()=>{s=e,n(0,s)}))},function(){r=this.value,u.set(r)},function(){o=this.value,d.set(o)},function(){i=this.value,h.set(i)}]}class sc extends ct{constructor(e){super(),lt(this,e,ic,rc,oe,{})}}function lc(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function cc(e){let t,n,r,o,i,s,l,c,a=e[4]+"",u=e[4]+"";function d(){return e[2](e[5])}return{c(){t=be("li"),n=be("button"),r=ke(a),o=ke("x"),i=ke(u),s=xe(),Ae(n,"class","size-item nobutton svelte-1ecirgf")},m(e,a){me(e,t,a),ge(t,n),ge(n,r),ge(n,o),ge(n,i),ge(t,s),l||(c=_e(n,"click",d),l=!0)},p(t,n){e=t},d(e){e&&ve(t),l=!1,c()}}}function ac(e){let t,n,r=Object.entries(Z),o=[];for(let t=0;t<r.length;t+=1)o[t]=cc(lc(e,r,t));return{c(){t=be("div"),n=be("ol");for(let e=0;e<o.length;e+=1)o[e].c();Ae(n,"class","nolist"),Ae(t,"class","size-choices svelte-1ecirgf")},m(e,r){me(e,t,r),ge(t,n);for(let e=0;e<o.length;e+=1)o[e].m(n,null)},p(e,t){if(2&t){let i;for(r=Object.entries(Z),i=0;i<r.length;i+=1){const s=lc(e,r,i);o[i]?o[i].p(s,t):(o[i]=cc(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(e){e&&ve(t),ye(o,e)}}}function uc(e){let t,n,r;function o(t){e[3](t)}let i={$$slots:{default:[ac]},$$scope:{ctx:e}};return void 0!==e[0]&&(i.visible=e[0]),t=new dl({props:i}),je.push((()=>nt(t,"visible",o))),{c(){rt(t.$$.fragment)},m(e,n){ot(t,e,n),r=!0},p(e,[r]){const o={};256&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.visible=e[0],Fe((()=>n=!1))),t.$set(o)},i(e){r||(Je(t.$$.fragment,e),r=!0)},o(e){Ze(t.$$.fragment,e),r=!1},d(e){it(t,e)}}}function dc(e,t,n){let{visible:r}=t;function o(e){const t=s(Jn,...e);It(t),boardState.update(t),n(0,r=!1)}return e.$$set=e=>{"visible"in e&&n(0,r=e.visible)},[r,o,e=>o(e),function(e){r=e,n(0,r)}]}class hc extends ct{constructor(e){super(),lt(this,e,dc,uc,oe,{visible:0})}}function fc(e){let t,n,r,o,i,s,l,c,a,u,d,h,f,p,g,m;function v(t){e[2](t)}let y={};return void 0!==e[0]&&(y.visible=e[0]),h=new hc({props:y}),je.push((()=>nt(h,"visible",v))),{c(){t=be("div"),n=be("ul"),r=be("li"),r.textContent="Solving/Setting",o=xe(),i=be("li"),s=be("button"),s.textContent="New Grid",l=xe(),c=be("li"),c.textContent="Export",a=xe(),u=be("div"),u.innerHTML='<ul class="header-buttons right svelte-upxvyy"><li>Light/dark</li> \n        <li>Help</li> \n        <li>Settings</li></ul>',d=xe(),rt(h.$$.fragment),Ae(s,"class","nobutton svelte-upxvyy"),Ae(n,"class","header-buttons left svelte-upxvyy"),Ae(t,"class","header-left svelte-upxvyy"),Ae(u,"class","header-right svelte-upxvyy")},m(f,v){me(f,t,v),ge(t,n),ge(n,r),ge(n,o),ge(n,i),ge(i,s),ge(n,l),ge(n,c),me(f,a,v),me(f,u,v),me(f,d,v),ot(h,f,v),p=!0,g||(m=_e(s,"click",e[1]),g=!0)},p(e,[t]){const n={};!f&&1&t&&(f=!0,n.visible=e[0],Fe((()=>f=!1))),h.$set(n)},i(e){p||(Je(h.$$.fragment,e),p=!0)},o(e){Ze(h.$$.fragment,e),p=!1},d(e){e&&ve(t),e&&ve(a),e&&ve(u),e&&ve(d),it(h,e),g=!1,m()}}}function pc(e,t,n){let r=!1;return[r,()=>{n(0,r=!0)},function(e){r=e,n(0,r)}]}class gc extends ct{constructor(e){super(),lt(this,e,pc,fc,oe,{})}}function mc(e){let n,r,o,i,s,l,c,a,u,d,h,f,p,g,m,v,y,b,w,k,x,$,_,M,T,A,C,S,E,I,O;return l=new gc({}),f=new Ol({}),m=new Ls({props:{boardState:gt}}),b=new sc({}),{c(){n=be("header"),r=be("button"),r.textContent="Jump To Board",o=xe(),i=be("div"),s=be("div"),rt(l.$$.fragment),c=xe(),a=be("main"),u=be("div"),d=be("div"),h=be("div"),rt(f.$$.fragment),p=xe(),g=be("div"),rt(m.$$.fragment),v=xe(),y=be("div"),rt(b.$$.fragment),w=xe(),k=be("footer"),x=be("div"),$=be("a"),$.textContent="Sudoku Studio v.376a0a4",_=xe(),M=be("a"),T=ke("Bug Report"),A=xe(),C=be("a"),S=ke("Feature Request"),Ae(r,"class","nobutton focus-skip"),Ae(s,"class","content-row"),Ae(i,"class","content"),Ae(n,"class","svelte-1e5l1it"),Ae(h,"class","left-panel svelte-1e5l1it"),Ae(g,"class","center-panel svelte-1e5l1it"),Ae(y,"class","right-panel svelte-1e5l1it"),Ae(d,"class","content-row svelte-1e5l1it"),Ae(u,"class","content svelte-1e5l1it"),Ae(a,"class","svelte-1e5l1it"),Ae($,"target","_blank"),Ae($,"href","https://github.com/SudokuStudio/SudokuStudio/commit/376a0a4"),Ae($,"class","svelte-1e5l1it"),Ae(M,"target","_blank"),Ae(M,"href",br),Ae(M,"class","svelte-1e5l1it"),Ae(C,"target","_blank"),Ae(C,"href","https://github.com/SudokuStudio/SudokuStudio/issues/new?labels=%E2%9C%A8%20enhancement&template=feature_request.yml&title=%E2%9C%A8+Feature%3A+"),Ae(C,"class","svelte-1e5l1it"),Ae(x,"class","footer-text svelte-1e5l1it"),Ae(k,"class","svelte-1e5l1it")},m(H,L){me(H,n,L),ge(n,r),ge(n,o),ge(n,i),ge(i,s),ot(l,s,null),me(H,c,L),me(H,a,L),ge(a,u),ge(u,d),ge(d,h),ot(f,h,null),ge(d,p),ge(d,g),ot(m,g,null),ge(d,v),ge(d,y),ot(b,y,null),me(H,w,L),me(H,k,L),ge(k,x),ge(x,$),ge(x,_),ge(x,M),ge(M,T),ge(x,A),ge(x,C),ge(C,S),E=!0,I||(O=[_e(r,"click",e[2]),_e(M,"mouseover",t.debounce(e[1],500,!0))],I=!0)},p:Q,i(e){E||(Je(l.$$.fragment,e),Je(f.$$.fragment,e),Je(m.$$.fragment,e),Je(b.$$.fragment,e),E=!0)},o(e){Ze(l.$$.fragment,e),Ze(f.$$.fragment,e),Ze(m.$$.fragment,e),Ze(b.$$.fragment,e),E=!1},d(e){e&&ve(n),it(l),e&&ve(c),e&&ve(a),it(f),it(m),it(b),e&&ve(w),e&&ve(k),I=!1,ne(O)}}}function vc(e,t,n){let r;se(e,pt,(e=>n(0,r=e)));return[r,function(e){const t=new URL(br);t.searchParams.append("version","376a0a4"),t.searchParams.append("browser",window.navigator.userAgent),t.searchParams.append("os",window.navigator.platform),t.searchParams.append("url",window.location.href),e.currentTarget.href=t.href},()=>r&&r.focus()]}!function(){gt.watch(t.debounce(((e,t,n)=>{const o=new URL(window.location.href);o.searchParams.set("b",r.compressToBase64(JSON.stringify(n))),window.history.replaceState(null,"",o.href)}),200),!1,".");const e=new URL(window.location.href);if(e.searchParams.has("f"))try{const t=function(e,t){const n=r.decompressFromBase64(e);if(null==n)throw Error("Failed to LZString decompress fpuzzles board.");const o=JSON.parse(n),l=o.size;if(null==l||!(l in Z))throw Error(`Unknown size: ${l})`);const c=s(t,...Z[l]),a={width:l,height:l};function u(e,n){null==c.elements&&(c.elements={});for(const t of Object.values(c.elements))if(e===t.type)return Object.assign(t.value,n),t;const r=t(e,n);return c.elements[i()]=r,r}function f(e,t){const n=u(e,{});for(const e of t){const t=h(Dt(e.cell),a);n.value[t]=!0}}function g(e,t){const n=u(e,{});for(const e of t)for(const t of e.lines){const e=n.value[i()]=[];for(const n of t){const t=h(Dt(n),a);e.push(t)}}}function v(e,t,n=Number){const r=u(e,{});for(const e of t){if(2!==e.cells.length){console.error("Cannot parse difference not between two cells.");continue}const t=Dt(e.cells[0]),o=Dt(e.cells[1]),i=y([.5*(t[0]+o[0]+1),.5*(t[1]+o[1]+1)],a);if(null==i){console.error(`Cannot parse difference between two nonadjacent cells: ${e.cells.join(", ")}.`);continue}const s=null!=e.value?n(e.value):null;r.value[i]=null==s||s}}function b(e){const t=u("killer",{});for(const n of e){const e=t.value[i()]={cells:{},sum:null!=n.value?Number(n.value):void 0};for(const t of n.cells){const n=h(Dt(t),a);e.cells[n]=!0}}}o.title&&(c.meta.title=o.title),o.author&&(c.meta.author=o.author),o.ruleset&&(c.meta.description=o.ruleset);for(let e=0;e<l;e++){const t=o.grid[e];for(let n=0;n<l;n++){const r=t[n],o=h([n,e],a);if(null!=r.region){let e;e=u("gridRegion",{});const t=e.value;for(let e=0;e<l;e++)null!=t[e][o]&&(t[e][o]=!1);t[r.region][o]=!0}if(null!=r.value){let e;e=r.given?u("givens",{}):u("filled",{}),e.value[o]=r.value}if(r.cornerPencilMarks){const e=u("corner",{}).value[o]={};r.cornerPencilMarks.forEach((t=>e[t]=!0))}if(r.centerPencilMarks){const e=u("center",{}).value[o]={};r.centerPencilMarks.forEach((t=>e[t]=!0))}r.highlight&&((u("colors",{}).value[o]={})[r.highlight]=!0)}}if(o["diagonal+"]&&u("diagonal",{positive:!0}),o["diagonal-"]&&u("diagonal",{negative:!0}),o.antiknight&&u("knight",!0),o.antiking&&u("king",!0),o.disjointgroups&&u("disjointGroups",!0),o.nonconsecutive&&u("consecutive",{orth:!0}),o.thermometer&&g("thermo",o.thermometer),o.betweenline&&g("between",o.betweenline),o.whispers&&g("whisper",o.whispers),o.renban&&g("renban",o.renban),o.palindrome&&g("palindrome",o.palindrome),o.arrow){const e=u("arrow",{});for(const t of o.arrow)for(const n of t.lines||[]){const r=e.value[i()]={bulb:[],body:[]};for(const e of t.cells){const t=h(Dt(e),a);r.bulb.push(t)}for(const e of n){const t=h(Dt(e),a);r.body.push(t)}}}if(o.sandwichsum&&function(e,t){const n=u(e,{});for(const e of t){const t=Dt(e.cell);t[0]+=.5,t[1]+=.5;const r=k(t,a);null!=r?n.value[r]=null==e.value||Number(e.value):console.error("Cannot handle this series.",e)}}("sandwich",o.sandwichsum),o.killercage&&b(o.killercage),o.extraregion&&(console.warn("Extra region import uses killer cage."),b(o.extraregion)),o.littlekillersum){const e=u("littleKiller",{});for(const t of o.littlekillersum){const n=Dt(t.cell);"DR"===t.direction?(n[0]+=.75,n[1]+=.75):"DL"===t.direction?(n[0]+=.25,n[1]+=.75):"UR"===t.direction?(n[0]+=.75,n[1]+=.25):"UL"===t.direction&&(n[0]+=.25,n[1]+=.25);const r=$(n,a);null!=r?e.value[r]=null==t.value||Number(t.value):console.error("Cannot handle this diagonal.",t)}}if(o.difference&&v("difference",o.difference),o.ratio&&v("ratio",o.ratio),o.xv&&v("xv",o.xv,q),o.odd&&f("odd",o.odd),o.even&&f("even",o.even),o.minimum&&f("min",o.minimum),o.maximum&&f("max",o.maximum),o.quadruple){const e=u("quadruple",{});for(const t of o.quadruple){if(4!==t.cells.length){console.error("Cannot parse quadruple not between four cells.");continue}const n=t.cells.map(Dt).reduce((([e,t],[n,r])=>[e+n,t+r]),[0,0]);n[0]*=.25,n[1]*=.25;const r=m(n,a);if(null==r){console.error("Cannot handle this quadruple.",t);continue}const o=p(r,a);e.value[o]=null==t.values||t.values}}if(o.clone){const e=u("clone",{});e:for(const t of o.clone){const n=e.value[i()]={color:void 0,a:t.cells.map((e=>h(Dt(e),a))),b:t.cloneCells.map((e=>h(Dt(e),a)))};let r=null;for(const e of n.a.concat(n.b)){const[t,n]=d(e,a),{c:i}=o.grid[n][t];if(null==i)continue e;if(!i.startsWith("#"))continue e;if(null==r)r=i;else if(r!==i)continue e}if(null==r)continue;const[s,l,c]=Ht.hexToHsluv(r);n.color=Ht.hsluvToHex([s,l,.5*c])}}return o.negative&&console.error(`Cannot handle f-puzzles negative constraints: ${o.negative.join(", ")}.`),c}(e.searchParams.get("f").replace(/ /g,"+"),Jn);return It(t),gt.update(t),e.searchParams.delete("f"),void window.history.replaceState(null,"",e.href)}catch(e){console.error("Failed to parse f-puzzles board",e),console.error(e)}if(e.searchParams.has("c")){const t=/[1-9]/,n=e.searchParams.get("c"),r=9;if(r*r===n.length){const r=Array.from(n).map((e=>t.test(e)?+e:void 0)),o=s(Jn);It(o);for(const e of Object.values(o.elements))"givens"===e.type&&(e.value=r);return gt.update(o),e.searchParams.delete("c"),void window.history.replaceState(null,"",e.href)}}if(e.searchParams.has("b")){const t=e.searchParams.get("b");try{const e=r.decompressFromBase64(t);if(null!=e){const t=JSON.parse(e);return It(t),void gt.update(t)}}catch(e){console.error("Failed to update board from `b` param."),console.error(e)}}const n=s(Jn);It(n),gt.update(n)}();return new class extends ct{constructor(e){super(),lt(this,e,vc,mc,oe,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
